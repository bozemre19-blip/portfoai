function Ov(l,n){for(var s=0;s<n.length;s++){const r=n[s];if(typeof r!="string"&&!Array.isArray(r)){for(const u in r)if(u!=="default"&&!(u in l)){const d=Object.getOwnPropertyDescriptor(r,u);d&&Object.defineProperty(l,u,d.get?d:{enumerable:!0,get:()=>r[u]})}}}return Object.freeze(Object.defineProperty(l,Symbol.toStringTag,{value:"Module"}))}(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))r(u);new MutationObserver(u=>{for(const d of u)if(d.type==="childList")for(const f of d.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&r(f)}).observe(document,{childList:!0,subtree:!0});function s(u){const d={};return u.integrity&&(d.integrity=u.integrity),u.referrerPolicy&&(d.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?d.credentials="include":u.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function r(u){if(u.ep)return;u.ep=!0;const d=s(u);fetch(u.href,d)}})();function Lu(l){return l&&l.__esModule&&Object.prototype.hasOwnProperty.call(l,"default")?l.default:l}function Wg(l){if(Object.prototype.hasOwnProperty.call(l,"__esModule"))return l;var n=l.default;if(typeof n=="function"){var s=function r(){return this instanceof r?Reflect.construct(n,arguments,this.constructor):n.apply(this,arguments)};s.prototype=n.prototype}else s={};return Object.defineProperty(s,"__esModule",{value:!0}),Object.keys(l).forEach(function(r){var u=Object.getOwnPropertyDescriptor(l,r);Object.defineProperty(s,r,u.get?u:{enumerable:!0,get:function(){return l[r]}})}),s}var Wc={exports:{}},Gi={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zm;function Dv(){if(Zm)return Gi;Zm=1;var l=Symbol.for("react.transitional.element"),n=Symbol.for("react.fragment");function s(r,u,d){var f=null;if(d!==void 0&&(f=""+d),u.key!==void 0&&(f=""+u.key),"key"in u){d={};for(var m in u)m!=="key"&&(d[m]=u[m])}else d=u;return u=d.ref,{$$typeof:l,type:r,key:f,ref:u!==void 0?u:null,props:d}}return Gi.Fragment=n,Gi.jsx=s,Gi.jsxs=s,Gi}var Fm;function Rv(){return Fm||(Fm=1,Wc.exports=Dv()),Wc.exports}var o=Rv(),eu={exports:{}},Se={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wm;function zv(){if(Wm)return Se;Wm=1;var l=Symbol.for("react.transitional.element"),n=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),u=Symbol.for("react.profiler"),d=Symbol.for("react.consumer"),f=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),w=Symbol.for("react.activity"),S=Symbol.iterator;function j(N){return N===null||typeof N!="object"?null:(N=S&&N[S]||N["@@iterator"],typeof N=="function"?N:null)}var C={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},R=Object.assign,k={};function $(N,K,Y){this.props=N,this.context=K,this.refs=k,this.updater=Y||C}$.prototype.isReactComponent={},$.prototype.setState=function(N,K){if(typeof N!="object"&&typeof N!="function"&&N!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,N,K,"setState")},$.prototype.forceUpdate=function(N){this.updater.enqueueForceUpdate(this,N,"forceUpdate")};function B(){}B.prototype=$.prototype;function q(N,K,Y){this.props=N,this.context=K,this.refs=k,this.updater=Y||C}var T=q.prototype=new B;T.constructor=q,R(T,$.prototype),T.isPureReactComponent=!0;var Z=Array.isArray;function Q(){}var P={H:null,A:null,T:null,S:null},F=Object.prototype.hasOwnProperty;function O(N,K,Y){var te=Y.ref;return{$$typeof:l,type:N,key:K,ref:te!==void 0?te:null,props:Y}}function G(N,K){return O(N.type,K,N.props)}function ie(N){return typeof N=="object"&&N!==null&&N.$$typeof===l}function ne(N){var K={"=":"=0",":":"=2"};return"$"+N.replace(/[=:]/g,function(Y){return K[Y]})}var se=/\/+/g;function ce(N,K){return typeof N=="object"&&N!==null&&N.key!=null?ne(""+N.key):K.toString(36)}function I(N){switch(N.status){case"fulfilled":return N.value;case"rejected":throw N.reason;default:switch(typeof N.status=="string"?N.then(Q,Q):(N.status="pending",N.then(function(K){N.status==="pending"&&(N.status="fulfilled",N.value=K)},function(K){N.status==="pending"&&(N.status="rejected",N.reason=K)})),N.status){case"fulfilled":return N.value;case"rejected":throw N.reason}}throw N}function M(N,K,Y,te,le){var xe=typeof N;(xe==="undefined"||xe==="boolean")&&(N=null);var je=!1;if(N===null)je=!0;else switch(xe){case"bigint":case"string":case"number":je=!0;break;case"object":switch(N.$$typeof){case l:case n:je=!0;break;case b:return je=N._init,M(je(N._payload),K,Y,te,le)}}if(je)return le=le(N),je=te===""?"."+ce(N,0):te,Z(le)?(Y="",je!=null&&(Y=je.replace(se,"$&/")+"/"),M(le,K,Y,"",function(de){return de})):le!=null&&(ie(le)&&(le=G(le,Y+(le.key==null||N&&N.key===le.key?"":(""+le.key).replace(se,"$&/")+"/")+je)),K.push(le)),1;je=0;var ue=te===""?".":te+":";if(Z(N))for(var be=0;be<N.length;be++)te=N[be],xe=ue+ce(te,be),je+=M(te,K,Y,xe,le);else if(be=j(N),typeof be=="function")for(N=be.call(N),be=0;!(te=N.next()).done;)te=te.value,xe=ue+ce(te,be++),je+=M(te,K,Y,xe,le);else if(xe==="object"){if(typeof N.then=="function")return M(I(N),K,Y,te,le);throw K=String(N),Error("Objects are not valid as a React child (found: "+(K==="[object Object]"?"object with keys {"+Object.keys(N).join(", ")+"}":K)+"). If you meant to render a collection of children, use an array instead.")}return je}function z(N,K,Y){if(N==null)return N;var te=[],le=0;return M(N,te,"","",function(xe){return K.call(Y,xe,le++)}),te}function re(N){if(N._status===-1){var K=N._result;K=K(),K.then(function(Y){(N._status===0||N._status===-1)&&(N._status=1,N._result=Y)},function(Y){(N._status===0||N._status===-1)&&(N._status=2,N._result=Y)}),N._status===-1&&(N._status=0,N._result=K)}if(N._status===1)return N._result.default;throw N._result}var X=typeof reportError=="function"?reportError:function(N){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var K=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof N=="object"&&N!==null&&typeof N.message=="string"?String(N.message):String(N),error:N});if(!window.dispatchEvent(K))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",N);return}console.error(N)},me={map:z,forEach:function(N,K,Y){z(N,function(){K.apply(this,arguments)},Y)},count:function(N){var K=0;return z(N,function(){K++}),K},toArray:function(N){return z(N,function(K){return K})||[]},only:function(N){if(!ie(N))throw Error("React.Children.only expected to receive a single React element child.");return N}};return Se.Activity=w,Se.Children=me,Se.Component=$,Se.Fragment=s,Se.Profiler=u,Se.PureComponent=q,Se.StrictMode=r,Se.Suspense=y,Se.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=P,Se.__COMPILER_RUNTIME={__proto__:null,c:function(N){return P.H.useMemoCache(N)}},Se.cache=function(N){return function(){return N.apply(null,arguments)}},Se.cacheSignal=function(){return null},Se.cloneElement=function(N,K,Y){if(N==null)throw Error("The argument must be a React element, but you passed "+N+".");var te=R({},N.props),le=N.key;if(K!=null)for(xe in K.key!==void 0&&(le=""+K.key),K)!F.call(K,xe)||xe==="key"||xe==="__self"||xe==="__source"||xe==="ref"&&K.ref===void 0||(te[xe]=K[xe]);var xe=arguments.length-2;if(xe===1)te.children=Y;else if(1<xe){for(var je=Array(xe),ue=0;ue<xe;ue++)je[ue]=arguments[ue+2];te.children=je}return O(N.type,le,te)},Se.createContext=function(N){return N={$$typeof:f,_currentValue:N,_currentValue2:N,_threadCount:0,Provider:null,Consumer:null},N.Provider=N,N.Consumer={$$typeof:d,_context:N},N},Se.createElement=function(N,K,Y){var te,le={},xe=null;if(K!=null)for(te in K.key!==void 0&&(xe=""+K.key),K)F.call(K,te)&&te!=="key"&&te!=="__self"&&te!=="__source"&&(le[te]=K[te]);var je=arguments.length-2;if(je===1)le.children=Y;else if(1<je){for(var ue=Array(je),be=0;be<je;be++)ue[be]=arguments[be+2];le.children=ue}if(N&&N.defaultProps)for(te in je=N.defaultProps,je)le[te]===void 0&&(le[te]=je[te]);return O(N,xe,le)},Se.createRef=function(){return{current:null}},Se.forwardRef=function(N){return{$$typeof:m,render:N}},Se.isValidElement=ie,Se.lazy=function(N){return{$$typeof:b,_payload:{_status:-1,_result:N},_init:re}},Se.memo=function(N,K){return{$$typeof:p,type:N,compare:K===void 0?null:K}},Se.startTransition=function(N){var K=P.T,Y={};P.T=Y;try{var te=N(),le=P.S;le!==null&&le(Y,te),typeof te=="object"&&te!==null&&typeof te.then=="function"&&te.then(Q,X)}catch(xe){X(xe)}finally{K!==null&&Y.types!==null&&(K.types=Y.types),P.T=K}},Se.unstable_useCacheRefresh=function(){return P.H.useCacheRefresh()},Se.use=function(N){return P.H.use(N)},Se.useActionState=function(N,K,Y){return P.H.useActionState(N,K,Y)},Se.useCallback=function(N,K){return P.H.useCallback(N,K)},Se.useContext=function(N){return P.H.useContext(N)},Se.useDebugValue=function(){},Se.useDeferredValue=function(N,K){return P.H.useDeferredValue(N,K)},Se.useEffect=function(N,K){return P.H.useEffect(N,K)},Se.useEffectEvent=function(N){return P.H.useEffectEvent(N)},Se.useId=function(){return P.H.useId()},Se.useImperativeHandle=function(N,K,Y){return P.H.useImperativeHandle(N,K,Y)},Se.useInsertionEffect=function(N,K){return P.H.useInsertionEffect(N,K)},Se.useLayoutEffect=function(N,K){return P.H.useLayoutEffect(N,K)},Se.useMemo=function(N,K){return P.H.useMemo(N,K)},Se.useOptimistic=function(N,K){return P.H.useOptimistic(N,K)},Se.useReducer=function(N,K,Y){return P.H.useReducer(N,K,Y)},Se.useRef=function(N){return P.H.useRef(N)},Se.useState=function(N){return P.H.useState(N)},Se.useSyncExternalStore=function(N,K,Y){return P.H.useSyncExternalStore(N,K,Y)},Se.useTransition=function(){return P.H.useTransition()},Se.version="19.2.0",Se}var eg;function Bu(){return eg||(eg=1,eu.exports=zv()),eu.exports}var _=Bu();const $u=Lu(_);var tu={exports:{}},Yi={},au={exports:{}},nu={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tg;function Mv(){return tg||(tg=1,(function(l){function n(M,z){var re=M.length;M.push(z);e:for(;0<re;){var X=re-1>>>1,me=M[X];if(0<u(me,z))M[X]=z,M[re]=me,re=X;else break e}}function s(M){return M.length===0?null:M[0]}function r(M){if(M.length===0)return null;var z=M[0],re=M.pop();if(re!==z){M[0]=re;e:for(var X=0,me=M.length,N=me>>>1;X<N;){var K=2*(X+1)-1,Y=M[K],te=K+1,le=M[te];if(0>u(Y,re))te<me&&0>u(le,Y)?(M[X]=le,M[te]=re,X=te):(M[X]=Y,M[K]=re,X=K);else if(te<me&&0>u(le,re))M[X]=le,M[te]=re,X=te;else break e}}return z}function u(M,z){var re=M.sortIndex-z.sortIndex;return re!==0?re:M.id-z.id}if(l.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var d=performance;l.unstable_now=function(){return d.now()}}else{var f=Date,m=f.now();l.unstable_now=function(){return f.now()-m}}var y=[],p=[],b=1,w=null,S=3,j=!1,C=!1,R=!1,k=!1,$=typeof setTimeout=="function"?setTimeout:null,B=typeof clearTimeout=="function"?clearTimeout:null,q=typeof setImmediate<"u"?setImmediate:null;function T(M){for(var z=s(p);z!==null;){if(z.callback===null)r(p);else if(z.startTime<=M)r(p),z.sortIndex=z.expirationTime,n(y,z);else break;z=s(p)}}function Z(M){if(R=!1,T(M),!C)if(s(y)!==null)C=!0,Q||(Q=!0,ne());else{var z=s(p);z!==null&&I(Z,z.startTime-M)}}var Q=!1,P=-1,F=5,O=-1;function G(){return k?!0:!(l.unstable_now()-O<F)}function ie(){if(k=!1,Q){var M=l.unstable_now();O=M;var z=!0;try{e:{C=!1,R&&(R=!1,B(P),P=-1),j=!0;var re=S;try{t:{for(T(M),w=s(y);w!==null&&!(w.expirationTime>M&&G());){var X=w.callback;if(typeof X=="function"){w.callback=null,S=w.priorityLevel;var me=X(w.expirationTime<=M);if(M=l.unstable_now(),typeof me=="function"){w.callback=me,T(M),z=!0;break t}w===s(y)&&r(y),T(M)}else r(y);w=s(y)}if(w!==null)z=!0;else{var N=s(p);N!==null&&I(Z,N.startTime-M),z=!1}}break e}finally{w=null,S=re,j=!1}z=void 0}}finally{z?ne():Q=!1}}}var ne;if(typeof q=="function")ne=function(){q(ie)};else if(typeof MessageChannel<"u"){var se=new MessageChannel,ce=se.port2;se.port1.onmessage=ie,ne=function(){ce.postMessage(null)}}else ne=function(){$(ie,0)};function I(M,z){P=$(function(){M(l.unstable_now())},z)}l.unstable_IdlePriority=5,l.unstable_ImmediatePriority=1,l.unstable_LowPriority=4,l.unstable_NormalPriority=3,l.unstable_Profiling=null,l.unstable_UserBlockingPriority=2,l.unstable_cancelCallback=function(M){M.callback=null},l.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):F=0<M?Math.floor(1e3/M):5},l.unstable_getCurrentPriorityLevel=function(){return S},l.unstable_next=function(M){switch(S){case 1:case 2:case 3:var z=3;break;default:z=S}var re=S;S=z;try{return M()}finally{S=re}},l.unstable_requestPaint=function(){k=!0},l.unstable_runWithPriority=function(M,z){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var re=S;S=M;try{return z()}finally{S=re}},l.unstable_scheduleCallback=function(M,z,re){var X=l.unstable_now();switch(typeof re=="object"&&re!==null?(re=re.delay,re=typeof re=="number"&&0<re?X+re:X):re=X,M){case 1:var me=-1;break;case 2:me=250;break;case 5:me=1073741823;break;case 4:me=1e4;break;default:me=5e3}return me=re+me,M={id:b++,callback:z,priorityLevel:M,startTime:re,expirationTime:me,sortIndex:-1},re>X?(M.sortIndex=re,n(p,M),s(y)===null&&M===s(p)&&(R?(B(P),P=-1):R=!0,I(Z,re-X))):(M.sortIndex=me,n(y,M),C||j||(C=!0,Q||(Q=!0,ne()))),M},l.unstable_shouldYield=G,l.unstable_wrapCallback=function(M){var z=S;return function(){var re=S;S=z;try{return M.apply(this,arguments)}finally{S=re}}}})(nu)),nu}var ag;function Uv(){return ag||(ag=1,au.exports=Mv()),au.exports}var su={exports:{}},St={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ng;function Lv(){if(ng)return St;ng=1;var l=Bu();function n(y){var p="https://react.dev/errors/"+y;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)p+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+y+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(){}var r={d:{f:s,r:function(){throw Error(n(522))},D:s,C:s,L:s,m:s,X:s,S:s,M:s},p:0,findDOMNode:null},u=Symbol.for("react.portal");function d(y,p,b){var w=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:u,key:w==null?null:""+w,children:y,containerInfo:p,implementation:b}}var f=l.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(y,p){if(y==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return St.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,St.createPortal=function(y,p){var b=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(n(299));return d(y,p,null,b)},St.flushSync=function(y){var p=f.T,b=r.p;try{if(f.T=null,r.p=2,y)return y()}finally{f.T=p,r.p=b,r.d.f()}},St.preconnect=function(y,p){typeof y=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,r.d.C(y,p))},St.prefetchDNS=function(y){typeof y=="string"&&r.d.D(y)},St.preinit=function(y,p){if(typeof y=="string"&&p&&typeof p.as=="string"){var b=p.as,w=m(b,p.crossOrigin),S=typeof p.integrity=="string"?p.integrity:void 0,j=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;b==="style"?r.d.S(y,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:w,integrity:S,fetchPriority:j}):b==="script"&&r.d.X(y,{crossOrigin:w,integrity:S,fetchPriority:j,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},St.preinitModule=function(y,p){if(typeof y=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var b=m(p.as,p.crossOrigin);r.d.M(y,{crossOrigin:b,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&r.d.M(y)},St.preload=function(y,p){if(typeof y=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var b=p.as,w=m(b,p.crossOrigin);r.d.L(y,b,{crossOrigin:w,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},St.preloadModule=function(y,p){if(typeof y=="string")if(p){var b=m(p.as,p.crossOrigin);r.d.m(y,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:b,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else r.d.m(y)},St.requestFormReset=function(y){r.d.r(y)},St.unstable_batchedUpdates=function(y,p){return y(p)},St.useFormState=function(y,p,b){return f.H.useFormState(y,p,b)},St.useFormStatus=function(){return f.H.useHostTransitionStatus()},St.version="19.2.0",St}var sg;function Bv(){if(sg)return su.exports;sg=1;function l(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(l)}catch(n){console.error(n)}}return l(),su.exports=Lv(),su.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ig;function $v(){if(ig)return Yi;ig=1;var l=Uv(),n=Bu(),s=Bv();function r(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)t+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function u(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function d(e){var t=e,a=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(a=t.return),e=t.return;while(e)}return t.tag===3?a:null}function f(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function m(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function y(e){if(d(e)!==e)throw Error(r(188))}function p(e){var t=e.alternate;if(!t){if(t=d(e),t===null)throw Error(r(188));return t!==e?null:e}for(var a=e,i=t;;){var c=a.return;if(c===null)break;var h=c.alternate;if(h===null){if(i=c.return,i!==null){a=i;continue}break}if(c.child===h.child){for(h=c.child;h;){if(h===a)return y(c),e;if(h===i)return y(c),t;h=h.sibling}throw Error(r(188))}if(a.return!==i.return)a=c,i=h;else{for(var g=!1,x=c.child;x;){if(x===a){g=!0,a=c,i=h;break}if(x===i){g=!0,i=c,a=h;break}x=x.sibling}if(!g){for(x=h.child;x;){if(x===a){g=!0,a=h,i=c;break}if(x===i){g=!0,i=h,a=c;break}x=x.sibling}if(!g)throw Error(r(189))}}if(a.alternate!==i)throw Error(r(190))}if(a.tag!==3)throw Error(r(188));return a.stateNode.current===a?e:t}function b(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=b(e),t!==null)return t;e=e.sibling}return null}var w=Object.assign,S=Symbol.for("react.element"),j=Symbol.for("react.transitional.element"),C=Symbol.for("react.portal"),R=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),$=Symbol.for("react.profiler"),B=Symbol.for("react.consumer"),q=Symbol.for("react.context"),T=Symbol.for("react.forward_ref"),Z=Symbol.for("react.suspense"),Q=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),F=Symbol.for("react.lazy"),O=Symbol.for("react.activity"),G=Symbol.for("react.memo_cache_sentinel"),ie=Symbol.iterator;function ne(e){return e===null||typeof e!="object"?null:(e=ie&&e[ie]||e["@@iterator"],typeof e=="function"?e:null)}var se=Symbol.for("react.client.reference");function ce(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===se?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case R:return"Fragment";case $:return"Profiler";case k:return"StrictMode";case Z:return"Suspense";case Q:return"SuspenseList";case O:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case C:return"Portal";case q:return e.displayName||"Context";case B:return(e._context.displayName||"Context")+".Consumer";case T:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case P:return t=e.displayName||null,t!==null?t:ce(e.type)||"Memo";case F:t=e._payload,e=e._init;try{return ce(e(t))}catch{}}return null}var I=Array.isArray,M=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,z=s.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,re={pending:!1,data:null,method:null,action:null},X=[],me=-1;function N(e){return{current:e}}function K(e){0>me||(e.current=X[me],X[me]=null,me--)}function Y(e,t){me++,X[me]=e.current,e.current=t}var te=N(null),le=N(null),xe=N(null),je=N(null);function ue(e,t){switch(Y(xe,t),Y(le,e),Y(te,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?xm(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=xm(t),e=wm(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}K(te),Y(te,e)}function be(){K(te),K(le),K(xe)}function de(e){e.memoizedState!==null&&Y(je,e);var t=te.current,a=wm(t,e.type);t!==a&&(Y(le,e),Y(te,a))}function oe(e){le.current===e&&(K(te),K(le)),je.current===e&&(K(je),Bi._currentValue=re)}var Ee,De;function Be(e){if(Ee===void 0)try{throw Error()}catch(a){var t=a.stack.trim().match(/\n( *(at )?)/);Ee=t&&t[1]||"",De=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ee+e+De}var Mt=!1;function Jt(e,t){if(!e||Mt)return"";Mt=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var i={DetermineComponentFrameRoot:function(){try{if(t){var ee=function(){throw Error()};if(Object.defineProperty(ee.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ee,[])}catch(V){var H=V}Reflect.construct(e,[],ee)}else{try{ee.call()}catch(V){H=V}e.call(ee.prototype)}}else{try{throw Error()}catch(V){H=V}(ee=e())&&typeof ee.catch=="function"&&ee.catch(function(){})}}catch(V){if(V&&H&&typeof V.stack=="string")return[V.stack,H.stack]}return[null,null]}};i.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var c=Object.getOwnPropertyDescriptor(i.DetermineComponentFrameRoot,"name");c&&c.configurable&&Object.defineProperty(i.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var h=i.DetermineComponentFrameRoot(),g=h[0],x=h[1];if(g&&x){var E=g.split(`
`),L=x.split(`
`);for(c=i=0;i<E.length&&!E[i].includes("DetermineComponentFrameRoot");)i++;for(;c<L.length&&!L[c].includes("DetermineComponentFrameRoot");)c++;if(i===E.length||c===L.length)for(i=E.length-1,c=L.length-1;1<=i&&0<=c&&E[i]!==L[c];)c--;for(;1<=i&&0<=c;i--,c--)if(E[i]!==L[c]){if(i!==1||c!==1)do if(i--,c--,0>c||E[i]!==L[c]){var J=`
`+E[i].replace(" at new "," at ");return e.displayName&&J.includes("<anonymous>")&&(J=J.replace("<anonymous>",e.displayName)),J}while(1<=i&&0<=c);break}}}finally{Mt=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?Be(a):""}function qa(e,t){switch(e.tag){case 26:case 27:case 5:return Be(e.type);case 16:return Be("Lazy");case 13:return e.child!==t&&t!==null?Be("Suspense Fallback"):Be("Suspense");case 19:return Be("SuspenseList");case 0:case 15:return Jt(e.type,!1);case 11:return Jt(e.type.render,!1);case 1:return Jt(e.type,!0);case 31:return Be("Activity");default:return""}}function vn(e){try{var t="",a=null;do t+=qa(e,a),a=e,e=e.return;while(e);return t}catch(i){return`
Error generating stack: `+i.message+`
`+i.stack}}var he=Object.prototype.hasOwnProperty,Pe=l.unstable_scheduleCallback,pt=l.unstable_cancelCallback,oa=l.unstable_shouldYield,bn=l.unstable_requestPaint,dt=l.unstable_now,Qs=l.unstable_getCurrentPriorityLevel,Xe=l.unstable_ImmediatePriority,We=l.unstable_UserBlockingPriority,Ue=l.unstable_NormalPriority,Xt=l.unstable_LowPriority,xn=l.unstable_IdlePriority,Kn=l.log,Js=l.unstable_setDisableYieldValue,Xs=null,Ut=null;function Ha(e){if(typeof Kn=="function"&&Js(e),Ut&&typeof Ut.setStrictMode=="function")try{Ut.setStrictMode(Xs,e)}catch{}}var Lt=Math.clz32?Math.clz32:yp,gp=Math.log,pp=Math.LN2;function yp(e){return e>>>=0,e===0?32:31-(gp(e)/pp|0)|0}var nr=256,sr=262144,ir=4194304;function wn(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function rr(e,t,a){var i=e.pendingLanes;if(i===0)return 0;var c=0,h=e.suspendedLanes,g=e.pingedLanes;e=e.warmLanes;var x=i&134217727;return x!==0?(i=x&~h,i!==0?c=wn(i):(g&=x,g!==0?c=wn(g):a||(a=x&~e,a!==0&&(c=wn(a))))):(x=i&~h,x!==0?c=wn(x):g!==0?c=wn(g):a||(a=i&~e,a!==0&&(c=wn(a)))),c===0?0:t!==0&&t!==c&&(t&h)===0&&(h=c&-c,a=t&-t,h>=a||h===32&&(a&4194048)!==0)?t:c}function Zs(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function vp(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ed(){var e=ir;return ir<<=1,(ir&62914560)===0&&(ir=4194304),e}function ql(e){for(var t=[],a=0;31>a;a++)t.push(e);return t}function Fs(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function bp(e,t,a,i,c,h){var g=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var x=e.entanglements,E=e.expirationTimes,L=e.hiddenUpdates;for(a=g&~a;0<a;){var J=31-Lt(a),ee=1<<J;x[J]=0,E[J]=-1;var H=L[J];if(H!==null)for(L[J]=null,J=0;J<H.length;J++){var V=H[J];V!==null&&(V.lane&=-536870913)}a&=~ee}i!==0&&td(e,i,0),h!==0&&c===0&&e.tag!==0&&(e.suspendedLanes|=h&~(g&~t))}function td(e,t,a){e.pendingLanes|=t,e.suspendedLanes&=~t;var i=31-Lt(t);e.entangledLanes|=t,e.entanglements[i]=e.entanglements[i]|1073741824|a&261930}function ad(e,t){var a=e.entangledLanes|=t;for(e=e.entanglements;a;){var i=31-Lt(a),c=1<<i;c&t|e[i]&t&&(e[i]|=t),a&=~c}}function nd(e,t){var a=t&-t;return a=(a&42)!==0?1:Hl(a),(a&(e.suspendedLanes|t))!==0?0:a}function Hl(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Gl(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function sd(){var e=z.p;return e!==0?e:(e=window.event,e===void 0?32:Vm(e.type))}function id(e,t){var a=z.p;try{return z.p=e,t()}finally{z.p=a}}var Ga=Math.random().toString(36).slice(2),yt="__reactFiber$"+Ga,At="__reactProps$"+Ga,Qn="__reactContainer$"+Ga,Yl="__reactEvents$"+Ga,xp="__reactListeners$"+Ga,wp="__reactHandles$"+Ga,rd="__reactResources$"+Ga,Ws="__reactMarker$"+Ga;function Vl(e){delete e[yt],delete e[At],delete e[Yl],delete e[xp],delete e[wp]}function Jn(e){var t=e[yt];if(t)return t;for(var a=e.parentNode;a;){if(t=a[Qn]||a[yt]){if(a=t.alternate,t.child!==null||a!==null&&a.child!==null)for(e=Am(e);e!==null;){if(a=e[yt])return a;e=Am(e)}return t}e=a,a=e.parentNode}return null}function Xn(e){if(e=e[yt]||e[Qn]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function ei(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(r(33))}function Zn(e){var t=e[rd];return t||(t=e[rd]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function ht(e){e[Ws]=!0}var ld=new Set,od={};function _n(e,t){Fn(e,t),Fn(e+"Capture",t)}function Fn(e,t){for(od[e]=t,e=0;e<t.length;e++)ld.add(t[e])}var _p=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),cd={},ud={};function Sp(e){return he.call(ud,e)?!0:he.call(cd,e)?!1:_p.test(e)?ud[e]=!0:(cd[e]=!0,!1)}function lr(e,t,a){if(Sp(t))if(a===null)e.removeAttribute(t);else{switch(typeof a){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var i=t.toLowerCase().slice(0,5);if(i!=="data-"&&i!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+a)}}function or(e,t,a){if(a===null)e.removeAttribute(t);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+a)}}function xa(e,t,a,i){if(i===null)e.removeAttribute(a);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttributeNS(t,a,""+i)}}function Zt(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function dd(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function jp(e,t,a){var i=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var c=i.get,h=i.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return c.call(this)},set:function(g){a=""+g,h.call(this,g)}}),Object.defineProperty(e,t,{enumerable:i.enumerable}),{getValue:function(){return a},setValue:function(g){a=""+g},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Pl(e){if(!e._valueTracker){var t=dd(e)?"checked":"value";e._valueTracker=jp(e,t,""+e[t])}}function hd(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var a=t.getValue(),i="";return e&&(i=dd(e)?e.checked?"true":"false":e.value),e=i,e!==a?(t.setValue(e),!0):!1}function cr(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var kp=/[\n"\\]/g;function Ft(e){return e.replace(kp,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function Il(e,t,a,i,c,h,g,x){e.name="",g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"?e.type=g:e.removeAttribute("type"),t!=null?g==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+Zt(t)):e.value!==""+Zt(t)&&(e.value=""+Zt(t)):g!=="submit"&&g!=="reset"||e.removeAttribute("value"),t!=null?Kl(e,g,Zt(t)):a!=null?Kl(e,g,Zt(a)):i!=null&&e.removeAttribute("value"),c==null&&h!=null&&(e.defaultChecked=!!h),c!=null&&(e.checked=c&&typeof c!="function"&&typeof c!="symbol"),x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"?e.name=""+Zt(x):e.removeAttribute("name")}function fd(e,t,a,i,c,h,g,x){if(h!=null&&typeof h!="function"&&typeof h!="symbol"&&typeof h!="boolean"&&(e.type=h),t!=null||a!=null){if(!(h!=="submit"&&h!=="reset"||t!=null)){Pl(e);return}a=a!=null?""+Zt(a):"",t=t!=null?""+Zt(t):a,x||t===e.value||(e.value=t),e.defaultValue=t}i=i??c,i=typeof i!="function"&&typeof i!="symbol"&&!!i,e.checked=x?e.checked:!!i,e.defaultChecked=!!i,g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(e.name=g),Pl(e)}function Kl(e,t,a){t==="number"&&cr(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function Wn(e,t,a,i){if(e=e.options,t){t={};for(var c=0;c<a.length;c++)t["$"+a[c]]=!0;for(a=0;a<e.length;a++)c=t.hasOwnProperty("$"+e[a].value),e[a].selected!==c&&(e[a].selected=c),c&&i&&(e[a].defaultSelected=!0)}else{for(a=""+Zt(a),t=null,c=0;c<e.length;c++){if(e[c].value===a){e[c].selected=!0,i&&(e[c].defaultSelected=!0);return}t!==null||e[c].disabled||(t=e[c])}t!==null&&(t.selected=!0)}}function md(e,t,a){if(t!=null&&(t=""+Zt(t),t!==e.value&&(e.value=t),a==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=a!=null?""+Zt(a):""}function gd(e,t,a,i){if(t==null){if(i!=null){if(a!=null)throw Error(r(92));if(I(i)){if(1<i.length)throw Error(r(93));i=i[0]}a=i}a==null&&(a=""),t=a}a=Zt(t),e.defaultValue=a,i=e.textContent,i===a&&i!==""&&i!==null&&(e.value=i),Pl(e)}function es(e,t){if(t){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=t;return}}e.textContent=t}var Np=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function pd(e,t,a){var i=t.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?i?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":i?e.setProperty(t,a):typeof a!="number"||a===0||Np.has(t)?t==="float"?e.cssFloat=a:e[t]=(""+a).trim():e[t]=a+"px"}function yd(e,t,a){if(t!=null&&typeof t!="object")throw Error(r(62));if(e=e.style,a!=null){for(var i in a)!a.hasOwnProperty(i)||t!=null&&t.hasOwnProperty(i)||(i.indexOf("--")===0?e.setProperty(i,""):i==="float"?e.cssFloat="":e[i]="");for(var c in t)i=t[c],t.hasOwnProperty(c)&&a[c]!==i&&pd(e,c,i)}else for(var h in t)t.hasOwnProperty(h)&&pd(e,h,t[h])}function Ql(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ep=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ap=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ur(e){return Ap.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function wa(){}var Jl=null;function Xl(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var ts=null,as=null;function vd(e){var t=Xn(e);if(t&&(e=t.stateNode)){var a=e[At]||null;e:switch(e=t.stateNode,t.type){case"input":if(Il(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),t=a.name,a.type==="radio"&&t!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Ft(""+t)+'"][type="radio"]'),t=0;t<a.length;t++){var i=a[t];if(i!==e&&i.form===e.form){var c=i[At]||null;if(!c)throw Error(r(90));Il(i,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name)}}for(t=0;t<a.length;t++)i=a[t],i.form===e.form&&hd(i)}break e;case"textarea":md(e,a.value,a.defaultValue);break e;case"select":t=a.value,t!=null&&Wn(e,!!a.multiple,t,!1)}}}var Zl=!1;function bd(e,t,a){if(Zl)return e(t,a);Zl=!0;try{var i=e(t);return i}finally{if(Zl=!1,(ts!==null||as!==null)&&(Zr(),ts&&(t=ts,e=as,as=ts=null,vd(t),e)))for(t=0;t<e.length;t++)vd(e[t])}}function ti(e,t){var a=e.stateNode;if(a===null)return null;var i=a[At]||null;if(i===null)return null;a=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(e=e.type,i=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!i;break e;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(r(231,t,typeof a));return a}var _a=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Fl=!1;if(_a)try{var ai={};Object.defineProperty(ai,"passive",{get:function(){Fl=!0}}),window.addEventListener("test",ai,ai),window.removeEventListener("test",ai,ai)}catch{Fl=!1}var Ya=null,Wl=null,dr=null;function xd(){if(dr)return dr;var e,t=Wl,a=t.length,i,c="value"in Ya?Ya.value:Ya.textContent,h=c.length;for(e=0;e<a&&t[e]===c[e];e++);var g=a-e;for(i=1;i<=g&&t[a-i]===c[h-i];i++);return dr=c.slice(e,1<i?1-i:void 0)}function hr(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function fr(){return!0}function wd(){return!1}function Ct(e){function t(a,i,c,h,g){this._reactName=a,this._targetInst=c,this.type=i,this.nativeEvent=h,this.target=g,this.currentTarget=null;for(var x in e)e.hasOwnProperty(x)&&(a=e[x],this[x]=a?a(h):h[x]);return this.isDefaultPrevented=(h.defaultPrevented!=null?h.defaultPrevented:h.returnValue===!1)?fr:wd,this.isPropagationStopped=wd,this}return w(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=fr)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=fr)},persist:function(){},isPersistent:fr}),t}var Sn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},mr=Ct(Sn),ni=w({},Sn,{view:0,detail:0}),Cp=Ct(ni),eo,to,si,gr=w({},ni,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:no,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==si&&(si&&e.type==="mousemove"?(eo=e.screenX-si.screenX,to=e.screenY-si.screenY):to=eo=0,si=e),eo)},movementY:function(e){return"movementY"in e?e.movementY:to}}),_d=Ct(gr),Tp=w({},gr,{dataTransfer:0}),Op=Ct(Tp),Dp=w({},ni,{relatedTarget:0}),ao=Ct(Dp),Rp=w({},Sn,{animationName:0,elapsedTime:0,pseudoElement:0}),zp=Ct(Rp),Mp=w({},Sn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Up=Ct(Mp),Lp=w({},Sn,{data:0}),Sd=Ct(Lp),Bp={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},$p={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},qp={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Hp(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=qp[e])?!!t[e]:!1}function no(){return Hp}var Gp=w({},ni,{key:function(e){if(e.key){var t=Bp[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=hr(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?$p[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:no,charCode:function(e){return e.type==="keypress"?hr(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?hr(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Yp=Ct(Gp),Vp=w({},gr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),jd=Ct(Vp),Pp=w({},ni,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:no}),Ip=Ct(Pp),Kp=w({},Sn,{propertyName:0,elapsedTime:0,pseudoElement:0}),Qp=Ct(Kp),Jp=w({},gr,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Xp=Ct(Jp),Zp=w({},Sn,{newState:0,oldState:0}),Fp=Ct(Zp),Wp=[9,13,27,32],so=_a&&"CompositionEvent"in window,ii=null;_a&&"documentMode"in document&&(ii=document.documentMode);var ey=_a&&"TextEvent"in window&&!ii,kd=_a&&(!so||ii&&8<ii&&11>=ii),Nd=" ",Ed=!1;function Ad(e,t){switch(e){case"keyup":return Wp.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Cd(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ns=!1;function ty(e,t){switch(e){case"compositionend":return Cd(t);case"keypress":return t.which!==32?null:(Ed=!0,Nd);case"textInput":return e=t.data,e===Nd&&Ed?null:e;default:return null}}function ay(e,t){if(ns)return e==="compositionend"||!so&&Ad(e,t)?(e=xd(),dr=Wl=Ya=null,ns=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return kd&&t.locale!=="ko"?null:t.data;default:return null}}var ny={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Td(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!ny[e.type]:t==="textarea"}function Od(e,t,a,i){ts?as?as.push(i):as=[i]:ts=i,t=sl(t,"onChange"),0<t.length&&(a=new mr("onChange","change",null,a,i),e.push({event:a,listeners:t}))}var ri=null,li=null;function sy(e){mm(e,0)}function pr(e){var t=ei(e);if(hd(t))return e}function Dd(e,t){if(e==="change")return t}var Rd=!1;if(_a){var io;if(_a){var ro="oninput"in document;if(!ro){var zd=document.createElement("div");zd.setAttribute("oninput","return;"),ro=typeof zd.oninput=="function"}io=ro}else io=!1;Rd=io&&(!document.documentMode||9<document.documentMode)}function Md(){ri&&(ri.detachEvent("onpropertychange",Ud),li=ri=null)}function Ud(e){if(e.propertyName==="value"&&pr(li)){var t=[];Od(t,li,e,Xl(e)),bd(sy,t)}}function iy(e,t,a){e==="focusin"?(Md(),ri=t,li=a,ri.attachEvent("onpropertychange",Ud)):e==="focusout"&&Md()}function ry(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return pr(li)}function ly(e,t){if(e==="click")return pr(t)}function oy(e,t){if(e==="input"||e==="change")return pr(t)}function cy(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Bt=typeof Object.is=="function"?Object.is:cy;function oi(e,t){if(Bt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var a=Object.keys(e),i=Object.keys(t);if(a.length!==i.length)return!1;for(i=0;i<a.length;i++){var c=a[i];if(!he.call(t,c)||!Bt(e[c],t[c]))return!1}return!0}function Ld(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Bd(e,t){var a=Ld(e);e=0;for(var i;a;){if(a.nodeType===3){if(i=e+a.textContent.length,e<=t&&i>=t)return{node:a,offset:t-e};e=i}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Ld(a)}}function $d(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?$d(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function qd(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=cr(e.document);t instanceof e.HTMLIFrameElement;){try{var a=typeof t.contentWindow.location.href=="string"}catch{a=!1}if(a)e=t.contentWindow;else break;t=cr(e.document)}return t}function lo(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var uy=_a&&"documentMode"in document&&11>=document.documentMode,ss=null,oo=null,ci=null,co=!1;function Hd(e,t,a){var i=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;co||ss==null||ss!==cr(i)||(i=ss,"selectionStart"in i&&lo(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),ci&&oi(ci,i)||(ci=i,i=sl(oo,"onSelect"),0<i.length&&(t=new mr("onSelect","select",null,t,a),e.push({event:t,listeners:i}),t.target=ss)))}function jn(e,t){var a={};return a[e.toLowerCase()]=t.toLowerCase(),a["Webkit"+e]="webkit"+t,a["Moz"+e]="moz"+t,a}var is={animationend:jn("Animation","AnimationEnd"),animationiteration:jn("Animation","AnimationIteration"),animationstart:jn("Animation","AnimationStart"),transitionrun:jn("Transition","TransitionRun"),transitionstart:jn("Transition","TransitionStart"),transitioncancel:jn("Transition","TransitionCancel"),transitionend:jn("Transition","TransitionEnd")},uo={},Gd={};_a&&(Gd=document.createElement("div").style,"AnimationEvent"in window||(delete is.animationend.animation,delete is.animationiteration.animation,delete is.animationstart.animation),"TransitionEvent"in window||delete is.transitionend.transition);function kn(e){if(uo[e])return uo[e];if(!is[e])return e;var t=is[e],a;for(a in t)if(t.hasOwnProperty(a)&&a in Gd)return uo[e]=t[a];return e}var Yd=kn("animationend"),Vd=kn("animationiteration"),Pd=kn("animationstart"),dy=kn("transitionrun"),hy=kn("transitionstart"),fy=kn("transitioncancel"),Id=kn("transitionend"),Kd=new Map,ho="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");ho.push("scrollEnd");function ca(e,t){Kd.set(e,t),_n(t,[e])}var yr=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},Wt=[],rs=0,fo=0;function vr(){for(var e=rs,t=fo=rs=0;t<e;){var a=Wt[t];Wt[t++]=null;var i=Wt[t];Wt[t++]=null;var c=Wt[t];Wt[t++]=null;var h=Wt[t];if(Wt[t++]=null,i!==null&&c!==null){var g=i.pending;g===null?c.next=c:(c.next=g.next,g.next=c),i.pending=c}h!==0&&Qd(a,c,h)}}function br(e,t,a,i){Wt[rs++]=e,Wt[rs++]=t,Wt[rs++]=a,Wt[rs++]=i,fo|=i,e.lanes|=i,e=e.alternate,e!==null&&(e.lanes|=i)}function mo(e,t,a,i){return br(e,t,a,i),xr(e)}function Nn(e,t){return br(e,null,null,t),xr(e)}function Qd(e,t,a){e.lanes|=a;var i=e.alternate;i!==null&&(i.lanes|=a);for(var c=!1,h=e.return;h!==null;)h.childLanes|=a,i=h.alternate,i!==null&&(i.childLanes|=a),h.tag===22&&(e=h.stateNode,e===null||e._visibility&1||(c=!0)),e=h,h=h.return;return e.tag===3?(h=e.stateNode,c&&t!==null&&(c=31-Lt(a),e=h.hiddenUpdates,i=e[c],i===null?e[c]=[t]:i.push(t),t.lane=a|536870912),h):null}function xr(e){if(50<Oi)throw Oi=0,Sc=null,Error(r(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var ls={};function my(e,t,a,i){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function $t(e,t,a,i){return new my(e,t,a,i)}function go(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Sa(e,t){var a=e.alternate;return a===null?(a=$t(e.tag,t,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=t,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&65011712,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,t=e.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function Jd(e,t){e.flags&=65011714;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,t=a.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function wr(e,t,a,i,c,h){var g=0;if(i=e,typeof e=="function")go(e)&&(g=1);else if(typeof e=="string")g=bv(e,a,te.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case O:return e=$t(31,a,t,c),e.elementType=O,e.lanes=h,e;case R:return En(a.children,c,h,t);case k:g=8,c|=24;break;case $:return e=$t(12,a,t,c|2),e.elementType=$,e.lanes=h,e;case Z:return e=$t(13,a,t,c),e.elementType=Z,e.lanes=h,e;case Q:return e=$t(19,a,t,c),e.elementType=Q,e.lanes=h,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case q:g=10;break e;case B:g=9;break e;case T:g=11;break e;case P:g=14;break e;case F:g=16,i=null;break e}g=29,a=Error(r(130,e===null?"null":typeof e,"")),i=null}return t=$t(g,a,t,c),t.elementType=e,t.type=i,t.lanes=h,t}function En(e,t,a,i){return e=$t(7,e,i,t),e.lanes=a,e}function po(e,t,a){return e=$t(6,e,null,t),e.lanes=a,e}function Xd(e){var t=$t(18,null,null,0);return t.stateNode=e,t}function yo(e,t,a){return t=$t(4,e.children!==null?e.children:[],e.key,t),t.lanes=a,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Zd=new WeakMap;function ea(e,t){if(typeof e=="object"&&e!==null){var a=Zd.get(e);return a!==void 0?a:(t={value:e,source:t,stack:vn(t)},Zd.set(e,t),t)}return{value:e,source:t,stack:vn(t)}}var os=[],cs=0,_r=null,ui=0,ta=[],aa=0,Va=null,pa=1,ya="";function ja(e,t){os[cs++]=ui,os[cs++]=_r,_r=e,ui=t}function Fd(e,t,a){ta[aa++]=pa,ta[aa++]=ya,ta[aa++]=Va,Va=e;var i=pa;e=ya;var c=32-Lt(i)-1;i&=~(1<<c),a+=1;var h=32-Lt(t)+c;if(30<h){var g=c-c%5;h=(i&(1<<g)-1).toString(32),i>>=g,c-=g,pa=1<<32-Lt(t)+c|a<<c|i,ya=h+e}else pa=1<<h|a<<c|i,ya=e}function vo(e){e.return!==null&&(ja(e,1),Fd(e,1,0))}function bo(e){for(;e===_r;)_r=os[--cs],os[cs]=null,ui=os[--cs],os[cs]=null;for(;e===Va;)Va=ta[--aa],ta[aa]=null,ya=ta[--aa],ta[aa]=null,pa=ta[--aa],ta[aa]=null}function Wd(e,t){ta[aa++]=pa,ta[aa++]=ya,ta[aa++]=Va,pa=t.id,ya=t.overflow,Va=e}var vt=null,Qe=null,Re=!1,Pa=null,na=!1,xo=Error(r(519));function Ia(e){var t=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw di(ea(t,e)),xo}function eh(e){var t=e.stateNode,a=e.type,i=e.memoizedProps;switch(t[yt]=e,t[At]=i,a){case"dialog":Ce("cancel",t),Ce("close",t);break;case"iframe":case"object":case"embed":Ce("load",t);break;case"video":case"audio":for(a=0;a<Ri.length;a++)Ce(Ri[a],t);break;case"source":Ce("error",t);break;case"img":case"image":case"link":Ce("error",t),Ce("load",t);break;case"details":Ce("toggle",t);break;case"input":Ce("invalid",t),fd(t,i.value,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name,!0);break;case"select":Ce("invalid",t);break;case"textarea":Ce("invalid",t),gd(t,i.value,i.defaultValue,i.children)}a=i.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||t.textContent===""+a||i.suppressHydrationWarning===!0||vm(t.textContent,a)?(i.popover!=null&&(Ce("beforetoggle",t),Ce("toggle",t)),i.onScroll!=null&&Ce("scroll",t),i.onScrollEnd!=null&&Ce("scrollend",t),i.onClick!=null&&(t.onclick=wa),t=!0):t=!1,t||Ia(e,!0)}function th(e){for(vt=e.return;vt;)switch(vt.tag){case 5:case 31:case 13:na=!1;return;case 27:case 3:na=!0;return;default:vt=vt.return}}function us(e){if(e!==vt)return!1;if(!Re)return th(e),Re=!0,!1;var t=e.tag,a;if((a=t!==3&&t!==27)&&((a=t===5)&&(a=e.type,a=!(a!=="form"&&a!=="button")||Bc(e.type,e.memoizedProps)),a=!a),a&&Qe&&Ia(e),th(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(r(317));Qe=Em(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(r(317));Qe=Em(e)}else t===27?(t=Qe,ln(e.type)?(e=Yc,Yc=null,Qe=e):Qe=t):Qe=vt?ia(e.stateNode.nextSibling):null;return!0}function An(){Qe=vt=null,Re=!1}function wo(){var e=Pa;return e!==null&&(Rt===null?Rt=e:Rt.push.apply(Rt,e),Pa=null),e}function di(e){Pa===null?Pa=[e]:Pa.push(e)}var _o=N(null),Cn=null,ka=null;function Ka(e,t,a){Y(_o,t._currentValue),t._currentValue=a}function Na(e){e._currentValue=_o.current,K(_o)}function So(e,t,a){for(;e!==null;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,i!==null&&(i.childLanes|=t)):i!==null&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===a)break;e=e.return}}function jo(e,t,a,i){var c=e.child;for(c!==null&&(c.return=e);c!==null;){var h=c.dependencies;if(h!==null){var g=c.child;h=h.firstContext;e:for(;h!==null;){var x=h;h=c;for(var E=0;E<t.length;E++)if(x.context===t[E]){h.lanes|=a,x=h.alternate,x!==null&&(x.lanes|=a),So(h.return,a,e),i||(g=null);break e}h=x.next}}else if(c.tag===18){if(g=c.return,g===null)throw Error(r(341));g.lanes|=a,h=g.alternate,h!==null&&(h.lanes|=a),So(g,a,e),g=null}else g=c.child;if(g!==null)g.return=c;else for(g=c;g!==null;){if(g===e){g=null;break}if(c=g.sibling,c!==null){c.return=g.return,g=c;break}g=g.return}c=g}}function ds(e,t,a,i){e=null;for(var c=t,h=!1;c!==null;){if(!h){if((c.flags&524288)!==0)h=!0;else if((c.flags&262144)!==0)break}if(c.tag===10){var g=c.alternate;if(g===null)throw Error(r(387));if(g=g.memoizedProps,g!==null){var x=c.type;Bt(c.pendingProps.value,g.value)||(e!==null?e.push(x):e=[x])}}else if(c===je.current){if(g=c.alternate,g===null)throw Error(r(387));g.memoizedState.memoizedState!==c.memoizedState.memoizedState&&(e!==null?e.push(Bi):e=[Bi])}c=c.return}e!==null&&jo(t,e,a,i),t.flags|=262144}function Sr(e){for(e=e.firstContext;e!==null;){if(!Bt(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Tn(e){Cn=e,ka=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function bt(e){return ah(Cn,e)}function jr(e,t){return Cn===null&&Tn(e),ah(e,t)}function ah(e,t){var a=t._currentValue;if(t={context:t,memoizedValue:a,next:null},ka===null){if(e===null)throw Error(r(308));ka=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else ka=ka.next=t;return a}var gy=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(a,i){e.push(i)}};this.abort=function(){t.aborted=!0,e.forEach(function(a){return a()})}},py=l.unstable_scheduleCallback,yy=l.unstable_NormalPriority,st={$$typeof:q,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function ko(){return{controller:new gy,data:new Map,refCount:0}}function hi(e){e.refCount--,e.refCount===0&&py(yy,function(){e.controller.abort()})}var fi=null,No=0,hs=0,fs=null;function vy(e,t){if(fi===null){var a=fi=[];No=0,hs=Cc(),fs={status:"pending",value:void 0,then:function(i){a.push(i)}}}return No++,t.then(nh,nh),t}function nh(){if(--No===0&&fi!==null){fs!==null&&(fs.status="fulfilled");var e=fi;fi=null,hs=0,fs=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function by(e,t){var a=[],i={status:"pending",value:null,reason:null,then:function(c){a.push(c)}};return e.then(function(){i.status="fulfilled",i.value=t;for(var c=0;c<a.length;c++)(0,a[c])(t)},function(c){for(i.status="rejected",i.reason=c,c=0;c<a.length;c++)(0,a[c])(void 0)}),i}var sh=M.S;M.S=function(e,t){Gf=dt(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&vy(e,t),sh!==null&&sh(e,t)};var On=N(null);function Eo(){var e=On.current;return e!==null?e:Ve.pooledCache}function kr(e,t){t===null?Y(On,On.current):Y(On,t.pool)}function ih(){var e=Eo();return e===null?null:{parent:st._currentValue,pool:e}}var ms=Error(r(460)),Ao=Error(r(474)),Nr=Error(r(542)),Er={then:function(){}};function rh(e){return e=e.status,e==="fulfilled"||e==="rejected"}function lh(e,t,a){switch(a=e[a],a===void 0?e.push(t):a!==t&&(t.then(wa,wa),t=a),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,ch(e),e;default:if(typeof t.status=="string")t.then(wa,wa);else{if(e=Ve,e!==null&&100<e.shellSuspendCounter)throw Error(r(482));e=t,e.status="pending",e.then(function(i){if(t.status==="pending"){var c=t;c.status="fulfilled",c.value=i}},function(i){if(t.status==="pending"){var c=t;c.status="rejected",c.reason=i}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,ch(e),e}throw Rn=t,ms}}function Dn(e){try{var t=e._init;return t(e._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(Rn=a,ms):a}}var Rn=null;function oh(){if(Rn===null)throw Error(r(459));var e=Rn;return Rn=null,e}function ch(e){if(e===ms||e===Nr)throw Error(r(483))}var gs=null,mi=0;function Ar(e){var t=mi;return mi+=1,gs===null&&(gs=[]),lh(gs,e,t)}function gi(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function Cr(e,t){throw t.$$typeof===S?Error(r(525)):(e=Object.prototype.toString.call(t),Error(r(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function uh(e){function t(D,A){if(e){var U=D.deletions;U===null?(D.deletions=[A],D.flags|=16):U.push(A)}}function a(D,A){if(!e)return null;for(;A!==null;)t(D,A),A=A.sibling;return null}function i(D){for(var A=new Map;D!==null;)D.key!==null?A.set(D.key,D):A.set(D.index,D),D=D.sibling;return A}function c(D,A){return D=Sa(D,A),D.index=0,D.sibling=null,D}function h(D,A,U){return D.index=U,e?(U=D.alternate,U!==null?(U=U.index,U<A?(D.flags|=67108866,A):U):(D.flags|=67108866,A)):(D.flags|=1048576,A)}function g(D){return e&&D.alternate===null&&(D.flags|=67108866),D}function x(D,A,U,W){return A===null||A.tag!==6?(A=po(U,D.mode,W),A.return=D,A):(A=c(A,U),A.return=D,A)}function E(D,A,U,W){var ve=U.type;return ve===R?J(D,A,U.props.children,W,U.key):A!==null&&(A.elementType===ve||typeof ve=="object"&&ve!==null&&ve.$$typeof===F&&Dn(ve)===A.type)?(A=c(A,U.props),gi(A,U),A.return=D,A):(A=wr(U.type,U.key,U.props,null,D.mode,W),gi(A,U),A.return=D,A)}function L(D,A,U,W){return A===null||A.tag!==4||A.stateNode.containerInfo!==U.containerInfo||A.stateNode.implementation!==U.implementation?(A=yo(U,D.mode,W),A.return=D,A):(A=c(A,U.children||[]),A.return=D,A)}function J(D,A,U,W,ve){return A===null||A.tag!==7?(A=En(U,D.mode,W,ve),A.return=D,A):(A=c(A,U),A.return=D,A)}function ee(D,A,U){if(typeof A=="string"&&A!==""||typeof A=="number"||typeof A=="bigint")return A=po(""+A,D.mode,U),A.return=D,A;if(typeof A=="object"&&A!==null){switch(A.$$typeof){case j:return U=wr(A.type,A.key,A.props,null,D.mode,U),gi(U,A),U.return=D,U;case C:return A=yo(A,D.mode,U),A.return=D,A;case F:return A=Dn(A),ee(D,A,U)}if(I(A)||ne(A))return A=En(A,D.mode,U,null),A.return=D,A;if(typeof A.then=="function")return ee(D,Ar(A),U);if(A.$$typeof===q)return ee(D,jr(D,A),U);Cr(D,A)}return null}function H(D,A,U,W){var ve=A!==null?A.key:null;if(typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint")return ve!==null?null:x(D,A,""+U,W);if(typeof U=="object"&&U!==null){switch(U.$$typeof){case j:return U.key===ve?E(D,A,U,W):null;case C:return U.key===ve?L(D,A,U,W):null;case F:return U=Dn(U),H(D,A,U,W)}if(I(U)||ne(U))return ve!==null?null:J(D,A,U,W,null);if(typeof U.then=="function")return H(D,A,Ar(U),W);if(U.$$typeof===q)return H(D,A,jr(D,U),W);Cr(D,U)}return null}function V(D,A,U,W,ve){if(typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint")return D=D.get(U)||null,x(A,D,""+W,ve);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case j:return D=D.get(W.key===null?U:W.key)||null,E(A,D,W,ve);case C:return D=D.get(W.key===null?U:W.key)||null,L(A,D,W,ve);case F:return W=Dn(W),V(D,A,U,W,ve)}if(I(W)||ne(W))return D=D.get(U)||null,J(A,D,W,ve,null);if(typeof W.then=="function")return V(D,A,U,Ar(W),ve);if(W.$$typeof===q)return V(D,A,U,jr(A,W),ve);Cr(A,W)}return null}function fe(D,A,U,W){for(var ve=null,ze=null,ge=A,Ne=A=0,Oe=null;ge!==null&&Ne<U.length;Ne++){ge.index>Ne?(Oe=ge,ge=null):Oe=ge.sibling;var Me=H(D,ge,U[Ne],W);if(Me===null){ge===null&&(ge=Oe);break}e&&ge&&Me.alternate===null&&t(D,ge),A=h(Me,A,Ne),ze===null?ve=Me:ze.sibling=Me,ze=Me,ge=Oe}if(Ne===U.length)return a(D,ge),Re&&ja(D,Ne),ve;if(ge===null){for(;Ne<U.length;Ne++)ge=ee(D,U[Ne],W),ge!==null&&(A=h(ge,A,Ne),ze===null?ve=ge:ze.sibling=ge,ze=ge);return Re&&ja(D,Ne),ve}for(ge=i(ge);Ne<U.length;Ne++)Oe=V(ge,D,Ne,U[Ne],W),Oe!==null&&(e&&Oe.alternate!==null&&ge.delete(Oe.key===null?Ne:Oe.key),A=h(Oe,A,Ne),ze===null?ve=Oe:ze.sibling=Oe,ze=Oe);return e&&ge.forEach(function(hn){return t(D,hn)}),Re&&ja(D,Ne),ve}function we(D,A,U,W){if(U==null)throw Error(r(151));for(var ve=null,ze=null,ge=A,Ne=A=0,Oe=null,Me=U.next();ge!==null&&!Me.done;Ne++,Me=U.next()){ge.index>Ne?(Oe=ge,ge=null):Oe=ge.sibling;var hn=H(D,ge,Me.value,W);if(hn===null){ge===null&&(ge=Oe);break}e&&ge&&hn.alternate===null&&t(D,ge),A=h(hn,A,Ne),ze===null?ve=hn:ze.sibling=hn,ze=hn,ge=Oe}if(Me.done)return a(D,ge),Re&&ja(D,Ne),ve;if(ge===null){for(;!Me.done;Ne++,Me=U.next())Me=ee(D,Me.value,W),Me!==null&&(A=h(Me,A,Ne),ze===null?ve=Me:ze.sibling=Me,ze=Me);return Re&&ja(D,Ne),ve}for(ge=i(ge);!Me.done;Ne++,Me=U.next())Me=V(ge,D,Ne,Me.value,W),Me!==null&&(e&&Me.alternate!==null&&ge.delete(Me.key===null?Ne:Me.key),A=h(Me,A,Ne),ze===null?ve=Me:ze.sibling=Me,ze=Me);return e&&ge.forEach(function(Tv){return t(D,Tv)}),Re&&ja(D,Ne),ve}function Ye(D,A,U,W){if(typeof U=="object"&&U!==null&&U.type===R&&U.key===null&&(U=U.props.children),typeof U=="object"&&U!==null){switch(U.$$typeof){case j:e:{for(var ve=U.key;A!==null;){if(A.key===ve){if(ve=U.type,ve===R){if(A.tag===7){a(D,A.sibling),W=c(A,U.props.children),W.return=D,D=W;break e}}else if(A.elementType===ve||typeof ve=="object"&&ve!==null&&ve.$$typeof===F&&Dn(ve)===A.type){a(D,A.sibling),W=c(A,U.props),gi(W,U),W.return=D,D=W;break e}a(D,A);break}else t(D,A);A=A.sibling}U.type===R?(W=En(U.props.children,D.mode,W,U.key),W.return=D,D=W):(W=wr(U.type,U.key,U.props,null,D.mode,W),gi(W,U),W.return=D,D=W)}return g(D);case C:e:{for(ve=U.key;A!==null;){if(A.key===ve)if(A.tag===4&&A.stateNode.containerInfo===U.containerInfo&&A.stateNode.implementation===U.implementation){a(D,A.sibling),W=c(A,U.children||[]),W.return=D,D=W;break e}else{a(D,A);break}else t(D,A);A=A.sibling}W=yo(U,D.mode,W),W.return=D,D=W}return g(D);case F:return U=Dn(U),Ye(D,A,U,W)}if(I(U))return fe(D,A,U,W);if(ne(U)){if(ve=ne(U),typeof ve!="function")throw Error(r(150));return U=ve.call(U),we(D,A,U,W)}if(typeof U.then=="function")return Ye(D,A,Ar(U),W);if(U.$$typeof===q)return Ye(D,A,jr(D,U),W);Cr(D,U)}return typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint"?(U=""+U,A!==null&&A.tag===6?(a(D,A.sibling),W=c(A,U),W.return=D,D=W):(a(D,A),W=po(U,D.mode,W),W.return=D,D=W),g(D)):a(D,A)}return function(D,A,U,W){try{mi=0;var ve=Ye(D,A,U,W);return gs=null,ve}catch(ge){if(ge===ms||ge===Nr)throw ge;var ze=$t(29,ge,null,D.mode);return ze.lanes=W,ze.return=D,ze}finally{}}}var zn=uh(!0),dh=uh(!1),Qa=!1;function Co(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function To(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Ja(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Xa(e,t,a){var i=e.updateQueue;if(i===null)return null;if(i=i.shared,(Le&2)!==0){var c=i.pending;return c===null?t.next=t:(t.next=c.next,c.next=t),i.pending=t,t=xr(e),Qd(e,null,a),t}return br(e,i,t,a),xr(e)}function pi(e,t,a){if(t=t.updateQueue,t!==null&&(t=t.shared,(a&4194048)!==0)){var i=t.lanes;i&=e.pendingLanes,a|=i,t.lanes=a,ad(e,a)}}function Oo(e,t){var a=e.updateQueue,i=e.alternate;if(i!==null&&(i=i.updateQueue,a===i)){var c=null,h=null;if(a=a.firstBaseUpdate,a!==null){do{var g={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};h===null?c=h=g:h=h.next=g,a=a.next}while(a!==null);h===null?c=h=t:h=h.next=t}else c=h=t;a={baseState:i.baseState,firstBaseUpdate:c,lastBaseUpdate:h,shared:i.shared,callbacks:i.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=t:e.next=t,a.lastBaseUpdate=t}var Do=!1;function yi(){if(Do){var e=fs;if(e!==null)throw e}}function vi(e,t,a,i){Do=!1;var c=e.updateQueue;Qa=!1;var h=c.firstBaseUpdate,g=c.lastBaseUpdate,x=c.shared.pending;if(x!==null){c.shared.pending=null;var E=x,L=E.next;E.next=null,g===null?h=L:g.next=L,g=E;var J=e.alternate;J!==null&&(J=J.updateQueue,x=J.lastBaseUpdate,x!==g&&(x===null?J.firstBaseUpdate=L:x.next=L,J.lastBaseUpdate=E))}if(h!==null){var ee=c.baseState;g=0,J=L=E=null,x=h;do{var H=x.lane&-536870913,V=H!==x.lane;if(V?(Te&H)===H:(i&H)===H){H!==0&&H===hs&&(Do=!0),J!==null&&(J=J.next={lane:0,tag:x.tag,payload:x.payload,callback:null,next:null});e:{var fe=e,we=x;H=t;var Ye=a;switch(we.tag){case 1:if(fe=we.payload,typeof fe=="function"){ee=fe.call(Ye,ee,H);break e}ee=fe;break e;case 3:fe.flags=fe.flags&-65537|128;case 0:if(fe=we.payload,H=typeof fe=="function"?fe.call(Ye,ee,H):fe,H==null)break e;ee=w({},ee,H);break e;case 2:Qa=!0}}H=x.callback,H!==null&&(e.flags|=64,V&&(e.flags|=8192),V=c.callbacks,V===null?c.callbacks=[H]:V.push(H))}else V={lane:H,tag:x.tag,payload:x.payload,callback:x.callback,next:null},J===null?(L=J=V,E=ee):J=J.next=V,g|=H;if(x=x.next,x===null){if(x=c.shared.pending,x===null)break;V=x,x=V.next,V.next=null,c.lastBaseUpdate=V,c.shared.pending=null}}while(!0);J===null&&(E=ee),c.baseState=E,c.firstBaseUpdate=L,c.lastBaseUpdate=J,h===null&&(c.shared.lanes=0),tn|=g,e.lanes=g,e.memoizedState=ee}}function hh(e,t){if(typeof e!="function")throw Error(r(191,e));e.call(t)}function fh(e,t){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)hh(a[e],t)}var ps=N(null),Tr=N(0);function mh(e,t){e=Ma,Y(Tr,e),Y(ps,t),Ma=e|t.baseLanes}function Ro(){Y(Tr,Ma),Y(ps,ps.current)}function zo(){Ma=Tr.current,K(ps),K(Tr)}var qt=N(null),sa=null;function Za(e){var t=e.alternate;Y(at,at.current&1),Y(qt,e),sa===null&&(t===null||ps.current!==null||t.memoizedState!==null)&&(sa=e)}function Mo(e){Y(at,at.current),Y(qt,e),sa===null&&(sa=e)}function gh(e){e.tag===22?(Y(at,at.current),Y(qt,e),sa===null&&(sa=e)):Fa()}function Fa(){Y(at,at.current),Y(qt,qt.current)}function Ht(e){K(qt),sa===e&&(sa=null),K(at)}var at=N(0);function Or(e){for(var t=e;t!==null;){if(t.tag===13){var a=t.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||Hc(a)||Gc(a)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Ea=0,ke=null,He=null,it=null,Dr=!1,ys=!1,Mn=!1,Rr=0,bi=0,vs=null,xy=0;function et(){throw Error(r(321))}function Uo(e,t){if(t===null)return!1;for(var a=0;a<t.length&&a<e.length;a++)if(!Bt(e[a],t[a]))return!1;return!0}function Lo(e,t,a,i,c,h){return Ea=h,ke=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,M.H=e===null||e.memoizedState===null?Fh:Fo,Mn=!1,h=a(i,c),Mn=!1,ys&&(h=yh(t,a,i,c)),ph(e),h}function ph(e){M.H=_i;var t=He!==null&&He.next!==null;if(Ea=0,it=He=ke=null,Dr=!1,bi=0,vs=null,t)throw Error(r(300));e===null||rt||(e=e.dependencies,e!==null&&Sr(e)&&(rt=!0))}function yh(e,t,a,i){ke=e;var c=0;do{if(ys&&(vs=null),bi=0,ys=!1,25<=c)throw Error(r(301));if(c+=1,it=He=null,e.updateQueue!=null){var h=e.updateQueue;h.lastEffect=null,h.events=null,h.stores=null,h.memoCache!=null&&(h.memoCache.index=0)}M.H=Wh,h=t(a,i)}while(ys);return h}function wy(){var e=M.H,t=e.useState()[0];return t=typeof t.then=="function"?xi(t):t,e=e.useState()[0],(He!==null?He.memoizedState:null)!==e&&(ke.flags|=1024),t}function Bo(){var e=Rr!==0;return Rr=0,e}function $o(e,t,a){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a}function qo(e){if(Dr){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}Dr=!1}Ea=0,it=He=ke=null,ys=!1,bi=Rr=0,vs=null}function kt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return it===null?ke.memoizedState=it=e:it=it.next=e,it}function nt(){if(He===null){var e=ke.alternate;e=e!==null?e.memoizedState:null}else e=He.next;var t=it===null?ke.memoizedState:it.next;if(t!==null)it=t,He=e;else{if(e===null)throw ke.alternate===null?Error(r(467)):Error(r(310));He=e,e={memoizedState:He.memoizedState,baseState:He.baseState,baseQueue:He.baseQueue,queue:He.queue,next:null},it===null?ke.memoizedState=it=e:it=it.next=e}return it}function zr(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function xi(e){var t=bi;return bi+=1,vs===null&&(vs=[]),e=lh(vs,e,t),t=ke,(it===null?t.memoizedState:it.next)===null&&(t=t.alternate,M.H=t===null||t.memoizedState===null?Fh:Fo),e}function Mr(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return xi(e);if(e.$$typeof===q)return bt(e)}throw Error(r(438,String(e)))}function Ho(e){var t=null,a=ke.updateQueue;if(a!==null&&(t=a.memoCache),t==null){var i=ke.alternate;i!==null&&(i=i.updateQueue,i!==null&&(i=i.memoCache,i!=null&&(t={data:i.data.map(function(c){return c.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),a===null&&(a=zr(),ke.updateQueue=a),a.memoCache=t,a=t.data[t.index],a===void 0)for(a=t.data[t.index]=Array(e),i=0;i<e;i++)a[i]=G;return t.index++,a}function Aa(e,t){return typeof t=="function"?t(e):t}function Ur(e){var t=nt();return Go(t,He,e)}function Go(e,t,a){var i=e.queue;if(i===null)throw Error(r(311));i.lastRenderedReducer=a;var c=e.baseQueue,h=i.pending;if(h!==null){if(c!==null){var g=c.next;c.next=h.next,h.next=g}t.baseQueue=c=h,i.pending=null}if(h=e.baseState,c===null)e.memoizedState=h;else{t=c.next;var x=g=null,E=null,L=t,J=!1;do{var ee=L.lane&-536870913;if(ee!==L.lane?(Te&ee)===ee:(Ea&ee)===ee){var H=L.revertLane;if(H===0)E!==null&&(E=E.next={lane:0,revertLane:0,gesture:null,action:L.action,hasEagerState:L.hasEagerState,eagerState:L.eagerState,next:null}),ee===hs&&(J=!0);else if((Ea&H)===H){L=L.next,H===hs&&(J=!0);continue}else ee={lane:0,revertLane:L.revertLane,gesture:null,action:L.action,hasEagerState:L.hasEagerState,eagerState:L.eagerState,next:null},E===null?(x=E=ee,g=h):E=E.next=ee,ke.lanes|=H,tn|=H;ee=L.action,Mn&&a(h,ee),h=L.hasEagerState?L.eagerState:a(h,ee)}else H={lane:ee,revertLane:L.revertLane,gesture:L.gesture,action:L.action,hasEagerState:L.hasEagerState,eagerState:L.eagerState,next:null},E===null?(x=E=H,g=h):E=E.next=H,ke.lanes|=ee,tn|=ee;L=L.next}while(L!==null&&L!==t);if(E===null?g=h:E.next=x,!Bt(h,e.memoizedState)&&(rt=!0,J&&(a=fs,a!==null)))throw a;e.memoizedState=h,e.baseState=g,e.baseQueue=E,i.lastRenderedState=h}return c===null&&(i.lanes=0),[e.memoizedState,i.dispatch]}function Yo(e){var t=nt(),a=t.queue;if(a===null)throw Error(r(311));a.lastRenderedReducer=e;var i=a.dispatch,c=a.pending,h=t.memoizedState;if(c!==null){a.pending=null;var g=c=c.next;do h=e(h,g.action),g=g.next;while(g!==c);Bt(h,t.memoizedState)||(rt=!0),t.memoizedState=h,t.baseQueue===null&&(t.baseState=h),a.lastRenderedState=h}return[h,i]}function vh(e,t,a){var i=ke,c=nt(),h=Re;if(h){if(a===void 0)throw Error(r(407));a=a()}else a=t();var g=!Bt((He||c).memoizedState,a);if(g&&(c.memoizedState=a,rt=!0),c=c.queue,Io(wh.bind(null,i,c,e),[e]),c.getSnapshot!==t||g||it!==null&&it.memoizedState.tag&1){if(i.flags|=2048,bs(9,{destroy:void 0},xh.bind(null,i,c,a,t),null),Ve===null)throw Error(r(349));h||(Ea&127)!==0||bh(i,t,a)}return a}function bh(e,t,a){e.flags|=16384,e={getSnapshot:t,value:a},t=ke.updateQueue,t===null?(t=zr(),ke.updateQueue=t,t.stores=[e]):(a=t.stores,a===null?t.stores=[e]:a.push(e))}function xh(e,t,a,i){t.value=a,t.getSnapshot=i,_h(t)&&Sh(e)}function wh(e,t,a){return a(function(){_h(t)&&Sh(e)})}function _h(e){var t=e.getSnapshot;e=e.value;try{var a=t();return!Bt(e,a)}catch{return!0}}function Sh(e){var t=Nn(e,2);t!==null&&zt(t,e,2)}function Vo(e){var t=kt();if(typeof e=="function"){var a=e;if(e=a(),Mn){Ha(!0);try{a()}finally{Ha(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Aa,lastRenderedState:e},t}function jh(e,t,a,i){return e.baseState=a,Go(e,He,typeof i=="function"?i:Aa)}function _y(e,t,a,i,c){if($r(e))throw Error(r(485));if(e=t.action,e!==null){var h={payload:c,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(g){h.listeners.push(g)}};M.T!==null?a(!0):h.isTransition=!1,i(h),a=t.pending,a===null?(h.next=t.pending=h,kh(t,h)):(h.next=a.next,t.pending=a.next=h)}}function kh(e,t){var a=t.action,i=t.payload,c=e.state;if(t.isTransition){var h=M.T,g={};M.T=g;try{var x=a(c,i),E=M.S;E!==null&&E(g,x),Nh(e,t,x)}catch(L){Po(e,t,L)}finally{h!==null&&g.types!==null&&(h.types=g.types),M.T=h}}else try{h=a(c,i),Nh(e,t,h)}catch(L){Po(e,t,L)}}function Nh(e,t,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(i){Eh(e,t,i)},function(i){return Po(e,t,i)}):Eh(e,t,a)}function Eh(e,t,a){t.status="fulfilled",t.value=a,Ah(t),e.state=a,t=e.pending,t!==null&&(a=t.next,a===t?e.pending=null:(a=a.next,t.next=a,kh(e,a)))}function Po(e,t,a){var i=e.pending;if(e.pending=null,i!==null){i=i.next;do t.status="rejected",t.reason=a,Ah(t),t=t.next;while(t!==i)}e.action=null}function Ah(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Ch(e,t){return t}function Th(e,t){if(Re){var a=Ve.formState;if(a!==null){e:{var i=ke;if(Re){if(Qe){t:{for(var c=Qe,h=na;c.nodeType!==8;){if(!h){c=null;break t}if(c=ia(c.nextSibling),c===null){c=null;break t}}h=c.data,c=h==="F!"||h==="F"?c:null}if(c){Qe=ia(c.nextSibling),i=c.data==="F!";break e}}Ia(i)}i=!1}i&&(t=a[0])}}return a=kt(),a.memoizedState=a.baseState=t,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ch,lastRenderedState:t},a.queue=i,a=Jh.bind(null,ke,i),i.dispatch=a,i=Vo(!1),h=Zo.bind(null,ke,!1,i.queue),i=kt(),c={state:t,dispatch:null,action:e,pending:null},i.queue=c,a=_y.bind(null,ke,c,h,a),c.dispatch=a,i.memoizedState=e,[t,a,!1]}function Oh(e){var t=nt();return Dh(t,He,e)}function Dh(e,t,a){if(t=Go(e,t,Ch)[0],e=Ur(Aa)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var i=xi(t)}catch(g){throw g===ms?Nr:g}else i=t;t=nt();var c=t.queue,h=c.dispatch;return a!==t.memoizedState&&(ke.flags|=2048,bs(9,{destroy:void 0},Sy.bind(null,c,a),null)),[i,h,e]}function Sy(e,t){e.action=t}function Rh(e){var t=nt(),a=He;if(a!==null)return Dh(t,a,e);nt(),t=t.memoizedState,a=nt();var i=a.queue.dispatch;return a.memoizedState=e,[t,i,!1]}function bs(e,t,a,i){return e={tag:e,create:a,deps:i,inst:t,next:null},t=ke.updateQueue,t===null&&(t=zr(),ke.updateQueue=t),a=t.lastEffect,a===null?t.lastEffect=e.next=e:(i=a.next,a.next=e,e.next=i,t.lastEffect=e),e}function zh(){return nt().memoizedState}function Lr(e,t,a,i){var c=kt();ke.flags|=e,c.memoizedState=bs(1|t,{destroy:void 0},a,i===void 0?null:i)}function Br(e,t,a,i){var c=nt();i=i===void 0?null:i;var h=c.memoizedState.inst;He!==null&&i!==null&&Uo(i,He.memoizedState.deps)?c.memoizedState=bs(t,h,a,i):(ke.flags|=e,c.memoizedState=bs(1|t,h,a,i))}function Mh(e,t){Lr(8390656,8,e,t)}function Io(e,t){Br(2048,8,e,t)}function jy(e){ke.flags|=4;var t=ke.updateQueue;if(t===null)t=zr(),ke.updateQueue=t,t.events=[e];else{var a=t.events;a===null?t.events=[e]:a.push(e)}}function Uh(e){var t=nt().memoizedState;return jy({ref:t,nextImpl:e}),function(){if((Le&2)!==0)throw Error(r(440));return t.impl.apply(void 0,arguments)}}function Lh(e,t){return Br(4,2,e,t)}function Bh(e,t){return Br(4,4,e,t)}function $h(e,t){if(typeof t=="function"){e=e();var a=t(e);return function(){typeof a=="function"?a():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function qh(e,t,a){a=a!=null?a.concat([e]):null,Br(4,4,$h.bind(null,t,e),a)}function Ko(){}function Hh(e,t){var a=nt();t=t===void 0?null:t;var i=a.memoizedState;return t!==null&&Uo(t,i[1])?i[0]:(a.memoizedState=[e,t],e)}function Gh(e,t){var a=nt();t=t===void 0?null:t;var i=a.memoizedState;if(t!==null&&Uo(t,i[1]))return i[0];if(i=e(),Mn){Ha(!0);try{e()}finally{Ha(!1)}}return a.memoizedState=[i,t],i}function Qo(e,t,a){return a===void 0||(Ea&1073741824)!==0&&(Te&261930)===0?e.memoizedState=t:(e.memoizedState=a,e=Vf(),ke.lanes|=e,tn|=e,a)}function Yh(e,t,a,i){return Bt(a,t)?a:ps.current!==null?(e=Qo(e,a,i),Bt(e,t)||(rt=!0),e):(Ea&42)===0||(Ea&1073741824)!==0&&(Te&261930)===0?(rt=!0,e.memoizedState=a):(e=Vf(),ke.lanes|=e,tn|=e,t)}function Vh(e,t,a,i,c){var h=z.p;z.p=h!==0&&8>h?h:8;var g=M.T,x={};M.T=x,Zo(e,!1,t,a);try{var E=c(),L=M.S;if(L!==null&&L(x,E),E!==null&&typeof E=="object"&&typeof E.then=="function"){var J=by(E,i);wi(e,t,J,Vt(e))}else wi(e,t,i,Vt(e))}catch(ee){wi(e,t,{then:function(){},status:"rejected",reason:ee},Vt())}finally{z.p=h,g!==null&&x.types!==null&&(g.types=x.types),M.T=g}}function ky(){}function Jo(e,t,a,i){if(e.tag!==5)throw Error(r(476));var c=Ph(e).queue;Vh(e,c,t,re,a===null?ky:function(){return Ih(e),a(i)})}function Ph(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:re,baseState:re,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Aa,lastRenderedState:re},next:null};var a={};return t.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Aa,lastRenderedState:a},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function Ih(e){var t=Ph(e);t.next===null&&(t=e.alternate.memoizedState),wi(e,t.next.queue,{},Vt())}function Xo(){return bt(Bi)}function Kh(){return nt().memoizedState}function Qh(){return nt().memoizedState}function Ny(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var a=Vt();e=Ja(a);var i=Xa(t,e,a);i!==null&&(zt(i,t,a),pi(i,t,a)),t={cache:ko()},e.payload=t;return}t=t.return}}function Ey(e,t,a){var i=Vt();a={lane:i,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},$r(e)?Xh(t,a):(a=mo(e,t,a,i),a!==null&&(zt(a,e,i),Zh(a,t,i)))}function Jh(e,t,a){var i=Vt();wi(e,t,a,i)}function wi(e,t,a,i){var c={lane:i,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if($r(e))Xh(t,c);else{var h=e.alternate;if(e.lanes===0&&(h===null||h.lanes===0)&&(h=t.lastRenderedReducer,h!==null))try{var g=t.lastRenderedState,x=h(g,a);if(c.hasEagerState=!0,c.eagerState=x,Bt(x,g))return br(e,t,c,0),Ve===null&&vr(),!1}catch{}finally{}if(a=mo(e,t,c,i),a!==null)return zt(a,e,i),Zh(a,t,i),!0}return!1}function Zo(e,t,a,i){if(i={lane:2,revertLane:Cc(),gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null},$r(e)){if(t)throw Error(r(479))}else t=mo(e,a,i,2),t!==null&&zt(t,e,2)}function $r(e){var t=e.alternate;return e===ke||t!==null&&t===ke}function Xh(e,t){ys=Dr=!0;var a=e.pending;a===null?t.next=t:(t.next=a.next,a.next=t),e.pending=t}function Zh(e,t,a){if((a&4194048)!==0){var i=t.lanes;i&=e.pendingLanes,a|=i,t.lanes=a,ad(e,a)}}var _i={readContext:bt,use:Mr,useCallback:et,useContext:et,useEffect:et,useImperativeHandle:et,useLayoutEffect:et,useInsertionEffect:et,useMemo:et,useReducer:et,useRef:et,useState:et,useDebugValue:et,useDeferredValue:et,useTransition:et,useSyncExternalStore:et,useId:et,useHostTransitionStatus:et,useFormState:et,useActionState:et,useOptimistic:et,useMemoCache:et,useCacheRefresh:et};_i.useEffectEvent=et;var Fh={readContext:bt,use:Mr,useCallback:function(e,t){return kt().memoizedState=[e,t===void 0?null:t],e},useContext:bt,useEffect:Mh,useImperativeHandle:function(e,t,a){a=a!=null?a.concat([e]):null,Lr(4194308,4,$h.bind(null,t,e),a)},useLayoutEffect:function(e,t){return Lr(4194308,4,e,t)},useInsertionEffect:function(e,t){Lr(4,2,e,t)},useMemo:function(e,t){var a=kt();t=t===void 0?null:t;var i=e();if(Mn){Ha(!0);try{e()}finally{Ha(!1)}}return a.memoizedState=[i,t],i},useReducer:function(e,t,a){var i=kt();if(a!==void 0){var c=a(t);if(Mn){Ha(!0);try{a(t)}finally{Ha(!1)}}}else c=t;return i.memoizedState=i.baseState=c,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:c},i.queue=e,e=e.dispatch=Ey.bind(null,ke,e),[i.memoizedState,e]},useRef:function(e){var t=kt();return e={current:e},t.memoizedState=e},useState:function(e){e=Vo(e);var t=e.queue,a=Jh.bind(null,ke,t);return t.dispatch=a,[e.memoizedState,a]},useDebugValue:Ko,useDeferredValue:function(e,t){var a=kt();return Qo(a,e,t)},useTransition:function(){var e=Vo(!1);return e=Vh.bind(null,ke,e.queue,!0,!1),kt().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,a){var i=ke,c=kt();if(Re){if(a===void 0)throw Error(r(407));a=a()}else{if(a=t(),Ve===null)throw Error(r(349));(Te&127)!==0||bh(i,t,a)}c.memoizedState=a;var h={value:a,getSnapshot:t};return c.queue=h,Mh(wh.bind(null,i,h,e),[e]),i.flags|=2048,bs(9,{destroy:void 0},xh.bind(null,i,h,a,t),null),a},useId:function(){var e=kt(),t=Ve.identifierPrefix;if(Re){var a=ya,i=pa;a=(i&~(1<<32-Lt(i)-1)).toString(32)+a,t="_"+t+"R_"+a,a=Rr++,0<a&&(t+="H"+a.toString(32)),t+="_"}else a=xy++,t="_"+t+"r_"+a.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:Xo,useFormState:Th,useActionState:Th,useOptimistic:function(e){var t=kt();t.memoizedState=t.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=a,t=Zo.bind(null,ke,!0,a),a.dispatch=t,[e,t]},useMemoCache:Ho,useCacheRefresh:function(){return kt().memoizedState=Ny.bind(null,ke)},useEffectEvent:function(e){var t=kt(),a={impl:e};return t.memoizedState=a,function(){if((Le&2)!==0)throw Error(r(440));return a.impl.apply(void 0,arguments)}}},Fo={readContext:bt,use:Mr,useCallback:Hh,useContext:bt,useEffect:Io,useImperativeHandle:qh,useInsertionEffect:Lh,useLayoutEffect:Bh,useMemo:Gh,useReducer:Ur,useRef:zh,useState:function(){return Ur(Aa)},useDebugValue:Ko,useDeferredValue:function(e,t){var a=nt();return Yh(a,He.memoizedState,e,t)},useTransition:function(){var e=Ur(Aa)[0],t=nt().memoizedState;return[typeof e=="boolean"?e:xi(e),t]},useSyncExternalStore:vh,useId:Kh,useHostTransitionStatus:Xo,useFormState:Oh,useActionState:Oh,useOptimistic:function(e,t){var a=nt();return jh(a,He,e,t)},useMemoCache:Ho,useCacheRefresh:Qh};Fo.useEffectEvent=Uh;var Wh={readContext:bt,use:Mr,useCallback:Hh,useContext:bt,useEffect:Io,useImperativeHandle:qh,useInsertionEffect:Lh,useLayoutEffect:Bh,useMemo:Gh,useReducer:Yo,useRef:zh,useState:function(){return Yo(Aa)},useDebugValue:Ko,useDeferredValue:function(e,t){var a=nt();return He===null?Qo(a,e,t):Yh(a,He.memoizedState,e,t)},useTransition:function(){var e=Yo(Aa)[0],t=nt().memoizedState;return[typeof e=="boolean"?e:xi(e),t]},useSyncExternalStore:vh,useId:Kh,useHostTransitionStatus:Xo,useFormState:Rh,useActionState:Rh,useOptimistic:function(e,t){var a=nt();return He!==null?jh(a,He,e,t):(a.baseState=e,[e,a.queue.dispatch])},useMemoCache:Ho,useCacheRefresh:Qh};Wh.useEffectEvent=Uh;function Wo(e,t,a,i){t=e.memoizedState,a=a(i,t),a=a==null?t:w({},t,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var ec={enqueueSetState:function(e,t,a){e=e._reactInternals;var i=Vt(),c=Ja(i);c.payload=t,a!=null&&(c.callback=a),t=Xa(e,c,i),t!==null&&(zt(t,e,i),pi(t,e,i))},enqueueReplaceState:function(e,t,a){e=e._reactInternals;var i=Vt(),c=Ja(i);c.tag=1,c.payload=t,a!=null&&(c.callback=a),t=Xa(e,c,i),t!==null&&(zt(t,e,i),pi(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var a=Vt(),i=Ja(a);i.tag=2,t!=null&&(i.callback=t),t=Xa(e,i,a),t!==null&&(zt(t,e,a),pi(t,e,a))}};function ef(e,t,a,i,c,h,g){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(i,h,g):t.prototype&&t.prototype.isPureReactComponent?!oi(a,i)||!oi(c,h):!0}function tf(e,t,a,i){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(a,i),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(a,i),t.state!==e&&ec.enqueueReplaceState(t,t.state,null)}function Un(e,t){var a=t;if("ref"in t){a={};for(var i in t)i!=="ref"&&(a[i]=t[i])}if(e=e.defaultProps){a===t&&(a=w({},a));for(var c in e)a[c]===void 0&&(a[c]=e[c])}return a}function af(e){yr(e)}function nf(e){console.error(e)}function sf(e){yr(e)}function qr(e,t){try{var a=e.onUncaughtError;a(t.value,{componentStack:t.stack})}catch(i){setTimeout(function(){throw i})}}function rf(e,t,a){try{var i=e.onCaughtError;i(a.value,{componentStack:a.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(c){setTimeout(function(){throw c})}}function tc(e,t,a){return a=Ja(a),a.tag=3,a.payload={element:null},a.callback=function(){qr(e,t)},a}function lf(e){return e=Ja(e),e.tag=3,e}function of(e,t,a,i){var c=a.type.getDerivedStateFromError;if(typeof c=="function"){var h=i.value;e.payload=function(){return c(h)},e.callback=function(){rf(t,a,i)}}var g=a.stateNode;g!==null&&typeof g.componentDidCatch=="function"&&(e.callback=function(){rf(t,a,i),typeof c!="function"&&(an===null?an=new Set([this]):an.add(this));var x=i.stack;this.componentDidCatch(i.value,{componentStack:x!==null?x:""})})}function Ay(e,t,a,i,c){if(a.flags|=32768,i!==null&&typeof i=="object"&&typeof i.then=="function"){if(t=a.alternate,t!==null&&ds(t,a,c,!0),a=qt.current,a!==null){switch(a.tag){case 31:case 13:return sa===null?Fr():a.alternate===null&&tt===0&&(tt=3),a.flags&=-257,a.flags|=65536,a.lanes=c,i===Er?a.flags|=16384:(t=a.updateQueue,t===null?a.updateQueue=new Set([i]):t.add(i),Nc(e,i,c)),!1;case 22:return a.flags|=65536,i===Er?a.flags|=16384:(t=a.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([i])},a.updateQueue=t):(a=t.retryQueue,a===null?t.retryQueue=new Set([i]):a.add(i)),Nc(e,i,c)),!1}throw Error(r(435,a.tag))}return Nc(e,i,c),Fr(),!1}if(Re)return t=qt.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=c,i!==xo&&(e=Error(r(422),{cause:i}),di(ea(e,a)))):(i!==xo&&(t=Error(r(423),{cause:i}),di(ea(t,a))),e=e.current.alternate,e.flags|=65536,c&=-c,e.lanes|=c,i=ea(i,a),c=tc(e.stateNode,i,c),Oo(e,c),tt!==4&&(tt=2)),!1;var h=Error(r(520),{cause:i});if(h=ea(h,a),Ti===null?Ti=[h]:Ti.push(h),tt!==4&&(tt=2),t===null)return!0;i=ea(i,a),a=t;do{switch(a.tag){case 3:return a.flags|=65536,e=c&-c,a.lanes|=e,e=tc(a.stateNode,i,e),Oo(a,e),!1;case 1:if(t=a.type,h=a.stateNode,(a.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||h!==null&&typeof h.componentDidCatch=="function"&&(an===null||!an.has(h))))return a.flags|=65536,c&=-c,a.lanes|=c,c=lf(c),of(c,e,a,i),Oo(a,c),!1}a=a.return}while(a!==null);return!1}var ac=Error(r(461)),rt=!1;function xt(e,t,a,i){t.child=e===null?dh(t,null,a,i):zn(t,e.child,a,i)}function cf(e,t,a,i,c){a=a.render;var h=t.ref;if("ref"in i){var g={};for(var x in i)x!=="ref"&&(g[x]=i[x])}else g=i;return Tn(t),i=Lo(e,t,a,g,h,c),x=Bo(),e!==null&&!rt?($o(e,t,c),Ca(e,t,c)):(Re&&x&&vo(t),t.flags|=1,xt(e,t,i,c),t.child)}function uf(e,t,a,i,c){if(e===null){var h=a.type;return typeof h=="function"&&!go(h)&&h.defaultProps===void 0&&a.compare===null?(t.tag=15,t.type=h,df(e,t,h,i,c)):(e=wr(a.type,null,i,t,t.mode,c),e.ref=t.ref,e.return=t,t.child=e)}if(h=e.child,!uc(e,c)){var g=h.memoizedProps;if(a=a.compare,a=a!==null?a:oi,a(g,i)&&e.ref===t.ref)return Ca(e,t,c)}return t.flags|=1,e=Sa(h,i),e.ref=t.ref,e.return=t,t.child=e}function df(e,t,a,i,c){if(e!==null){var h=e.memoizedProps;if(oi(h,i)&&e.ref===t.ref)if(rt=!1,t.pendingProps=i=h,uc(e,c))(e.flags&131072)!==0&&(rt=!0);else return t.lanes=e.lanes,Ca(e,t,c)}return nc(e,t,a,i,c)}function hf(e,t,a,i){var c=i.children,h=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.mode==="hidden"){if((t.flags&128)!==0){if(h=h!==null?h.baseLanes|a:a,e!==null){for(i=t.child=e.child,c=0;i!==null;)c=c|i.lanes|i.childLanes,i=i.sibling;i=c&~h}else i=0,t.child=null;return ff(e,t,h,a,i)}if((a&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&kr(t,h!==null?h.cachePool:null),h!==null?mh(t,h):Ro(),gh(t);else return i=t.lanes=536870912,ff(e,t,h!==null?h.baseLanes|a:a,a,i)}else h!==null?(kr(t,h.cachePool),mh(t,h),Fa(),t.memoizedState=null):(e!==null&&kr(t,null),Ro(),Fa());return xt(e,t,c,a),t.child}function Si(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function ff(e,t,a,i,c){var h=Eo();return h=h===null?null:{parent:st._currentValue,pool:h},t.memoizedState={baseLanes:a,cachePool:h},e!==null&&kr(t,null),Ro(),gh(t),e!==null&&ds(e,t,i,!0),t.childLanes=c,null}function Hr(e,t){return t=Yr({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function mf(e,t,a){return zn(t,e.child,null,a),e=Hr(t,t.pendingProps),e.flags|=2,Ht(t),t.memoizedState=null,e}function Cy(e,t,a){var i=t.pendingProps,c=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(Re){if(i.mode==="hidden")return e=Hr(t,i),t.lanes=536870912,Si(null,e);if(Mo(t),(e=Qe)?(e=Nm(e,na),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Va!==null?{id:pa,overflow:ya}:null,retryLane:536870912,hydrationErrors:null},a=Xd(e),a.return=t,t.child=a,vt=t,Qe=null)):e=null,e===null)throw Ia(t);return t.lanes=536870912,null}return Hr(t,i)}var h=e.memoizedState;if(h!==null){var g=h.dehydrated;if(Mo(t),c)if(t.flags&256)t.flags&=-257,t=mf(e,t,a);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(r(558));else if(rt||ds(e,t,a,!1),c=(a&e.childLanes)!==0,rt||c){if(i=Ve,i!==null&&(g=nd(i,a),g!==0&&g!==h.retryLane))throw h.retryLane=g,Nn(e,g),zt(i,e,g),ac;Fr(),t=mf(e,t,a)}else e=h.treeContext,Qe=ia(g.nextSibling),vt=t,Re=!0,Pa=null,na=!1,e!==null&&Wd(t,e),t=Hr(t,i),t.flags|=4096;return t}return e=Sa(e.child,{mode:i.mode,children:i.children}),e.ref=t.ref,t.child=e,e.return=t,e}function Gr(e,t){var a=t.ref;if(a===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(r(284));(e===null||e.ref!==a)&&(t.flags|=4194816)}}function nc(e,t,a,i,c){return Tn(t),a=Lo(e,t,a,i,void 0,c),i=Bo(),e!==null&&!rt?($o(e,t,c),Ca(e,t,c)):(Re&&i&&vo(t),t.flags|=1,xt(e,t,a,c),t.child)}function gf(e,t,a,i,c,h){return Tn(t),t.updateQueue=null,a=yh(t,i,a,c),ph(e),i=Bo(),e!==null&&!rt?($o(e,t,h),Ca(e,t,h)):(Re&&i&&vo(t),t.flags|=1,xt(e,t,a,h),t.child)}function pf(e,t,a,i,c){if(Tn(t),t.stateNode===null){var h=ls,g=a.contextType;typeof g=="object"&&g!==null&&(h=bt(g)),h=new a(i,h),t.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,h.updater=ec,t.stateNode=h,h._reactInternals=t,h=t.stateNode,h.props=i,h.state=t.memoizedState,h.refs={},Co(t),g=a.contextType,h.context=typeof g=="object"&&g!==null?bt(g):ls,h.state=t.memoizedState,g=a.getDerivedStateFromProps,typeof g=="function"&&(Wo(t,a,g,i),h.state=t.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof h.getSnapshotBeforeUpdate=="function"||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(g=h.state,typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount(),g!==h.state&&ec.enqueueReplaceState(h,h.state,null),vi(t,i,h,c),yi(),h.state=t.memoizedState),typeof h.componentDidMount=="function"&&(t.flags|=4194308),i=!0}else if(e===null){h=t.stateNode;var x=t.memoizedProps,E=Un(a,x);h.props=E;var L=h.context,J=a.contextType;g=ls,typeof J=="object"&&J!==null&&(g=bt(J));var ee=a.getDerivedStateFromProps;J=typeof ee=="function"||typeof h.getSnapshotBeforeUpdate=="function",x=t.pendingProps!==x,J||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(x||L!==g)&&tf(t,h,i,g),Qa=!1;var H=t.memoizedState;h.state=H,vi(t,i,h,c),yi(),L=t.memoizedState,x||H!==L||Qa?(typeof ee=="function"&&(Wo(t,a,ee,i),L=t.memoizedState),(E=Qa||ef(t,a,E,i,H,L,g))?(J||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount()),typeof h.componentDidMount=="function"&&(t.flags|=4194308)):(typeof h.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=L),h.props=i,h.state=L,h.context=g,i=E):(typeof h.componentDidMount=="function"&&(t.flags|=4194308),i=!1)}else{h=t.stateNode,To(e,t),g=t.memoizedProps,J=Un(a,g),h.props=J,ee=t.pendingProps,H=h.context,L=a.contextType,E=ls,typeof L=="object"&&L!==null&&(E=bt(L)),x=a.getDerivedStateFromProps,(L=typeof x=="function"||typeof h.getSnapshotBeforeUpdate=="function")||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(g!==ee||H!==E)&&tf(t,h,i,E),Qa=!1,H=t.memoizedState,h.state=H,vi(t,i,h,c),yi();var V=t.memoizedState;g!==ee||H!==V||Qa||e!==null&&e.dependencies!==null&&Sr(e.dependencies)?(typeof x=="function"&&(Wo(t,a,x,i),V=t.memoizedState),(J=Qa||ef(t,a,J,i,H,V,E)||e!==null&&e.dependencies!==null&&Sr(e.dependencies))?(L||typeof h.UNSAFE_componentWillUpdate!="function"&&typeof h.componentWillUpdate!="function"||(typeof h.componentWillUpdate=="function"&&h.componentWillUpdate(i,V,E),typeof h.UNSAFE_componentWillUpdate=="function"&&h.UNSAFE_componentWillUpdate(i,V,E)),typeof h.componentDidUpdate=="function"&&(t.flags|=4),typeof h.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof h.componentDidUpdate!="function"||g===e.memoizedProps&&H===e.memoizedState||(t.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||g===e.memoizedProps&&H===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=V),h.props=i,h.state=V,h.context=E,i=J):(typeof h.componentDidUpdate!="function"||g===e.memoizedProps&&H===e.memoizedState||(t.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||g===e.memoizedProps&&H===e.memoizedState||(t.flags|=1024),i=!1)}return h=i,Gr(e,t),i=(t.flags&128)!==0,h||i?(h=t.stateNode,a=i&&typeof a.getDerivedStateFromError!="function"?null:h.render(),t.flags|=1,e!==null&&i?(t.child=zn(t,e.child,null,c),t.child=zn(t,null,a,c)):xt(e,t,a,c),t.memoizedState=h.state,e=t.child):e=Ca(e,t,c),e}function yf(e,t,a,i){return An(),t.flags|=256,xt(e,t,a,i),t.child}var sc={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function ic(e){return{baseLanes:e,cachePool:ih()}}function rc(e,t,a){return e=e!==null?e.childLanes&~a:0,t&&(e|=Yt),e}function vf(e,t,a){var i=t.pendingProps,c=!1,h=(t.flags&128)!==0,g;if((g=h)||(g=e!==null&&e.memoizedState===null?!1:(at.current&2)!==0),g&&(c=!0,t.flags&=-129),g=(t.flags&32)!==0,t.flags&=-33,e===null){if(Re){if(c?Za(t):Fa(),(e=Qe)?(e=Nm(e,na),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Va!==null?{id:pa,overflow:ya}:null,retryLane:536870912,hydrationErrors:null},a=Xd(e),a.return=t,t.child=a,vt=t,Qe=null)):e=null,e===null)throw Ia(t);return Gc(e)?t.lanes=32:t.lanes=536870912,null}var x=i.children;return i=i.fallback,c?(Fa(),c=t.mode,x=Yr({mode:"hidden",children:x},c),i=En(i,c,a,null),x.return=t,i.return=t,x.sibling=i,t.child=x,i=t.child,i.memoizedState=ic(a),i.childLanes=rc(e,g,a),t.memoizedState=sc,Si(null,i)):(Za(t),lc(t,x))}var E=e.memoizedState;if(E!==null&&(x=E.dehydrated,x!==null)){if(h)t.flags&256?(Za(t),t.flags&=-257,t=oc(e,t,a)):t.memoizedState!==null?(Fa(),t.child=e.child,t.flags|=128,t=null):(Fa(),x=i.fallback,c=t.mode,i=Yr({mode:"visible",children:i.children},c),x=En(x,c,a,null),x.flags|=2,i.return=t,x.return=t,i.sibling=x,t.child=i,zn(t,e.child,null,a),i=t.child,i.memoizedState=ic(a),i.childLanes=rc(e,g,a),t.memoizedState=sc,t=Si(null,i));else if(Za(t),Gc(x)){if(g=x.nextSibling&&x.nextSibling.dataset,g)var L=g.dgst;g=L,i=Error(r(419)),i.stack="",i.digest=g,di({value:i,source:null,stack:null}),t=oc(e,t,a)}else if(rt||ds(e,t,a,!1),g=(a&e.childLanes)!==0,rt||g){if(g=Ve,g!==null&&(i=nd(g,a),i!==0&&i!==E.retryLane))throw E.retryLane=i,Nn(e,i),zt(g,e,i),ac;Hc(x)||Fr(),t=oc(e,t,a)}else Hc(x)?(t.flags|=192,t.child=e.child,t=null):(e=E.treeContext,Qe=ia(x.nextSibling),vt=t,Re=!0,Pa=null,na=!1,e!==null&&Wd(t,e),t=lc(t,i.children),t.flags|=4096);return t}return c?(Fa(),x=i.fallback,c=t.mode,E=e.child,L=E.sibling,i=Sa(E,{mode:"hidden",children:i.children}),i.subtreeFlags=E.subtreeFlags&65011712,L!==null?x=Sa(L,x):(x=En(x,c,a,null),x.flags|=2),x.return=t,i.return=t,i.sibling=x,t.child=i,Si(null,i),i=t.child,x=e.child.memoizedState,x===null?x=ic(a):(c=x.cachePool,c!==null?(E=st._currentValue,c=c.parent!==E?{parent:E,pool:E}:c):c=ih(),x={baseLanes:x.baseLanes|a,cachePool:c}),i.memoizedState=x,i.childLanes=rc(e,g,a),t.memoizedState=sc,Si(e.child,i)):(Za(t),a=e.child,e=a.sibling,a=Sa(a,{mode:"visible",children:i.children}),a.return=t,a.sibling=null,e!==null&&(g=t.deletions,g===null?(t.deletions=[e],t.flags|=16):g.push(e)),t.child=a,t.memoizedState=null,a)}function lc(e,t){return t=Yr({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function Yr(e,t){return e=$t(22,e,null,t),e.lanes=0,e}function oc(e,t,a){return zn(t,e.child,null,a),e=lc(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function bf(e,t,a){e.lanes|=t;var i=e.alternate;i!==null&&(i.lanes|=t),So(e.return,t,a)}function cc(e,t,a,i,c,h){var g=e.memoizedState;g===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:a,tailMode:c,treeForkCount:h}:(g.isBackwards=t,g.rendering=null,g.renderingStartTime=0,g.last=i,g.tail=a,g.tailMode=c,g.treeForkCount=h)}function xf(e,t,a){var i=t.pendingProps,c=i.revealOrder,h=i.tail;i=i.children;var g=at.current,x=(g&2)!==0;if(x?(g=g&1|2,t.flags|=128):g&=1,Y(at,g),xt(e,t,i,a),i=Re?ui:0,!x&&e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&bf(e,a,t);else if(e.tag===19)bf(e,a,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(c){case"forwards":for(a=t.child,c=null;a!==null;)e=a.alternate,e!==null&&Or(e)===null&&(c=a),a=a.sibling;a=c,a===null?(c=t.child,t.child=null):(c=a.sibling,a.sibling=null),cc(t,!1,c,a,h,i);break;case"backwards":case"unstable_legacy-backwards":for(a=null,c=t.child,t.child=null;c!==null;){if(e=c.alternate,e!==null&&Or(e)===null){t.child=c;break}e=c.sibling,c.sibling=a,a=c,c=e}cc(t,!0,a,null,h,i);break;case"together":cc(t,!1,null,null,void 0,i);break;default:t.memoizedState=null}return t.child}function Ca(e,t,a){if(e!==null&&(t.dependencies=e.dependencies),tn|=t.lanes,(a&t.childLanes)===0)if(e!==null){if(ds(e,t,a,!1),(a&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(r(153));if(t.child!==null){for(e=t.child,a=Sa(e,e.pendingProps),t.child=a,a.return=t;e.sibling!==null;)e=e.sibling,a=a.sibling=Sa(e,e.pendingProps),a.return=t;a.sibling=null}return t.child}function uc(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&Sr(e)))}function Ty(e,t,a){switch(t.tag){case 3:ue(t,t.stateNode.containerInfo),Ka(t,st,e.memoizedState.cache),An();break;case 27:case 5:de(t);break;case 4:ue(t,t.stateNode.containerInfo);break;case 10:Ka(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,Mo(t),null;break;case 13:var i=t.memoizedState;if(i!==null)return i.dehydrated!==null?(Za(t),t.flags|=128,null):(a&t.child.childLanes)!==0?vf(e,t,a):(Za(t),e=Ca(e,t,a),e!==null?e.sibling:null);Za(t);break;case 19:var c=(e.flags&128)!==0;if(i=(a&t.childLanes)!==0,i||(ds(e,t,a,!1),i=(a&t.childLanes)!==0),c){if(i)return xf(e,t,a);t.flags|=128}if(c=t.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),Y(at,at.current),i)break;return null;case 22:return t.lanes=0,hf(e,t,a,t.pendingProps);case 24:Ka(t,st,e.memoizedState.cache)}return Ca(e,t,a)}function wf(e,t,a){if(e!==null)if(e.memoizedProps!==t.pendingProps)rt=!0;else{if(!uc(e,a)&&(t.flags&128)===0)return rt=!1,Ty(e,t,a);rt=(e.flags&131072)!==0}else rt=!1,Re&&(t.flags&1048576)!==0&&Fd(t,ui,t.index);switch(t.lanes=0,t.tag){case 16:e:{var i=t.pendingProps;if(e=Dn(t.elementType),t.type=e,typeof e=="function")go(e)?(i=Un(e,i),t.tag=1,t=pf(null,t,e,i,a)):(t.tag=0,t=nc(null,t,e,i,a));else{if(e!=null){var c=e.$$typeof;if(c===T){t.tag=11,t=cf(null,t,e,i,a);break e}else if(c===P){t.tag=14,t=uf(null,t,e,i,a);break e}}throw t=ce(e)||e,Error(r(306,t,""))}}return t;case 0:return nc(e,t,t.type,t.pendingProps,a);case 1:return i=t.type,c=Un(i,t.pendingProps),pf(e,t,i,c,a);case 3:e:{if(ue(t,t.stateNode.containerInfo),e===null)throw Error(r(387));i=t.pendingProps;var h=t.memoizedState;c=h.element,To(e,t),vi(t,i,null,a);var g=t.memoizedState;if(i=g.cache,Ka(t,st,i),i!==h.cache&&jo(t,[st],a,!0),yi(),i=g.element,h.isDehydrated)if(h={element:i,isDehydrated:!1,cache:g.cache},t.updateQueue.baseState=h,t.memoizedState=h,t.flags&256){t=yf(e,t,i,a);break e}else if(i!==c){c=ea(Error(r(424)),t),di(c),t=yf(e,t,i,a);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(Qe=ia(e.firstChild),vt=t,Re=!0,Pa=null,na=!0,a=dh(t,null,i,a),t.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(An(),i===c){t=Ca(e,t,a);break e}xt(e,t,i,a)}t=t.child}return t;case 26:return Gr(e,t),e===null?(a=Dm(t.type,null,t.pendingProps,null))?t.memoizedState=a:Re||(a=t.type,e=t.pendingProps,i=il(xe.current).createElement(a),i[yt]=t,i[At]=e,wt(i,a,e),ht(i),t.stateNode=i):t.memoizedState=Dm(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return de(t),e===null&&Re&&(i=t.stateNode=Cm(t.type,t.pendingProps,xe.current),vt=t,na=!0,c=Qe,ln(t.type)?(Yc=c,Qe=ia(i.firstChild)):Qe=c),xt(e,t,t.pendingProps.children,a),Gr(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&Re&&((c=i=Qe)&&(i=rv(i,t.type,t.pendingProps,na),i!==null?(t.stateNode=i,vt=t,Qe=ia(i.firstChild),na=!1,c=!0):c=!1),c||Ia(t)),de(t),c=t.type,h=t.pendingProps,g=e!==null?e.memoizedProps:null,i=h.children,Bc(c,h)?i=null:g!==null&&Bc(c,g)&&(t.flags|=32),t.memoizedState!==null&&(c=Lo(e,t,wy,null,null,a),Bi._currentValue=c),Gr(e,t),xt(e,t,i,a),t.child;case 6:return e===null&&Re&&((e=a=Qe)&&(a=lv(a,t.pendingProps,na),a!==null?(t.stateNode=a,vt=t,Qe=null,e=!0):e=!1),e||Ia(t)),null;case 13:return vf(e,t,a);case 4:return ue(t,t.stateNode.containerInfo),i=t.pendingProps,e===null?t.child=zn(t,null,i,a):xt(e,t,i,a),t.child;case 11:return cf(e,t,t.type,t.pendingProps,a);case 7:return xt(e,t,t.pendingProps,a),t.child;case 8:return xt(e,t,t.pendingProps.children,a),t.child;case 12:return xt(e,t,t.pendingProps.children,a),t.child;case 10:return i=t.pendingProps,Ka(t,t.type,i.value),xt(e,t,i.children,a),t.child;case 9:return c=t.type._context,i=t.pendingProps.children,Tn(t),c=bt(c),i=i(c),t.flags|=1,xt(e,t,i,a),t.child;case 14:return uf(e,t,t.type,t.pendingProps,a);case 15:return df(e,t,t.type,t.pendingProps,a);case 19:return xf(e,t,a);case 31:return Cy(e,t,a);case 22:return hf(e,t,a,t.pendingProps);case 24:return Tn(t),i=bt(st),e===null?(c=Eo(),c===null&&(c=Ve,h=ko(),c.pooledCache=h,h.refCount++,h!==null&&(c.pooledCacheLanes|=a),c=h),t.memoizedState={parent:i,cache:c},Co(t),Ka(t,st,c)):((e.lanes&a)!==0&&(To(e,t),vi(t,null,null,a),yi()),c=e.memoizedState,h=t.memoizedState,c.parent!==i?(c={parent:i,cache:i},t.memoizedState=c,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=c),Ka(t,st,i)):(i=h.cache,Ka(t,st,i),i!==c.cache&&jo(t,[st],a,!0))),xt(e,t,t.pendingProps.children,a),t.child;case 29:throw t.pendingProps}throw Error(r(156,t.tag))}function Ta(e){e.flags|=4}function dc(e,t,a,i,c){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(c&335544128)===c)if(e.stateNode.complete)e.flags|=8192;else if(Qf())e.flags|=8192;else throw Rn=Er,Ao}else e.flags&=-16777217}function _f(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Lm(t))if(Qf())e.flags|=8192;else throw Rn=Er,Ao}function Vr(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?ed():536870912,e.lanes|=t,Ss|=t)}function ji(e,t){if(!Re)switch(e.tailMode){case"hidden":t=e.tail;for(var a=null;t!==null;)t.alternate!==null&&(a=t),t=t.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var i=null;a!==null;)a.alternate!==null&&(i=a),a=a.sibling;i===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:i.sibling=null}}function Je(e){var t=e.alternate!==null&&e.alternate.child===e.child,a=0,i=0;if(t)for(var c=e.child;c!==null;)a|=c.lanes|c.childLanes,i|=c.subtreeFlags&65011712,i|=c.flags&65011712,c.return=e,c=c.sibling;else for(c=e.child;c!==null;)a|=c.lanes|c.childLanes,i|=c.subtreeFlags,i|=c.flags,c.return=e,c=c.sibling;return e.subtreeFlags|=i,e.childLanes=a,t}function Oy(e,t,a){var i=t.pendingProps;switch(bo(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Je(t),null;case 1:return Je(t),null;case 3:return a=t.stateNode,i=null,e!==null&&(i=e.memoizedState.cache),t.memoizedState.cache!==i&&(t.flags|=2048),Na(st),be(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(us(t)?Ta(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,wo())),Je(t),null;case 26:var c=t.type,h=t.memoizedState;return e===null?(Ta(t),h!==null?(Je(t),_f(t,h)):(Je(t),dc(t,c,null,i,a))):h?h!==e.memoizedState?(Ta(t),Je(t),_f(t,h)):(Je(t),t.flags&=-16777217):(e=e.memoizedProps,e!==i&&Ta(t),Je(t),dc(t,c,e,i,a)),null;case 27:if(oe(t),a=xe.current,c=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==i&&Ta(t);else{if(!i){if(t.stateNode===null)throw Error(r(166));return Je(t),null}e=te.current,us(t)?eh(t):(e=Cm(c,i,a),t.stateNode=e,Ta(t))}return Je(t),null;case 5:if(oe(t),c=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==i&&Ta(t);else{if(!i){if(t.stateNode===null)throw Error(r(166));return Je(t),null}if(h=te.current,us(t))eh(t);else{var g=il(xe.current);switch(h){case 1:h=g.createElementNS("http://www.w3.org/2000/svg",c);break;case 2:h=g.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;default:switch(c){case"svg":h=g.createElementNS("http://www.w3.org/2000/svg",c);break;case"math":h=g.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;case"script":h=g.createElement("div"),h.innerHTML="<script><\/script>",h=h.removeChild(h.firstChild);break;case"select":h=typeof i.is=="string"?g.createElement("select",{is:i.is}):g.createElement("select"),i.multiple?h.multiple=!0:i.size&&(h.size=i.size);break;default:h=typeof i.is=="string"?g.createElement(c,{is:i.is}):g.createElement(c)}}h[yt]=t,h[At]=i;e:for(g=t.child;g!==null;){if(g.tag===5||g.tag===6)h.appendChild(g.stateNode);else if(g.tag!==4&&g.tag!==27&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===t)break e;for(;g.sibling===null;){if(g.return===null||g.return===t)break e;g=g.return}g.sibling.return=g.return,g=g.sibling}t.stateNode=h;e:switch(wt(h,c,i),c){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}i&&Ta(t)}}return Je(t),dc(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,a),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==i&&Ta(t);else{if(typeof i!="string"&&t.stateNode===null)throw Error(r(166));if(e=xe.current,us(t)){if(e=t.stateNode,a=t.memoizedProps,i=null,c=vt,c!==null)switch(c.tag){case 27:case 5:i=c.memoizedProps}e[yt]=t,e=!!(e.nodeValue===a||i!==null&&i.suppressHydrationWarning===!0||vm(e.nodeValue,a)),e||Ia(t,!0)}else e=il(e).createTextNode(i),e[yt]=t,t.stateNode=e}return Je(t),null;case 31:if(a=t.memoizedState,e===null||e.memoizedState!==null){if(i=us(t),a!==null){if(e===null){if(!i)throw Error(r(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(r(557));e[yt]=t}else An(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Je(t),e=!1}else a=wo(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=a),e=!0;if(!e)return t.flags&256?(Ht(t),t):(Ht(t),null);if((t.flags&128)!==0)throw Error(r(558))}return Je(t),null;case 13:if(i=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(c=us(t),i!==null&&i.dehydrated!==null){if(e===null){if(!c)throw Error(r(318));if(c=t.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(r(317));c[yt]=t}else An(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Je(t),c=!1}else c=wo(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=c),c=!0;if(!c)return t.flags&256?(Ht(t),t):(Ht(t),null)}return Ht(t),(t.flags&128)!==0?(t.lanes=a,t):(a=i!==null,e=e!==null&&e.memoizedState!==null,a&&(i=t.child,c=null,i.alternate!==null&&i.alternate.memoizedState!==null&&i.alternate.memoizedState.cachePool!==null&&(c=i.alternate.memoizedState.cachePool.pool),h=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(h=i.memoizedState.cachePool.pool),h!==c&&(i.flags|=2048)),a!==e&&a&&(t.child.flags|=8192),Vr(t,t.updateQueue),Je(t),null);case 4:return be(),e===null&&Rc(t.stateNode.containerInfo),Je(t),null;case 10:return Na(t.type),Je(t),null;case 19:if(K(at),i=t.memoizedState,i===null)return Je(t),null;if(c=(t.flags&128)!==0,h=i.rendering,h===null)if(c)ji(i,!1);else{if(tt!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(h=Or(e),h!==null){for(t.flags|=128,ji(i,!1),e=h.updateQueue,t.updateQueue=e,Vr(t,e),t.subtreeFlags=0,e=a,a=t.child;a!==null;)Jd(a,e),a=a.sibling;return Y(at,at.current&1|2),Re&&ja(t,i.treeForkCount),t.child}e=e.sibling}i.tail!==null&&dt()>Jr&&(t.flags|=128,c=!0,ji(i,!1),t.lanes=4194304)}else{if(!c)if(e=Or(h),e!==null){if(t.flags|=128,c=!0,e=e.updateQueue,t.updateQueue=e,Vr(t,e),ji(i,!0),i.tail===null&&i.tailMode==="hidden"&&!h.alternate&&!Re)return Je(t),null}else 2*dt()-i.renderingStartTime>Jr&&a!==536870912&&(t.flags|=128,c=!0,ji(i,!1),t.lanes=4194304);i.isBackwards?(h.sibling=t.child,t.child=h):(e=i.last,e!==null?e.sibling=h:t.child=h,i.last=h)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=dt(),e.sibling=null,a=at.current,Y(at,c?a&1|2:a&1),Re&&ja(t,i.treeForkCount),e):(Je(t),null);case 22:case 23:return Ht(t),zo(),i=t.memoizedState!==null,e!==null?e.memoizedState!==null!==i&&(t.flags|=8192):i&&(t.flags|=8192),i?(a&536870912)!==0&&(t.flags&128)===0&&(Je(t),t.subtreeFlags&6&&(t.flags|=8192)):Je(t),a=t.updateQueue,a!==null&&Vr(t,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),i=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(i=t.memoizedState.cachePool.pool),i!==a&&(t.flags|=2048),e!==null&&K(On),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),t.memoizedState.cache!==a&&(t.flags|=2048),Na(st),Je(t),null;case 25:return null;case 30:return null}throw Error(r(156,t.tag))}function Dy(e,t){switch(bo(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Na(st),be(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return oe(t),null;case 31:if(t.memoizedState!==null){if(Ht(t),t.alternate===null)throw Error(r(340));An()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(Ht(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(r(340));An()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return K(at),null;case 4:return be(),null;case 10:return Na(t.type),null;case 22:case 23:return Ht(t),zo(),e!==null&&K(On),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return Na(st),null;case 25:return null;default:return null}}function Sf(e,t){switch(bo(t),t.tag){case 3:Na(st),be();break;case 26:case 27:case 5:oe(t);break;case 4:be();break;case 31:t.memoizedState!==null&&Ht(t);break;case 13:Ht(t);break;case 19:K(at);break;case 10:Na(t.type);break;case 22:case 23:Ht(t),zo(),e!==null&&K(On);break;case 24:Na(st)}}function ki(e,t){try{var a=t.updateQueue,i=a!==null?a.lastEffect:null;if(i!==null){var c=i.next;a=c;do{if((a.tag&e)===e){i=void 0;var h=a.create,g=a.inst;i=h(),g.destroy=i}a=a.next}while(a!==c)}}catch(x){qe(t,t.return,x)}}function Wa(e,t,a){try{var i=t.updateQueue,c=i!==null?i.lastEffect:null;if(c!==null){var h=c.next;i=h;do{if((i.tag&e)===e){var g=i.inst,x=g.destroy;if(x!==void 0){g.destroy=void 0,c=t;var E=a,L=x;try{L()}catch(J){qe(c,E,J)}}}i=i.next}while(i!==h)}}catch(J){qe(t,t.return,J)}}function jf(e){var t=e.updateQueue;if(t!==null){var a=e.stateNode;try{fh(t,a)}catch(i){qe(e,e.return,i)}}}function kf(e,t,a){a.props=Un(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(i){qe(e,t,i)}}function Ni(e,t){try{var a=e.ref;if(a!==null){switch(e.tag){case 26:case 27:case 5:var i=e.stateNode;break;case 30:i=e.stateNode;break;default:i=e.stateNode}typeof a=="function"?e.refCleanup=a(i):a.current=i}}catch(c){qe(e,t,c)}}function va(e,t){var a=e.ref,i=e.refCleanup;if(a!==null)if(typeof i=="function")try{i()}catch(c){qe(e,t,c)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(c){qe(e,t,c)}else a.current=null}function Nf(e){var t=e.type,a=e.memoizedProps,i=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":a.autoFocus&&i.focus();break e;case"img":a.src?i.src=a.src:a.srcSet&&(i.srcset=a.srcSet)}}catch(c){qe(e,e.return,c)}}function hc(e,t,a){try{var i=e.stateNode;ev(i,e.type,a,t),i[At]=t}catch(c){qe(e,e.return,c)}}function Ef(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&ln(e.type)||e.tag===4}function fc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Ef(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&ln(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function mc(e,t,a){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(e,t):(t=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,t.appendChild(e),a=a._reactRootContainer,a!=null||t.onclick!==null||(t.onclick=wa));else if(i!==4&&(i===27&&ln(e.type)&&(a=e.stateNode,t=null),e=e.child,e!==null))for(mc(e,t,a),e=e.sibling;e!==null;)mc(e,t,a),e=e.sibling}function Pr(e,t,a){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?a.insertBefore(e,t):a.appendChild(e);else if(i!==4&&(i===27&&ln(e.type)&&(a=e.stateNode),e=e.child,e!==null))for(Pr(e,t,a),e=e.sibling;e!==null;)Pr(e,t,a),e=e.sibling}function Af(e){var t=e.stateNode,a=e.memoizedProps;try{for(var i=e.type,c=t.attributes;c.length;)t.removeAttributeNode(c[0]);wt(t,i,a),t[yt]=e,t[At]=a}catch(h){qe(e,e.return,h)}}var Oa=!1,lt=!1,gc=!1,Cf=typeof WeakSet=="function"?WeakSet:Set,ft=null;function Ry(e,t){if(e=e.containerInfo,Uc=hl,e=qd(e),lo(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else e:{a=(a=e.ownerDocument)&&a.defaultView||window;var i=a.getSelection&&a.getSelection();if(i&&i.rangeCount!==0){a=i.anchorNode;var c=i.anchorOffset,h=i.focusNode;i=i.focusOffset;try{a.nodeType,h.nodeType}catch{a=null;break e}var g=0,x=-1,E=-1,L=0,J=0,ee=e,H=null;t:for(;;){for(var V;ee!==a||c!==0&&ee.nodeType!==3||(x=g+c),ee!==h||i!==0&&ee.nodeType!==3||(E=g+i),ee.nodeType===3&&(g+=ee.nodeValue.length),(V=ee.firstChild)!==null;)H=ee,ee=V;for(;;){if(ee===e)break t;if(H===a&&++L===c&&(x=g),H===h&&++J===i&&(E=g),(V=ee.nextSibling)!==null)break;ee=H,H=ee.parentNode}ee=V}a=x===-1||E===-1?null:{start:x,end:E}}else a=null}a=a||{start:0,end:0}}else a=null;for(Lc={focusedElem:e,selectionRange:a},hl=!1,ft=t;ft!==null;)if(t=ft,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ft=e;else for(;ft!==null;){switch(t=ft,h=t.alternate,e=t.flags,t.tag){case 0:if((e&4)!==0&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(a=0;a<e.length;a++)c=e[a],c.ref.impl=c.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&h!==null){e=void 0,a=t,c=h.memoizedProps,h=h.memoizedState,i=a.stateNode;try{var fe=Un(a.type,c);e=i.getSnapshotBeforeUpdate(fe,h),i.__reactInternalSnapshotBeforeUpdate=e}catch(we){qe(a,a.return,we)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,a=e.nodeType,a===9)qc(e);else if(a===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":qc(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(r(163))}if(e=t.sibling,e!==null){e.return=t.return,ft=e;break}ft=t.return}}function Tf(e,t,a){var i=a.flags;switch(a.tag){case 0:case 11:case 15:Ra(e,a),i&4&&ki(5,a);break;case 1:if(Ra(e,a),i&4)if(e=a.stateNode,t===null)try{e.componentDidMount()}catch(g){qe(a,a.return,g)}else{var c=Un(a.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(c,t,e.__reactInternalSnapshotBeforeUpdate)}catch(g){qe(a,a.return,g)}}i&64&&jf(a),i&512&&Ni(a,a.return);break;case 3:if(Ra(e,a),i&64&&(e=a.updateQueue,e!==null)){if(t=null,a.child!==null)switch(a.child.tag){case 27:case 5:t=a.child.stateNode;break;case 1:t=a.child.stateNode}try{fh(e,t)}catch(g){qe(a,a.return,g)}}break;case 27:t===null&&i&4&&Af(a);case 26:case 5:Ra(e,a),t===null&&i&4&&Nf(a),i&512&&Ni(a,a.return);break;case 12:Ra(e,a);break;case 31:Ra(e,a),i&4&&Rf(e,a);break;case 13:Ra(e,a),i&4&&zf(e,a),i&64&&(e=a.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(a=Gy.bind(null,a),ov(e,a))));break;case 22:if(i=a.memoizedState!==null||Oa,!i){t=t!==null&&t.memoizedState!==null||lt,c=Oa;var h=lt;Oa=i,(lt=t)&&!h?za(e,a,(a.subtreeFlags&8772)!==0):Ra(e,a),Oa=c,lt=h}break;case 30:break;default:Ra(e,a)}}function Of(e){var t=e.alternate;t!==null&&(e.alternate=null,Of(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&Vl(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Ze=null,Tt=!1;function Da(e,t,a){for(a=a.child;a!==null;)Df(e,t,a),a=a.sibling}function Df(e,t,a){if(Ut&&typeof Ut.onCommitFiberUnmount=="function")try{Ut.onCommitFiberUnmount(Xs,a)}catch{}switch(a.tag){case 26:lt||va(a,t),Da(e,t,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:lt||va(a,t);var i=Ze,c=Tt;ln(a.type)&&(Ze=a.stateNode,Tt=!1),Da(e,t,a),Mi(a.stateNode),Ze=i,Tt=c;break;case 5:lt||va(a,t);case 6:if(i=Ze,c=Tt,Ze=null,Da(e,t,a),Ze=i,Tt=c,Ze!==null)if(Tt)try{(Ze.nodeType===9?Ze.body:Ze.nodeName==="HTML"?Ze.ownerDocument.body:Ze).removeChild(a.stateNode)}catch(h){qe(a,t,h)}else try{Ze.removeChild(a.stateNode)}catch(h){qe(a,t,h)}break;case 18:Ze!==null&&(Tt?(e=Ze,jm(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,a.stateNode),Os(e)):jm(Ze,a.stateNode));break;case 4:i=Ze,c=Tt,Ze=a.stateNode.containerInfo,Tt=!0,Da(e,t,a),Ze=i,Tt=c;break;case 0:case 11:case 14:case 15:Wa(2,a,t),lt||Wa(4,a,t),Da(e,t,a);break;case 1:lt||(va(a,t),i=a.stateNode,typeof i.componentWillUnmount=="function"&&kf(a,t,i)),Da(e,t,a);break;case 21:Da(e,t,a);break;case 22:lt=(i=lt)||a.memoizedState!==null,Da(e,t,a),lt=i;break;default:Da(e,t,a)}}function Rf(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{Os(e)}catch(a){qe(t,t.return,a)}}}function zf(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Os(e)}catch(a){qe(t,t.return,a)}}function zy(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new Cf),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new Cf),t;default:throw Error(r(435,e.tag))}}function Ir(e,t){var a=zy(e);t.forEach(function(i){if(!a.has(i)){a.add(i);var c=Yy.bind(null,e,i);i.then(c,c)}})}function Ot(e,t){var a=t.deletions;if(a!==null)for(var i=0;i<a.length;i++){var c=a[i],h=e,g=t,x=g;e:for(;x!==null;){switch(x.tag){case 27:if(ln(x.type)){Ze=x.stateNode,Tt=!1;break e}break;case 5:Ze=x.stateNode,Tt=!1;break e;case 3:case 4:Ze=x.stateNode.containerInfo,Tt=!0;break e}x=x.return}if(Ze===null)throw Error(r(160));Df(h,g,c),Ze=null,Tt=!1,h=c.alternate,h!==null&&(h.return=null),c.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)Mf(t,e),t=t.sibling}var ua=null;function Mf(e,t){var a=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Ot(t,e),Dt(e),i&4&&(Wa(3,e,e.return),ki(3,e),Wa(5,e,e.return));break;case 1:Ot(t,e),Dt(e),i&512&&(lt||a===null||va(a,a.return)),i&64&&Oa&&(e=e.updateQueue,e!==null&&(i=e.callbacks,i!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?i:a.concat(i))));break;case 26:var c=ua;if(Ot(t,e),Dt(e),i&512&&(lt||a===null||va(a,a.return)),i&4){var h=a!==null?a.memoizedState:null;if(i=e.memoizedState,a===null)if(i===null)if(e.stateNode===null){e:{i=e.type,a=e.memoizedProps,c=c.ownerDocument||c;t:switch(i){case"title":h=c.getElementsByTagName("title")[0],(!h||h[Ws]||h[yt]||h.namespaceURI==="http://www.w3.org/2000/svg"||h.hasAttribute("itemprop"))&&(h=c.createElement(i),c.head.insertBefore(h,c.querySelector("head > title"))),wt(h,i,a),h[yt]=e,ht(h),i=h;break e;case"link":var g=Mm("link","href",c).get(i+(a.href||""));if(g){for(var x=0;x<g.length;x++)if(h=g[x],h.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&h.getAttribute("rel")===(a.rel==null?null:a.rel)&&h.getAttribute("title")===(a.title==null?null:a.title)&&h.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){g.splice(x,1);break t}}h=c.createElement(i),wt(h,i,a),c.head.appendChild(h);break;case"meta":if(g=Mm("meta","content",c).get(i+(a.content||""))){for(x=0;x<g.length;x++)if(h=g[x],h.getAttribute("content")===(a.content==null?null:""+a.content)&&h.getAttribute("name")===(a.name==null?null:a.name)&&h.getAttribute("property")===(a.property==null?null:a.property)&&h.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&h.getAttribute("charset")===(a.charSet==null?null:a.charSet)){g.splice(x,1);break t}}h=c.createElement(i),wt(h,i,a),c.head.appendChild(h);break;default:throw Error(r(468,i))}h[yt]=e,ht(h),i=h}e.stateNode=i}else Um(c,e.type,e.stateNode);else e.stateNode=zm(c,i,e.memoizedProps);else h!==i?(h===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):h.count--,i===null?Um(c,e.type,e.stateNode):zm(c,i,e.memoizedProps)):i===null&&e.stateNode!==null&&hc(e,e.memoizedProps,a.memoizedProps)}break;case 27:Ot(t,e),Dt(e),i&512&&(lt||a===null||va(a,a.return)),a!==null&&i&4&&hc(e,e.memoizedProps,a.memoizedProps);break;case 5:if(Ot(t,e),Dt(e),i&512&&(lt||a===null||va(a,a.return)),e.flags&32){c=e.stateNode;try{es(c,"")}catch(fe){qe(e,e.return,fe)}}i&4&&e.stateNode!=null&&(c=e.memoizedProps,hc(e,c,a!==null?a.memoizedProps:c)),i&1024&&(gc=!0);break;case 6:if(Ot(t,e),Dt(e),i&4){if(e.stateNode===null)throw Error(r(162));i=e.memoizedProps,a=e.stateNode;try{a.nodeValue=i}catch(fe){qe(e,e.return,fe)}}break;case 3:if(ol=null,c=ua,ua=rl(t.containerInfo),Ot(t,e),ua=c,Dt(e),i&4&&a!==null&&a.memoizedState.isDehydrated)try{Os(t.containerInfo)}catch(fe){qe(e,e.return,fe)}gc&&(gc=!1,Uf(e));break;case 4:i=ua,ua=rl(e.stateNode.containerInfo),Ot(t,e),Dt(e),ua=i;break;case 12:Ot(t,e),Dt(e);break;case 31:Ot(t,e),Dt(e),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,Ir(e,i)));break;case 13:Ot(t,e),Dt(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Qr=dt()),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,Ir(e,i)));break;case 22:c=e.memoizedState!==null;var E=a!==null&&a.memoizedState!==null,L=Oa,J=lt;if(Oa=L||c,lt=J||E,Ot(t,e),lt=J,Oa=L,Dt(e),i&8192)e:for(t=e.stateNode,t._visibility=c?t._visibility&-2:t._visibility|1,c&&(a===null||E||Oa||lt||Ln(e)),a=null,t=e;;){if(t.tag===5||t.tag===26){if(a===null){E=a=t;try{if(h=E.stateNode,c)g=h.style,typeof g.setProperty=="function"?g.setProperty("display","none","important"):g.display="none";else{x=E.stateNode;var ee=E.memoizedProps.style,H=ee!=null&&ee.hasOwnProperty("display")?ee.display:null;x.style.display=H==null||typeof H=="boolean"?"":(""+H).trim()}}catch(fe){qe(E,E.return,fe)}}}else if(t.tag===6){if(a===null){E=t;try{E.stateNode.nodeValue=c?"":E.memoizedProps}catch(fe){qe(E,E.return,fe)}}}else if(t.tag===18){if(a===null){E=t;try{var V=E.stateNode;c?km(V,!0):km(E.stateNode,!1)}catch(fe){qe(E,E.return,fe)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;a===t&&(a=null),t=t.return}a===t&&(a=null),t.sibling.return=t.return,t=t.sibling}i&4&&(i=e.updateQueue,i!==null&&(a=i.retryQueue,a!==null&&(i.retryQueue=null,Ir(e,a))));break;case 19:Ot(t,e),Dt(e),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,Ir(e,i)));break;case 30:break;case 21:break;default:Ot(t,e),Dt(e)}}function Dt(e){var t=e.flags;if(t&2){try{for(var a,i=e.return;i!==null;){if(Ef(i)){a=i;break}i=i.return}if(a==null)throw Error(r(160));switch(a.tag){case 27:var c=a.stateNode,h=fc(e);Pr(e,h,c);break;case 5:var g=a.stateNode;a.flags&32&&(es(g,""),a.flags&=-33);var x=fc(e);Pr(e,x,g);break;case 3:case 4:var E=a.stateNode.containerInfo,L=fc(e);mc(e,L,E);break;default:throw Error(r(161))}}catch(J){qe(e,e.return,J)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Uf(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;Uf(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function Ra(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)Tf(e,t.alternate,t),t=t.sibling}function Ln(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:Wa(4,t,t.return),Ln(t);break;case 1:va(t,t.return);var a=t.stateNode;typeof a.componentWillUnmount=="function"&&kf(t,t.return,a),Ln(t);break;case 27:Mi(t.stateNode);case 26:case 5:va(t,t.return),Ln(t);break;case 22:t.memoizedState===null&&Ln(t);break;case 30:Ln(t);break;default:Ln(t)}e=e.sibling}}function za(e,t,a){for(a=a&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var i=t.alternate,c=e,h=t,g=h.flags;switch(h.tag){case 0:case 11:case 15:za(c,h,a),ki(4,h);break;case 1:if(za(c,h,a),i=h,c=i.stateNode,typeof c.componentDidMount=="function")try{c.componentDidMount()}catch(L){qe(i,i.return,L)}if(i=h,c=i.updateQueue,c!==null){var x=i.stateNode;try{var E=c.shared.hiddenCallbacks;if(E!==null)for(c.shared.hiddenCallbacks=null,c=0;c<E.length;c++)hh(E[c],x)}catch(L){qe(i,i.return,L)}}a&&g&64&&jf(h),Ni(h,h.return);break;case 27:Af(h);case 26:case 5:za(c,h,a),a&&i===null&&g&4&&Nf(h),Ni(h,h.return);break;case 12:za(c,h,a);break;case 31:za(c,h,a),a&&g&4&&Rf(c,h);break;case 13:za(c,h,a),a&&g&4&&zf(c,h);break;case 22:h.memoizedState===null&&za(c,h,a),Ni(h,h.return);break;case 30:break;default:za(c,h,a)}t=t.sibling}}function pc(e,t){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&hi(a))}function yc(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&hi(e))}function da(e,t,a,i){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Lf(e,t,a,i),t=t.sibling}function Lf(e,t,a,i){var c=t.flags;switch(t.tag){case 0:case 11:case 15:da(e,t,a,i),c&2048&&ki(9,t);break;case 1:da(e,t,a,i);break;case 3:da(e,t,a,i),c&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&hi(e)));break;case 12:if(c&2048){da(e,t,a,i),e=t.stateNode;try{var h=t.memoizedProps,g=h.id,x=h.onPostCommit;typeof x=="function"&&x(g,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(E){qe(t,t.return,E)}}else da(e,t,a,i);break;case 31:da(e,t,a,i);break;case 13:da(e,t,a,i);break;case 23:break;case 22:h=t.stateNode,g=t.alternate,t.memoizedState!==null?h._visibility&2?da(e,t,a,i):Ei(e,t):h._visibility&2?da(e,t,a,i):(h._visibility|=2,xs(e,t,a,i,(t.subtreeFlags&10256)!==0||!1)),c&2048&&pc(g,t);break;case 24:da(e,t,a,i),c&2048&&yc(t.alternate,t);break;default:da(e,t,a,i)}}function xs(e,t,a,i,c){for(c=c&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var h=e,g=t,x=a,E=i,L=g.flags;switch(g.tag){case 0:case 11:case 15:xs(h,g,x,E,c),ki(8,g);break;case 23:break;case 22:var J=g.stateNode;g.memoizedState!==null?J._visibility&2?xs(h,g,x,E,c):Ei(h,g):(J._visibility|=2,xs(h,g,x,E,c)),c&&L&2048&&pc(g.alternate,g);break;case 24:xs(h,g,x,E,c),c&&L&2048&&yc(g.alternate,g);break;default:xs(h,g,x,E,c)}t=t.sibling}}function Ei(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var a=e,i=t,c=i.flags;switch(i.tag){case 22:Ei(a,i),c&2048&&pc(i.alternate,i);break;case 24:Ei(a,i),c&2048&&yc(i.alternate,i);break;default:Ei(a,i)}t=t.sibling}}var Ai=8192;function ws(e,t,a){if(e.subtreeFlags&Ai)for(e=e.child;e!==null;)Bf(e,t,a),e=e.sibling}function Bf(e,t,a){switch(e.tag){case 26:ws(e,t,a),e.flags&Ai&&e.memoizedState!==null&&xv(a,ua,e.memoizedState,e.memoizedProps);break;case 5:ws(e,t,a);break;case 3:case 4:var i=ua;ua=rl(e.stateNode.containerInfo),ws(e,t,a),ua=i;break;case 22:e.memoizedState===null&&(i=e.alternate,i!==null&&i.memoizedState!==null?(i=Ai,Ai=16777216,ws(e,t,a),Ai=i):ws(e,t,a));break;default:ws(e,t,a)}}function $f(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function Ci(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var a=0;a<t.length;a++){var i=t[a];ft=i,Hf(i,e)}$f(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)qf(e),e=e.sibling}function qf(e){switch(e.tag){case 0:case 11:case 15:Ci(e),e.flags&2048&&Wa(9,e,e.return);break;case 3:Ci(e);break;case 12:Ci(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,Kr(e)):Ci(e);break;default:Ci(e)}}function Kr(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var a=0;a<t.length;a++){var i=t[a];ft=i,Hf(i,e)}$f(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:Wa(8,t,t.return),Kr(t);break;case 22:a=t.stateNode,a._visibility&2&&(a._visibility&=-3,Kr(t));break;default:Kr(t)}e=e.sibling}}function Hf(e,t){for(;ft!==null;){var a=ft;switch(a.tag){case 0:case 11:case 15:Wa(8,a,t);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var i=a.memoizedState.cachePool.pool;i!=null&&i.refCount++}break;case 24:hi(a.memoizedState.cache)}if(i=a.child,i!==null)i.return=a,ft=i;else e:for(a=e;ft!==null;){i=ft;var c=i.sibling,h=i.return;if(Of(i),i===a){ft=null;break e}if(c!==null){c.return=h,ft=c;break e}ft=h}}}var My={getCacheForType:function(e){var t=bt(st),a=t.data.get(e);return a===void 0&&(a=e(),t.data.set(e,a)),a},cacheSignal:function(){return bt(st).controller.signal}},Uy=typeof WeakMap=="function"?WeakMap:Map,Le=0,Ve=null,Ae=null,Te=0,$e=0,Gt=null,en=!1,_s=!1,vc=!1,Ma=0,tt=0,tn=0,Bn=0,bc=0,Yt=0,Ss=0,Ti=null,Rt=null,xc=!1,Qr=0,Gf=0,Jr=1/0,Xr=null,an=null,ct=0,nn=null,js=null,Ua=0,wc=0,_c=null,Yf=null,Oi=0,Sc=null;function Vt(){return(Le&2)!==0&&Te!==0?Te&-Te:M.T!==null?Cc():sd()}function Vf(){if(Yt===0)if((Te&536870912)===0||Re){var e=sr;sr<<=1,(sr&3932160)===0&&(sr=262144),Yt=e}else Yt=536870912;return e=qt.current,e!==null&&(e.flags|=32),Yt}function zt(e,t,a){(e===Ve&&($e===2||$e===9)||e.cancelPendingCommit!==null)&&(ks(e,0),sn(e,Te,Yt,!1)),Fs(e,a),((Le&2)===0||e!==Ve)&&(e===Ve&&((Le&2)===0&&(Bn|=a),tt===4&&sn(e,Te,Yt,!1)),ba(e))}function Pf(e,t,a){if((Le&6)!==0)throw Error(r(327));var i=!a&&(t&127)===0&&(t&e.expiredLanes)===0||Zs(e,t),c=i?$y(e,t):kc(e,t,!0),h=i;do{if(c===0){_s&&!i&&sn(e,t,0,!1);break}else{if(a=e.current.alternate,h&&!Ly(a)){c=kc(e,t,!1),h=!1;continue}if(c===2){if(h=t,e.errorRecoveryDisabledLanes&h)var g=0;else g=e.pendingLanes&-536870913,g=g!==0?g:g&536870912?536870912:0;if(g!==0){t=g;e:{var x=e;c=Ti;var E=x.current.memoizedState.isDehydrated;if(E&&(ks(x,g).flags|=256),g=kc(x,g,!1),g!==2){if(vc&&!E){x.errorRecoveryDisabledLanes|=h,Bn|=h,c=4;break e}h=Rt,Rt=c,h!==null&&(Rt===null?Rt=h:Rt.push.apply(Rt,h))}c=g}if(h=!1,c!==2)continue}}if(c===1){ks(e,0),sn(e,t,0,!0);break}e:{switch(i=e,h=c,h){case 0:case 1:throw Error(r(345));case 4:if((t&4194048)!==t)break;case 6:sn(i,t,Yt,!en);break e;case 2:Rt=null;break;case 3:case 5:break;default:throw Error(r(329))}if((t&62914560)===t&&(c=Qr+300-dt(),10<c)){if(sn(i,t,Yt,!en),rr(i,0,!0)!==0)break e;Ua=t,i.timeoutHandle=_m(If.bind(null,i,a,Rt,Xr,xc,t,Yt,Bn,Ss,en,h,"Throttled",-0,0),c);break e}If(i,a,Rt,Xr,xc,t,Yt,Bn,Ss,en,h,null,-0,0)}}break}while(!0);ba(e)}function If(e,t,a,i,c,h,g,x,E,L,J,ee,H,V){if(e.timeoutHandle=-1,ee=t.subtreeFlags,ee&8192||(ee&16785408)===16785408){ee={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:wa},Bf(t,h,ee);var fe=(h&62914560)===h?Qr-dt():(h&4194048)===h?Gf-dt():0;if(fe=wv(ee,fe),fe!==null){Ua=h,e.cancelPendingCommit=fe(em.bind(null,e,t,h,a,i,c,g,x,E,J,ee,null,H,V)),sn(e,h,g,!L);return}}em(e,t,h,a,i,c,g,x,E)}function Ly(e){for(var t=e;;){var a=t.tag;if((a===0||a===11||a===15)&&t.flags&16384&&(a=t.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var i=0;i<a.length;i++){var c=a[i],h=c.getSnapshot;c=c.value;try{if(!Bt(h(),c))return!1}catch{return!1}}if(a=t.child,t.subtreeFlags&16384&&a!==null)a.return=t,t=a;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function sn(e,t,a,i){t&=~bc,t&=~Bn,e.suspendedLanes|=t,e.pingedLanes&=~t,i&&(e.warmLanes|=t),i=e.expirationTimes;for(var c=t;0<c;){var h=31-Lt(c),g=1<<h;i[h]=-1,c&=~g}a!==0&&td(e,a,t)}function Zr(){return(Le&6)===0?(Di(0),!1):!0}function jc(){if(Ae!==null){if($e===0)var e=Ae.return;else e=Ae,ka=Cn=null,qo(e),gs=null,mi=0,e=Ae;for(;e!==null;)Sf(e.alternate,e),e=e.return;Ae=null}}function ks(e,t){var a=e.timeoutHandle;a!==-1&&(e.timeoutHandle=-1,nv(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),Ua=0,jc(),Ve=e,Ae=a=Sa(e.current,null),Te=t,$e=0,Gt=null,en=!1,_s=Zs(e,t),vc=!1,Ss=Yt=bc=Bn=tn=tt=0,Rt=Ti=null,xc=!1,(t&8)!==0&&(t|=t&32);var i=e.entangledLanes;if(i!==0)for(e=e.entanglements,i&=t;0<i;){var c=31-Lt(i),h=1<<c;t|=e[c],i&=~h}return Ma=t,vr(),a}function Kf(e,t){ke=null,M.H=_i,t===ms||t===Nr?(t=oh(),$e=3):t===Ao?(t=oh(),$e=4):$e=t===ac?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,Gt=t,Ae===null&&(tt=1,qr(e,ea(t,e.current)))}function Qf(){var e=qt.current;return e===null?!0:(Te&4194048)===Te?sa===null:(Te&62914560)===Te||(Te&536870912)!==0?e===sa:!1}function Jf(){var e=M.H;return M.H=_i,e===null?_i:e}function Xf(){var e=M.A;return M.A=My,e}function Fr(){tt=4,en||(Te&4194048)!==Te&&qt.current!==null||(_s=!0),(tn&134217727)===0&&(Bn&134217727)===0||Ve===null||sn(Ve,Te,Yt,!1)}function kc(e,t,a){var i=Le;Le|=2;var c=Jf(),h=Xf();(Ve!==e||Te!==t)&&(Xr=null,ks(e,t)),t=!1;var g=tt;e:do try{if($e!==0&&Ae!==null){var x=Ae,E=Gt;switch($e){case 8:jc(),g=6;break e;case 3:case 2:case 9:case 6:qt.current===null&&(t=!0);var L=$e;if($e=0,Gt=null,Ns(e,x,E,L),a&&_s){g=0;break e}break;default:L=$e,$e=0,Gt=null,Ns(e,x,E,L)}}By(),g=tt;break}catch(J){Kf(e,J)}while(!0);return t&&e.shellSuspendCounter++,ka=Cn=null,Le=i,M.H=c,M.A=h,Ae===null&&(Ve=null,Te=0,vr()),g}function By(){for(;Ae!==null;)Zf(Ae)}function $y(e,t){var a=Le;Le|=2;var i=Jf(),c=Xf();Ve!==e||Te!==t?(Xr=null,Jr=dt()+500,ks(e,t)):_s=Zs(e,t);e:do try{if($e!==0&&Ae!==null){t=Ae;var h=Gt;t:switch($e){case 1:$e=0,Gt=null,Ns(e,t,h,1);break;case 2:case 9:if(rh(h)){$e=0,Gt=null,Ff(t);break}t=function(){$e!==2&&$e!==9||Ve!==e||($e=7),ba(e)},h.then(t,t);break e;case 3:$e=7;break e;case 4:$e=5;break e;case 7:rh(h)?($e=0,Gt=null,Ff(t)):($e=0,Gt=null,Ns(e,t,h,7));break;case 5:var g=null;switch(Ae.tag){case 26:g=Ae.memoizedState;case 5:case 27:var x=Ae;if(g?Lm(g):x.stateNode.complete){$e=0,Gt=null;var E=x.sibling;if(E!==null)Ae=E;else{var L=x.return;L!==null?(Ae=L,Wr(L)):Ae=null}break t}}$e=0,Gt=null,Ns(e,t,h,5);break;case 6:$e=0,Gt=null,Ns(e,t,h,6);break;case 8:jc(),tt=6;break e;default:throw Error(r(462))}}qy();break}catch(J){Kf(e,J)}while(!0);return ka=Cn=null,M.H=i,M.A=c,Le=a,Ae!==null?0:(Ve=null,Te=0,vr(),tt)}function qy(){for(;Ae!==null&&!oa();)Zf(Ae)}function Zf(e){var t=wf(e.alternate,e,Ma);e.memoizedProps=e.pendingProps,t===null?Wr(e):Ae=t}function Ff(e){var t=e,a=t.alternate;switch(t.tag){case 15:case 0:t=gf(a,t,t.pendingProps,t.type,void 0,Te);break;case 11:t=gf(a,t,t.pendingProps,t.type.render,t.ref,Te);break;case 5:qo(t);default:Sf(a,t),t=Ae=Jd(t,Ma),t=wf(a,t,Ma)}e.memoizedProps=e.pendingProps,t===null?Wr(e):Ae=t}function Ns(e,t,a,i){ka=Cn=null,qo(t),gs=null,mi=0;var c=t.return;try{if(Ay(e,c,t,a,Te)){tt=1,qr(e,ea(a,e.current)),Ae=null;return}}catch(h){if(c!==null)throw Ae=c,h;tt=1,qr(e,ea(a,e.current)),Ae=null;return}t.flags&32768?(Re||i===1?e=!0:_s||(Te&536870912)!==0?e=!1:(en=e=!0,(i===2||i===9||i===3||i===6)&&(i=qt.current,i!==null&&i.tag===13&&(i.flags|=16384))),Wf(t,e)):Wr(t)}function Wr(e){var t=e;do{if((t.flags&32768)!==0){Wf(t,en);return}e=t.return;var a=Oy(t.alternate,t,Ma);if(a!==null){Ae=a;return}if(t=t.sibling,t!==null){Ae=t;return}Ae=t=e}while(t!==null);tt===0&&(tt=5)}function Wf(e,t){do{var a=Dy(e.alternate,e);if(a!==null){a.flags&=32767,Ae=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!t&&(e=e.sibling,e!==null)){Ae=e;return}Ae=e=a}while(e!==null);tt=6,Ae=null}function em(e,t,a,i,c,h,g,x,E){e.cancelPendingCommit=null;do el();while(ct!==0);if((Le&6)!==0)throw Error(r(327));if(t!==null){if(t===e.current)throw Error(r(177));if(h=t.lanes|t.childLanes,h|=fo,bp(e,a,h,g,x,E),e===Ve&&(Ae=Ve=null,Te=0),js=t,nn=e,Ua=a,wc=h,_c=c,Yf=i,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,Vy(Ue,function(){return im(),null})):(e.callbackNode=null,e.callbackPriority=0),i=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||i){i=M.T,M.T=null,c=z.p,z.p=2,g=Le,Le|=4;try{Ry(e,t,a)}finally{Le=g,z.p=c,M.T=i}}ct=1,tm(),am(),nm()}}function tm(){if(ct===1){ct=0;var e=nn,t=js,a=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||a){a=M.T,M.T=null;var i=z.p;z.p=2;var c=Le;Le|=4;try{Mf(t,e);var h=Lc,g=qd(e.containerInfo),x=h.focusedElem,E=h.selectionRange;if(g!==x&&x&&x.ownerDocument&&$d(x.ownerDocument.documentElement,x)){if(E!==null&&lo(x)){var L=E.start,J=E.end;if(J===void 0&&(J=L),"selectionStart"in x)x.selectionStart=L,x.selectionEnd=Math.min(J,x.value.length);else{var ee=x.ownerDocument||document,H=ee&&ee.defaultView||window;if(H.getSelection){var V=H.getSelection(),fe=x.textContent.length,we=Math.min(E.start,fe),Ye=E.end===void 0?we:Math.min(E.end,fe);!V.extend&&we>Ye&&(g=Ye,Ye=we,we=g);var D=Bd(x,we),A=Bd(x,Ye);if(D&&A&&(V.rangeCount!==1||V.anchorNode!==D.node||V.anchorOffset!==D.offset||V.focusNode!==A.node||V.focusOffset!==A.offset)){var U=ee.createRange();U.setStart(D.node,D.offset),V.removeAllRanges(),we>Ye?(V.addRange(U),V.extend(A.node,A.offset)):(U.setEnd(A.node,A.offset),V.addRange(U))}}}}for(ee=[],V=x;V=V.parentNode;)V.nodeType===1&&ee.push({element:V,left:V.scrollLeft,top:V.scrollTop});for(typeof x.focus=="function"&&x.focus(),x=0;x<ee.length;x++){var W=ee[x];W.element.scrollLeft=W.left,W.element.scrollTop=W.top}}hl=!!Uc,Lc=Uc=null}finally{Le=c,z.p=i,M.T=a}}e.current=t,ct=2}}function am(){if(ct===2){ct=0;var e=nn,t=js,a=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||a){a=M.T,M.T=null;var i=z.p;z.p=2;var c=Le;Le|=4;try{Tf(e,t.alternate,t)}finally{Le=c,z.p=i,M.T=a}}ct=3}}function nm(){if(ct===4||ct===3){ct=0,bn();var e=nn,t=js,a=Ua,i=Yf;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?ct=5:(ct=0,js=nn=null,sm(e,e.pendingLanes));var c=e.pendingLanes;if(c===0&&(an=null),Gl(a),t=t.stateNode,Ut&&typeof Ut.onCommitFiberRoot=="function")try{Ut.onCommitFiberRoot(Xs,t,void 0,(t.current.flags&128)===128)}catch{}if(i!==null){t=M.T,c=z.p,z.p=2,M.T=null;try{for(var h=e.onRecoverableError,g=0;g<i.length;g++){var x=i[g];h(x.value,{componentStack:x.stack})}}finally{M.T=t,z.p=c}}(Ua&3)!==0&&el(),ba(e),c=e.pendingLanes,(a&261930)!==0&&(c&42)!==0?e===Sc?Oi++:(Oi=0,Sc=e):Oi=0,Di(0)}}function sm(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,hi(t)))}function el(){return tm(),am(),nm(),im()}function im(){if(ct!==5)return!1;var e=nn,t=wc;wc=0;var a=Gl(Ua),i=M.T,c=z.p;try{z.p=32>a?32:a,M.T=null,a=_c,_c=null;var h=nn,g=Ua;if(ct=0,js=nn=null,Ua=0,(Le&6)!==0)throw Error(r(331));var x=Le;if(Le|=4,qf(h.current),Lf(h,h.current,g,a),Le=x,Di(0,!1),Ut&&typeof Ut.onPostCommitFiberRoot=="function")try{Ut.onPostCommitFiberRoot(Xs,h)}catch{}return!0}finally{z.p=c,M.T=i,sm(e,t)}}function rm(e,t,a){t=ea(a,t),t=tc(e.stateNode,t,2),e=Xa(e,t,2),e!==null&&(Fs(e,2),ba(e))}function qe(e,t,a){if(e.tag===3)rm(e,e,a);else for(;t!==null;){if(t.tag===3){rm(t,e,a);break}else if(t.tag===1){var i=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(an===null||!an.has(i))){e=ea(a,e),a=lf(2),i=Xa(t,a,2),i!==null&&(of(a,i,t,e),Fs(i,2),ba(i));break}}t=t.return}}function Nc(e,t,a){var i=e.pingCache;if(i===null){i=e.pingCache=new Uy;var c=new Set;i.set(t,c)}else c=i.get(t),c===void 0&&(c=new Set,i.set(t,c));c.has(a)||(vc=!0,c.add(a),e=Hy.bind(null,e,t,a),t.then(e,e))}function Hy(e,t,a){var i=e.pingCache;i!==null&&i.delete(t),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,Ve===e&&(Te&a)===a&&(tt===4||tt===3&&(Te&62914560)===Te&&300>dt()-Qr?(Le&2)===0&&ks(e,0):bc|=a,Ss===Te&&(Ss=0)),ba(e)}function lm(e,t){t===0&&(t=ed()),e=Nn(e,t),e!==null&&(Fs(e,t),ba(e))}function Gy(e){var t=e.memoizedState,a=0;t!==null&&(a=t.retryLane),lm(e,a)}function Yy(e,t){var a=0;switch(e.tag){case 31:case 13:var i=e.stateNode,c=e.memoizedState;c!==null&&(a=c.retryLane);break;case 19:i=e.stateNode;break;case 22:i=e.stateNode._retryCache;break;default:throw Error(r(314))}i!==null&&i.delete(t),lm(e,a)}function Vy(e,t){return Pe(e,t)}var tl=null,Es=null,Ec=!1,al=!1,Ac=!1,rn=0;function ba(e){e!==Es&&e.next===null&&(Es===null?tl=Es=e:Es=Es.next=e),al=!0,Ec||(Ec=!0,Iy())}function Di(e,t){if(!Ac&&al){Ac=!0;do for(var a=!1,i=tl;i!==null;){if(e!==0){var c=i.pendingLanes;if(c===0)var h=0;else{var g=i.suspendedLanes,x=i.pingedLanes;h=(1<<31-Lt(42|e)+1)-1,h&=c&~(g&~x),h=h&201326741?h&201326741|1:h?h|2:0}h!==0&&(a=!0,dm(i,h))}else h=Te,h=rr(i,i===Ve?h:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),(h&3)===0||Zs(i,h)||(a=!0,dm(i,h));i=i.next}while(a);Ac=!1}}function Py(){om()}function om(){al=Ec=!1;var e=0;rn!==0&&av()&&(e=rn);for(var t=dt(),a=null,i=tl;i!==null;){var c=i.next,h=cm(i,t);h===0?(i.next=null,a===null?tl=c:a.next=c,c===null&&(Es=a)):(a=i,(e!==0||(h&3)!==0)&&(al=!0)),i=c}ct!==0&&ct!==5||Di(e),rn!==0&&(rn=0)}function cm(e,t){for(var a=e.suspendedLanes,i=e.pingedLanes,c=e.expirationTimes,h=e.pendingLanes&-62914561;0<h;){var g=31-Lt(h),x=1<<g,E=c[g];E===-1?((x&a)===0||(x&i)!==0)&&(c[g]=vp(x,t)):E<=t&&(e.expiredLanes|=x),h&=~x}if(t=Ve,a=Te,a=rr(e,e===t?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),i=e.callbackNode,a===0||e===t&&($e===2||$e===9)||e.cancelPendingCommit!==null)return i!==null&&i!==null&&pt(i),e.callbackNode=null,e.callbackPriority=0;if((a&3)===0||Zs(e,a)){if(t=a&-a,t===e.callbackPriority)return t;switch(i!==null&&pt(i),Gl(a)){case 2:case 8:a=We;break;case 32:a=Ue;break;case 268435456:a=xn;break;default:a=Ue}return i=um.bind(null,e),a=Pe(a,i),e.callbackPriority=t,e.callbackNode=a,t}return i!==null&&i!==null&&pt(i),e.callbackPriority=2,e.callbackNode=null,2}function um(e,t){if(ct!==0&&ct!==5)return e.callbackNode=null,e.callbackPriority=0,null;var a=e.callbackNode;if(el()&&e.callbackNode!==a)return null;var i=Te;return i=rr(e,e===Ve?i:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),i===0?null:(Pf(e,i,t),cm(e,dt()),e.callbackNode!=null&&e.callbackNode===a?um.bind(null,e):null)}function dm(e,t){if(el())return null;Pf(e,t,!0)}function Iy(){sv(function(){(Le&6)!==0?Pe(Xe,Py):om()})}function Cc(){if(rn===0){var e=hs;e===0&&(e=nr,nr<<=1,(nr&261888)===0&&(nr=256)),rn=e}return rn}function hm(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:ur(""+e)}function fm(e,t){var a=t.ownerDocument.createElement("input");return a.name=t.name,a.value=t.value,e.id&&a.setAttribute("form",e.id),t.parentNode.insertBefore(a,t),e=new FormData(e),a.parentNode.removeChild(a),e}function Ky(e,t,a,i,c){if(t==="submit"&&a&&a.stateNode===c){var h=hm((c[At]||null).action),g=i.submitter;g&&(t=(t=g[At]||null)?hm(t.formAction):g.getAttribute("formAction"),t!==null&&(h=t,g=null));var x=new mr("action","action",null,i,c);e.push({event:x,listeners:[{instance:null,listener:function(){if(i.defaultPrevented){if(rn!==0){var E=g?fm(c,g):new FormData(c);Jo(a,{pending:!0,data:E,method:c.method,action:h},null,E)}}else typeof h=="function"&&(x.preventDefault(),E=g?fm(c,g):new FormData(c),Jo(a,{pending:!0,data:E,method:c.method,action:h},h,E))},currentTarget:c}]})}}for(var Tc=0;Tc<ho.length;Tc++){var Oc=ho[Tc],Qy=Oc.toLowerCase(),Jy=Oc[0].toUpperCase()+Oc.slice(1);ca(Qy,"on"+Jy)}ca(Yd,"onAnimationEnd"),ca(Vd,"onAnimationIteration"),ca(Pd,"onAnimationStart"),ca("dblclick","onDoubleClick"),ca("focusin","onFocus"),ca("focusout","onBlur"),ca(dy,"onTransitionRun"),ca(hy,"onTransitionStart"),ca(fy,"onTransitionCancel"),ca(Id,"onTransitionEnd"),Fn("onMouseEnter",["mouseout","mouseover"]),Fn("onMouseLeave",["mouseout","mouseover"]),Fn("onPointerEnter",["pointerout","pointerover"]),Fn("onPointerLeave",["pointerout","pointerover"]),_n("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),_n("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),_n("onBeforeInput",["compositionend","keypress","textInput","paste"]),_n("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),_n("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),_n("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ri="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Xy=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ri));function mm(e,t){t=(t&4)!==0;for(var a=0;a<e.length;a++){var i=e[a],c=i.event;i=i.listeners;e:{var h=void 0;if(t)for(var g=i.length-1;0<=g;g--){var x=i[g],E=x.instance,L=x.currentTarget;if(x=x.listener,E!==h&&c.isPropagationStopped())break e;h=x,c.currentTarget=L;try{h(c)}catch(J){yr(J)}c.currentTarget=null,h=E}else for(g=0;g<i.length;g++){if(x=i[g],E=x.instance,L=x.currentTarget,x=x.listener,E!==h&&c.isPropagationStopped())break e;h=x,c.currentTarget=L;try{h(c)}catch(J){yr(J)}c.currentTarget=null,h=E}}}}function Ce(e,t){var a=t[Yl];a===void 0&&(a=t[Yl]=new Set);var i=e+"__bubble";a.has(i)||(gm(t,e,2,!1),a.add(i))}function Dc(e,t,a){var i=0;t&&(i|=4),gm(a,e,i,t)}var nl="_reactListening"+Math.random().toString(36).slice(2);function Rc(e){if(!e[nl]){e[nl]=!0,ld.forEach(function(a){a!=="selectionchange"&&(Xy.has(a)||Dc(a,!1,e),Dc(a,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[nl]||(t[nl]=!0,Dc("selectionchange",!1,t))}}function gm(e,t,a,i){switch(Vm(t)){case 2:var c=jv;break;case 8:c=kv;break;default:c=Qc}a=c.bind(null,t,a,e),c=void 0,!Fl||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(c=!0),i?c!==void 0?e.addEventListener(t,a,{capture:!0,passive:c}):e.addEventListener(t,a,!0):c!==void 0?e.addEventListener(t,a,{passive:c}):e.addEventListener(t,a,!1)}function zc(e,t,a,i,c){var h=i;if((t&1)===0&&(t&2)===0&&i!==null)e:for(;;){if(i===null)return;var g=i.tag;if(g===3||g===4){var x=i.stateNode.containerInfo;if(x===c)break;if(g===4)for(g=i.return;g!==null;){var E=g.tag;if((E===3||E===4)&&g.stateNode.containerInfo===c)return;g=g.return}for(;x!==null;){if(g=Jn(x),g===null)return;if(E=g.tag,E===5||E===6||E===26||E===27){i=h=g;continue e}x=x.parentNode}}i=i.return}bd(function(){var L=h,J=Xl(a),ee=[];e:{var H=Kd.get(e);if(H!==void 0){var V=mr,fe=e;switch(e){case"keypress":if(hr(a)===0)break e;case"keydown":case"keyup":V=Yp;break;case"focusin":fe="focus",V=ao;break;case"focusout":fe="blur",V=ao;break;case"beforeblur":case"afterblur":V=ao;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":V=_d;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":V=Op;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":V=Ip;break;case Yd:case Vd:case Pd:V=zp;break;case Id:V=Qp;break;case"scroll":case"scrollend":V=Cp;break;case"wheel":V=Xp;break;case"copy":case"cut":case"paste":V=Up;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":V=jd;break;case"toggle":case"beforetoggle":V=Fp}var we=(t&4)!==0,Ye=!we&&(e==="scroll"||e==="scrollend"),D=we?H!==null?H+"Capture":null:H;we=[];for(var A=L,U;A!==null;){var W=A;if(U=W.stateNode,W=W.tag,W!==5&&W!==26&&W!==27||U===null||D===null||(W=ti(A,D),W!=null&&we.push(zi(A,W,U))),Ye)break;A=A.return}0<we.length&&(H=new V(H,fe,null,a,J),ee.push({event:H,listeners:we}))}}if((t&7)===0){e:{if(H=e==="mouseover"||e==="pointerover",V=e==="mouseout"||e==="pointerout",H&&a!==Jl&&(fe=a.relatedTarget||a.fromElement)&&(Jn(fe)||fe[Qn]))break e;if((V||H)&&(H=J.window===J?J:(H=J.ownerDocument)?H.defaultView||H.parentWindow:window,V?(fe=a.relatedTarget||a.toElement,V=L,fe=fe?Jn(fe):null,fe!==null&&(Ye=d(fe),we=fe.tag,fe!==Ye||we!==5&&we!==27&&we!==6)&&(fe=null)):(V=null,fe=L),V!==fe)){if(we=_d,W="onMouseLeave",D="onMouseEnter",A="mouse",(e==="pointerout"||e==="pointerover")&&(we=jd,W="onPointerLeave",D="onPointerEnter",A="pointer"),Ye=V==null?H:ei(V),U=fe==null?H:ei(fe),H=new we(W,A+"leave",V,a,J),H.target=Ye,H.relatedTarget=U,W=null,Jn(J)===L&&(we=new we(D,A+"enter",fe,a,J),we.target=U,we.relatedTarget=Ye,W=we),Ye=W,V&&fe)t:{for(we=Zy,D=V,A=fe,U=0,W=D;W;W=we(W))U++;W=0;for(var ve=A;ve;ve=we(ve))W++;for(;0<U-W;)D=we(D),U--;for(;0<W-U;)A=we(A),W--;for(;U--;){if(D===A||A!==null&&D===A.alternate){we=D;break t}D=we(D),A=we(A)}we=null}else we=null;V!==null&&pm(ee,H,V,we,!1),fe!==null&&Ye!==null&&pm(ee,Ye,fe,we,!0)}}e:{if(H=L?ei(L):window,V=H.nodeName&&H.nodeName.toLowerCase(),V==="select"||V==="input"&&H.type==="file")var ze=Dd;else if(Td(H))if(Rd)ze=oy;else{ze=ry;var ge=iy}else V=H.nodeName,!V||V.toLowerCase()!=="input"||H.type!=="checkbox"&&H.type!=="radio"?L&&Ql(L.elementType)&&(ze=Dd):ze=ly;if(ze&&(ze=ze(e,L))){Od(ee,ze,a,J);break e}ge&&ge(e,H,L),e==="focusout"&&L&&H.type==="number"&&L.memoizedProps.value!=null&&Kl(H,"number",H.value)}switch(ge=L?ei(L):window,e){case"focusin":(Td(ge)||ge.contentEditable==="true")&&(ss=ge,oo=L,ci=null);break;case"focusout":ci=oo=ss=null;break;case"mousedown":co=!0;break;case"contextmenu":case"mouseup":case"dragend":co=!1,Hd(ee,a,J);break;case"selectionchange":if(uy)break;case"keydown":case"keyup":Hd(ee,a,J)}var Ne;if(so)e:{switch(e){case"compositionstart":var Oe="onCompositionStart";break e;case"compositionend":Oe="onCompositionEnd";break e;case"compositionupdate":Oe="onCompositionUpdate";break e}Oe=void 0}else ns?Ad(e,a)&&(Oe="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(Oe="onCompositionStart");Oe&&(kd&&a.locale!=="ko"&&(ns||Oe!=="onCompositionStart"?Oe==="onCompositionEnd"&&ns&&(Ne=xd()):(Ya=J,Wl="value"in Ya?Ya.value:Ya.textContent,ns=!0)),ge=sl(L,Oe),0<ge.length&&(Oe=new Sd(Oe,e,null,a,J),ee.push({event:Oe,listeners:ge}),Ne?Oe.data=Ne:(Ne=Cd(a),Ne!==null&&(Oe.data=Ne)))),(Ne=ey?ty(e,a):ay(e,a))&&(Oe=sl(L,"onBeforeInput"),0<Oe.length&&(ge=new Sd("onBeforeInput","beforeinput",null,a,J),ee.push({event:ge,listeners:Oe}),ge.data=Ne)),Ky(ee,e,L,a,J)}mm(ee,t)})}function zi(e,t,a){return{instance:e,listener:t,currentTarget:a}}function sl(e,t){for(var a=t+"Capture",i=[];e!==null;){var c=e,h=c.stateNode;if(c=c.tag,c!==5&&c!==26&&c!==27||h===null||(c=ti(e,a),c!=null&&i.unshift(zi(e,c,h)),c=ti(e,t),c!=null&&i.push(zi(e,c,h))),e.tag===3)return i;e=e.return}return[]}function Zy(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function pm(e,t,a,i,c){for(var h=t._reactName,g=[];a!==null&&a!==i;){var x=a,E=x.alternate,L=x.stateNode;if(x=x.tag,E!==null&&E===i)break;x!==5&&x!==26&&x!==27||L===null||(E=L,c?(L=ti(a,h),L!=null&&g.unshift(zi(a,L,E))):c||(L=ti(a,h),L!=null&&g.push(zi(a,L,E)))),a=a.return}g.length!==0&&e.push({event:t,listeners:g})}var Fy=/\r\n?/g,Wy=/\u0000|\uFFFD/g;function ym(e){return(typeof e=="string"?e:""+e).replace(Fy,`
`).replace(Wy,"")}function vm(e,t){return t=ym(t),ym(e)===t}function Ge(e,t,a,i,c,h){switch(a){case"children":typeof i=="string"?t==="body"||t==="textarea"&&i===""||es(e,i):(typeof i=="number"||typeof i=="bigint")&&t!=="body"&&es(e,""+i);break;case"className":or(e,"class",i);break;case"tabIndex":or(e,"tabindex",i);break;case"dir":case"role":case"viewBox":case"width":case"height":or(e,a,i);break;case"style":yd(e,i,h);break;case"data":if(t!=="object"){or(e,"data",i);break}case"src":case"href":if(i===""&&(t!=="a"||a!=="href")){e.removeAttribute(a);break}if(i==null||typeof i=="function"||typeof i=="symbol"||typeof i=="boolean"){e.removeAttribute(a);break}i=ur(""+i),e.setAttribute(a,i);break;case"action":case"formAction":if(typeof i=="function"){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof h=="function"&&(a==="formAction"?(t!=="input"&&Ge(e,t,"name",c.name,c,null),Ge(e,t,"formEncType",c.formEncType,c,null),Ge(e,t,"formMethod",c.formMethod,c,null),Ge(e,t,"formTarget",c.formTarget,c,null)):(Ge(e,t,"encType",c.encType,c,null),Ge(e,t,"method",c.method,c,null),Ge(e,t,"target",c.target,c,null)));if(i==null||typeof i=="symbol"||typeof i=="boolean"){e.removeAttribute(a);break}i=ur(""+i),e.setAttribute(a,i);break;case"onClick":i!=null&&(e.onclick=wa);break;case"onScroll":i!=null&&Ce("scroll",e);break;case"onScrollEnd":i!=null&&Ce("scrollend",e);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(r(61));if(a=i.__html,a!=null){if(c.children!=null)throw Error(r(60));e.innerHTML=a}}break;case"multiple":e.multiple=i&&typeof i!="function"&&typeof i!="symbol";break;case"muted":e.muted=i&&typeof i!="function"&&typeof i!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(i==null||typeof i=="function"||typeof i=="boolean"||typeof i=="symbol"){e.removeAttribute("xlink:href");break}a=ur(""+i),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":i!=null&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(a,""+i):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":i&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":i===!0?e.setAttribute(a,""):i!==!1&&i!=null&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(a,i):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":i!=null&&typeof i!="function"&&typeof i!="symbol"&&!isNaN(i)&&1<=i?e.setAttribute(a,i):e.removeAttribute(a);break;case"rowSpan":case"start":i==null||typeof i=="function"||typeof i=="symbol"||isNaN(i)?e.removeAttribute(a):e.setAttribute(a,i);break;case"popover":Ce("beforetoggle",e),Ce("toggle",e),lr(e,"popover",i);break;case"xlinkActuate":xa(e,"http://www.w3.org/1999/xlink","xlink:actuate",i);break;case"xlinkArcrole":xa(e,"http://www.w3.org/1999/xlink","xlink:arcrole",i);break;case"xlinkRole":xa(e,"http://www.w3.org/1999/xlink","xlink:role",i);break;case"xlinkShow":xa(e,"http://www.w3.org/1999/xlink","xlink:show",i);break;case"xlinkTitle":xa(e,"http://www.w3.org/1999/xlink","xlink:title",i);break;case"xlinkType":xa(e,"http://www.w3.org/1999/xlink","xlink:type",i);break;case"xmlBase":xa(e,"http://www.w3.org/XML/1998/namespace","xml:base",i);break;case"xmlLang":xa(e,"http://www.w3.org/XML/1998/namespace","xml:lang",i);break;case"xmlSpace":xa(e,"http://www.w3.org/XML/1998/namespace","xml:space",i);break;case"is":lr(e,"is",i);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Ep.get(a)||a,lr(e,a,i))}}function Mc(e,t,a,i,c,h){switch(a){case"style":yd(e,i,h);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(r(61));if(a=i.__html,a!=null){if(c.children!=null)throw Error(r(60));e.innerHTML=a}}break;case"children":typeof i=="string"?es(e,i):(typeof i=="number"||typeof i=="bigint")&&es(e,""+i);break;case"onScroll":i!=null&&Ce("scroll",e);break;case"onScrollEnd":i!=null&&Ce("scrollend",e);break;case"onClick":i!=null&&(e.onclick=wa);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!od.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(c=a.endsWith("Capture"),t=a.slice(2,c?a.length-7:void 0),h=e[At]||null,h=h!=null?h[a]:null,typeof h=="function"&&e.removeEventListener(t,h,c),typeof i=="function")){typeof h!="function"&&h!==null&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(t,i,c);break e}a in e?e[a]=i:i===!0?e.setAttribute(a,""):lr(e,a,i)}}}function wt(e,t,a){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ce("error",e),Ce("load",e);var i=!1,c=!1,h;for(h in a)if(a.hasOwnProperty(h)){var g=a[h];if(g!=null)switch(h){case"src":i=!0;break;case"srcSet":c=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,t));default:Ge(e,t,h,g,a,null)}}c&&Ge(e,t,"srcSet",a.srcSet,a,null),i&&Ge(e,t,"src",a.src,a,null);return;case"input":Ce("invalid",e);var x=h=g=c=null,E=null,L=null;for(i in a)if(a.hasOwnProperty(i)){var J=a[i];if(J!=null)switch(i){case"name":c=J;break;case"type":g=J;break;case"checked":E=J;break;case"defaultChecked":L=J;break;case"value":h=J;break;case"defaultValue":x=J;break;case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(r(137,t));break;default:Ge(e,t,i,J,a,null)}}fd(e,h,x,E,L,g,c,!1);return;case"select":Ce("invalid",e),i=g=h=null;for(c in a)if(a.hasOwnProperty(c)&&(x=a[c],x!=null))switch(c){case"value":h=x;break;case"defaultValue":g=x;break;case"multiple":i=x;default:Ge(e,t,c,x,a,null)}t=h,a=g,e.multiple=!!i,t!=null?Wn(e,!!i,t,!1):a!=null&&Wn(e,!!i,a,!0);return;case"textarea":Ce("invalid",e),h=c=i=null;for(g in a)if(a.hasOwnProperty(g)&&(x=a[g],x!=null))switch(g){case"value":i=x;break;case"defaultValue":c=x;break;case"children":h=x;break;case"dangerouslySetInnerHTML":if(x!=null)throw Error(r(91));break;default:Ge(e,t,g,x,a,null)}gd(e,i,c,h);return;case"option":for(E in a)if(a.hasOwnProperty(E)&&(i=a[E],i!=null))switch(E){case"selected":e.selected=i&&typeof i!="function"&&typeof i!="symbol";break;default:Ge(e,t,E,i,a,null)}return;case"dialog":Ce("beforetoggle",e),Ce("toggle",e),Ce("cancel",e),Ce("close",e);break;case"iframe":case"object":Ce("load",e);break;case"video":case"audio":for(i=0;i<Ri.length;i++)Ce(Ri[i],e);break;case"image":Ce("error",e),Ce("load",e);break;case"details":Ce("toggle",e);break;case"embed":case"source":case"link":Ce("error",e),Ce("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(L in a)if(a.hasOwnProperty(L)&&(i=a[L],i!=null))switch(L){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,t));default:Ge(e,t,L,i,a,null)}return;default:if(Ql(t)){for(J in a)a.hasOwnProperty(J)&&(i=a[J],i!==void 0&&Mc(e,t,J,i,a,void 0));return}}for(x in a)a.hasOwnProperty(x)&&(i=a[x],i!=null&&Ge(e,t,x,i,a,null))}function ev(e,t,a,i){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var c=null,h=null,g=null,x=null,E=null,L=null,J=null;for(V in a){var ee=a[V];if(a.hasOwnProperty(V)&&ee!=null)switch(V){case"checked":break;case"value":break;case"defaultValue":E=ee;default:i.hasOwnProperty(V)||Ge(e,t,V,null,i,ee)}}for(var H in i){var V=i[H];if(ee=a[H],i.hasOwnProperty(H)&&(V!=null||ee!=null))switch(H){case"type":h=V;break;case"name":c=V;break;case"checked":L=V;break;case"defaultChecked":J=V;break;case"value":g=V;break;case"defaultValue":x=V;break;case"children":case"dangerouslySetInnerHTML":if(V!=null)throw Error(r(137,t));break;default:V!==ee&&Ge(e,t,H,V,i,ee)}}Il(e,g,x,E,L,J,h,c);return;case"select":V=g=x=H=null;for(h in a)if(E=a[h],a.hasOwnProperty(h)&&E!=null)switch(h){case"value":break;case"multiple":V=E;default:i.hasOwnProperty(h)||Ge(e,t,h,null,i,E)}for(c in i)if(h=i[c],E=a[c],i.hasOwnProperty(c)&&(h!=null||E!=null))switch(c){case"value":H=h;break;case"defaultValue":x=h;break;case"multiple":g=h;default:h!==E&&Ge(e,t,c,h,i,E)}t=x,a=g,i=V,H!=null?Wn(e,!!a,H,!1):!!i!=!!a&&(t!=null?Wn(e,!!a,t,!0):Wn(e,!!a,a?[]:"",!1));return;case"textarea":V=H=null;for(x in a)if(c=a[x],a.hasOwnProperty(x)&&c!=null&&!i.hasOwnProperty(x))switch(x){case"value":break;case"children":break;default:Ge(e,t,x,null,i,c)}for(g in i)if(c=i[g],h=a[g],i.hasOwnProperty(g)&&(c!=null||h!=null))switch(g){case"value":H=c;break;case"defaultValue":V=c;break;case"children":break;case"dangerouslySetInnerHTML":if(c!=null)throw Error(r(91));break;default:c!==h&&Ge(e,t,g,c,i,h)}md(e,H,V);return;case"option":for(var fe in a)if(H=a[fe],a.hasOwnProperty(fe)&&H!=null&&!i.hasOwnProperty(fe))switch(fe){case"selected":e.selected=!1;break;default:Ge(e,t,fe,null,i,H)}for(E in i)if(H=i[E],V=a[E],i.hasOwnProperty(E)&&H!==V&&(H!=null||V!=null))switch(E){case"selected":e.selected=H&&typeof H!="function"&&typeof H!="symbol";break;default:Ge(e,t,E,H,i,V)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var we in a)H=a[we],a.hasOwnProperty(we)&&H!=null&&!i.hasOwnProperty(we)&&Ge(e,t,we,null,i,H);for(L in i)if(H=i[L],V=a[L],i.hasOwnProperty(L)&&H!==V&&(H!=null||V!=null))switch(L){case"children":case"dangerouslySetInnerHTML":if(H!=null)throw Error(r(137,t));break;default:Ge(e,t,L,H,i,V)}return;default:if(Ql(t)){for(var Ye in a)H=a[Ye],a.hasOwnProperty(Ye)&&H!==void 0&&!i.hasOwnProperty(Ye)&&Mc(e,t,Ye,void 0,i,H);for(J in i)H=i[J],V=a[J],!i.hasOwnProperty(J)||H===V||H===void 0&&V===void 0||Mc(e,t,J,H,i,V);return}}for(var D in a)H=a[D],a.hasOwnProperty(D)&&H!=null&&!i.hasOwnProperty(D)&&Ge(e,t,D,null,i,H);for(ee in i)H=i[ee],V=a[ee],!i.hasOwnProperty(ee)||H===V||H==null&&V==null||Ge(e,t,ee,H,i,V)}function bm(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function tv(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,a=performance.getEntriesByType("resource"),i=0;i<a.length;i++){var c=a[i],h=c.transferSize,g=c.initiatorType,x=c.duration;if(h&&x&&bm(g)){for(g=0,x=c.responseEnd,i+=1;i<a.length;i++){var E=a[i],L=E.startTime;if(L>x)break;var J=E.transferSize,ee=E.initiatorType;J&&bm(ee)&&(E=E.responseEnd,g+=J*(E<x?1:(x-L)/(E-L)))}if(--i,t+=8*(h+g)/(c.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var Uc=null,Lc=null;function il(e){return e.nodeType===9?e:e.ownerDocument}function xm(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function wm(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function Bc(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var $c=null;function av(){var e=window.event;return e&&e.type==="popstate"?e===$c?!1:($c=e,!0):($c=null,!1)}var _m=typeof setTimeout=="function"?setTimeout:void 0,nv=typeof clearTimeout=="function"?clearTimeout:void 0,Sm=typeof Promise=="function"?Promise:void 0,sv=typeof queueMicrotask=="function"?queueMicrotask:typeof Sm<"u"?function(e){return Sm.resolve(null).then(e).catch(iv)}:_m;function iv(e){setTimeout(function(){throw e})}function ln(e){return e==="head"}function jm(e,t){var a=t,i=0;do{var c=a.nextSibling;if(e.removeChild(a),c&&c.nodeType===8)if(a=c.data,a==="/$"||a==="/&"){if(i===0){e.removeChild(c),Os(t);return}i--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")i++;else if(a==="html")Mi(e.ownerDocument.documentElement);else if(a==="head"){a=e.ownerDocument.head,Mi(a);for(var h=a.firstChild;h;){var g=h.nextSibling,x=h.nodeName;h[Ws]||x==="SCRIPT"||x==="STYLE"||x==="LINK"&&h.rel.toLowerCase()==="stylesheet"||a.removeChild(h),h=g}}else a==="body"&&Mi(e.ownerDocument.body);a=c}while(a);Os(t)}function km(e,t){var a=e;e=0;do{var i=a.nextSibling;if(a.nodeType===1?t?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(t?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),i&&i.nodeType===8)if(a=i.data,a==="/$"){if(e===0)break;e--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||e++;a=i}while(a)}function qc(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var a=t;switch(t=t.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":qc(a),Vl(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}e.removeChild(a)}}function rv(e,t,a,i){for(;e.nodeType===1;){var c=a;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!i&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(i){if(!e[Ws])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(h=e.getAttribute("rel"),h==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(h!==c.rel||e.getAttribute("href")!==(c.href==null||c.href===""?null:c.href)||e.getAttribute("crossorigin")!==(c.crossOrigin==null?null:c.crossOrigin)||e.getAttribute("title")!==(c.title==null?null:c.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(h=e.getAttribute("src"),(h!==(c.src==null?null:c.src)||e.getAttribute("type")!==(c.type==null?null:c.type)||e.getAttribute("crossorigin")!==(c.crossOrigin==null?null:c.crossOrigin))&&h&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var h=c.name==null?null:""+c.name;if(c.type==="hidden"&&e.getAttribute("name")===h)return e}else return e;if(e=ia(e.nextSibling),e===null)break}return null}function lv(e,t,a){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=ia(e.nextSibling),e===null))return null;return e}function Nm(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=ia(e.nextSibling),e===null))return null;return e}function Hc(e){return e.data==="$?"||e.data==="$~"}function Gc(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function ov(e,t){var a=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||a.readyState!=="loading")t();else{var i=function(){t(),a.removeEventListener("DOMContentLoaded",i)};a.addEventListener("DOMContentLoaded",i),e._reactRetry=i}}function ia(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var Yc=null;function Em(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var a=e.data;if(a==="/$"||a==="/&"){if(t===0)return ia(e.nextSibling);t--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||t++}e=e.nextSibling}return null}function Am(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(t===0)return e;t--}else a!=="/$"&&a!=="/&"||t++}e=e.previousSibling}return null}function Cm(e,t,a){switch(t=il(a),e){case"html":if(e=t.documentElement,!e)throw Error(r(452));return e;case"head":if(e=t.head,!e)throw Error(r(453));return e;case"body":if(e=t.body,!e)throw Error(r(454));return e;default:throw Error(r(451))}}function Mi(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Vl(e)}var ra=new Map,Tm=new Set;function rl(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var La=z.d;z.d={f:cv,r:uv,D:dv,C:hv,L:fv,m:mv,X:pv,S:gv,M:yv};function cv(){var e=La.f(),t=Zr();return e||t}function uv(e){var t=Xn(e);t!==null&&t.tag===5&&t.type==="form"?Ih(t):La.r(e)}var As=typeof document>"u"?null:document;function Om(e,t,a){var i=As;if(i&&typeof t=="string"&&t){var c=Ft(t);c='link[rel="'+e+'"][href="'+c+'"]',typeof a=="string"&&(c+='[crossorigin="'+a+'"]'),Tm.has(c)||(Tm.add(c),e={rel:e,crossOrigin:a,href:t},i.querySelector(c)===null&&(t=i.createElement("link"),wt(t,"link",e),ht(t),i.head.appendChild(t)))}}function dv(e){La.D(e),Om("dns-prefetch",e,null)}function hv(e,t){La.C(e,t),Om("preconnect",e,t)}function fv(e,t,a){La.L(e,t,a);var i=As;if(i&&e&&t){var c='link[rel="preload"][as="'+Ft(t)+'"]';t==="image"&&a&&a.imageSrcSet?(c+='[imagesrcset="'+Ft(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(c+='[imagesizes="'+Ft(a.imageSizes)+'"]')):c+='[href="'+Ft(e)+'"]';var h=c;switch(t){case"style":h=Cs(e);break;case"script":h=Ts(e)}ra.has(h)||(e=w({rel:"preload",href:t==="image"&&a&&a.imageSrcSet?void 0:e,as:t},a),ra.set(h,e),i.querySelector(c)!==null||t==="style"&&i.querySelector(Ui(h))||t==="script"&&i.querySelector(Li(h))||(t=i.createElement("link"),wt(t,"link",e),ht(t),i.head.appendChild(t)))}}function mv(e,t){La.m(e,t);var a=As;if(a&&e){var i=t&&typeof t.as=="string"?t.as:"script",c='link[rel="modulepreload"][as="'+Ft(i)+'"][href="'+Ft(e)+'"]',h=c;switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":h=Ts(e)}if(!ra.has(h)&&(e=w({rel:"modulepreload",href:e},t),ra.set(h,e),a.querySelector(c)===null)){switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Li(h)))return}i=a.createElement("link"),wt(i,"link",e),ht(i),a.head.appendChild(i)}}}function gv(e,t,a){La.S(e,t,a);var i=As;if(i&&e){var c=Zn(i).hoistableStyles,h=Cs(e);t=t||"default";var g=c.get(h);if(!g){var x={loading:0,preload:null};if(g=i.querySelector(Ui(h)))x.loading=5;else{e=w({rel:"stylesheet",href:e,"data-precedence":t},a),(a=ra.get(h))&&Vc(e,a);var E=g=i.createElement("link");ht(E),wt(E,"link",e),E._p=new Promise(function(L,J){E.onload=L,E.onerror=J}),E.addEventListener("load",function(){x.loading|=1}),E.addEventListener("error",function(){x.loading|=2}),x.loading|=4,ll(g,t,i)}g={type:"stylesheet",instance:g,count:1,state:x},c.set(h,g)}}}function pv(e,t){La.X(e,t);var a=As;if(a&&e){var i=Zn(a).hoistableScripts,c=Ts(e),h=i.get(c);h||(h=a.querySelector(Li(c)),h||(e=w({src:e,async:!0},t),(t=ra.get(c))&&Pc(e,t),h=a.createElement("script"),ht(h),wt(h,"link",e),a.head.appendChild(h)),h={type:"script",instance:h,count:1,state:null},i.set(c,h))}}function yv(e,t){La.M(e,t);var a=As;if(a&&e){var i=Zn(a).hoistableScripts,c=Ts(e),h=i.get(c);h||(h=a.querySelector(Li(c)),h||(e=w({src:e,async:!0,type:"module"},t),(t=ra.get(c))&&Pc(e,t),h=a.createElement("script"),ht(h),wt(h,"link",e),a.head.appendChild(h)),h={type:"script",instance:h,count:1,state:null},i.set(c,h))}}function Dm(e,t,a,i){var c=(c=xe.current)?rl(c):null;if(!c)throw Error(r(446));switch(e){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(t=Cs(a.href),a=Zn(c).hoistableStyles,i=a.get(t),i||(i={type:"style",instance:null,count:0,state:null},a.set(t,i)),i):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){e=Cs(a.href);var h=Zn(c).hoistableStyles,g=h.get(e);if(g||(c=c.ownerDocument||c,g={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},h.set(e,g),(h=c.querySelector(Ui(e)))&&!h._p&&(g.instance=h,g.state.loading=5),ra.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},ra.set(e,a),h||vv(c,e,a,g.state))),t&&i===null)throw Error(r(528,""));return g}if(t&&i!==null)throw Error(r(529,""));return null;case"script":return t=a.async,a=a.src,typeof a=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=Ts(a),a=Zn(c).hoistableScripts,i=a.get(t),i||(i={type:"script",instance:null,count:0,state:null},a.set(t,i)),i):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,e))}}function Cs(e){return'href="'+Ft(e)+'"'}function Ui(e){return'link[rel="stylesheet"]['+e+"]"}function Rm(e){return w({},e,{"data-precedence":e.precedence,precedence:null})}function vv(e,t,a,i){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?i.loading=1:(t=e.createElement("link"),i.preload=t,t.addEventListener("load",function(){return i.loading|=1}),t.addEventListener("error",function(){return i.loading|=2}),wt(t,"link",a),ht(t),e.head.appendChild(t))}function Ts(e){return'[src="'+Ft(e)+'"]'}function Li(e){return"script[async]"+e}function zm(e,t,a){if(t.count++,t.instance===null)switch(t.type){case"style":var i=e.querySelector('style[data-href~="'+Ft(a.href)+'"]');if(i)return t.instance=i,ht(i),i;var c=w({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return i=(e.ownerDocument||e).createElement("style"),ht(i),wt(i,"style",c),ll(i,a.precedence,e),t.instance=i;case"stylesheet":c=Cs(a.href);var h=e.querySelector(Ui(c));if(h)return t.state.loading|=4,t.instance=h,ht(h),h;i=Rm(a),(c=ra.get(c))&&Vc(i,c),h=(e.ownerDocument||e).createElement("link"),ht(h);var g=h;return g._p=new Promise(function(x,E){g.onload=x,g.onerror=E}),wt(h,"link",i),t.state.loading|=4,ll(h,a.precedence,e),t.instance=h;case"script":return h=Ts(a.src),(c=e.querySelector(Li(h)))?(t.instance=c,ht(c),c):(i=a,(c=ra.get(h))&&(i=w({},a),Pc(i,c)),e=e.ownerDocument||e,c=e.createElement("script"),ht(c),wt(c,"link",i),e.head.appendChild(c),t.instance=c);case"void":return null;default:throw Error(r(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(i=t.instance,t.state.loading|=4,ll(i,a.precedence,e));return t.instance}function ll(e,t,a){for(var i=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),c=i.length?i[i.length-1]:null,h=c,g=0;g<i.length;g++){var x=i[g];if(x.dataset.precedence===t)h=x;else if(h!==c)break}h?h.parentNode.insertBefore(e,h.nextSibling):(t=a.nodeType===9?a.head:a,t.insertBefore(e,t.firstChild))}function Vc(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function Pc(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var ol=null;function Mm(e,t,a){if(ol===null){var i=new Map,c=ol=new Map;c.set(a,i)}else c=ol,i=c.get(a),i||(i=new Map,c.set(a,i));if(i.has(e))return i;for(i.set(e,null),a=a.getElementsByTagName(e),c=0;c<a.length;c++){var h=a[c];if(!(h[Ws]||h[yt]||e==="link"&&h.getAttribute("rel")==="stylesheet")&&h.namespaceURI!=="http://www.w3.org/2000/svg"){var g=h.getAttribute(t)||"";g=e+g;var x=i.get(g);x?x.push(h):i.set(g,[h])}}return i}function Um(e,t,a){e=e.ownerDocument||e,e.head.insertBefore(a,t==="title"?e.querySelector("head > title"):null)}function bv(e,t,a){if(a===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function Lm(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function xv(e,t,a,i){if(a.type==="stylesheet"&&(typeof i.media!="string"||matchMedia(i.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var c=Cs(i.href),h=t.querySelector(Ui(c));if(h){t=h._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=cl.bind(e),t.then(e,e)),a.state.loading|=4,a.instance=h,ht(h);return}h=t.ownerDocument||t,i=Rm(i),(c=ra.get(c))&&Vc(i,c),h=h.createElement("link"),ht(h);var g=h;g._p=new Promise(function(x,E){g.onload=x,g.onerror=E}),wt(h,"link",i),a.instance=h}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(a,t),(t=a.state.preload)&&(a.state.loading&3)===0&&(e.count++,a=cl.bind(e),t.addEventListener("load",a),t.addEventListener("error",a))}}var Ic=0;function wv(e,t){return e.stylesheets&&e.count===0&&dl(e,e.stylesheets),0<e.count||0<e.imgCount?function(a){var i=setTimeout(function(){if(e.stylesheets&&dl(e,e.stylesheets),e.unsuspend){var h=e.unsuspend;e.unsuspend=null,h()}},6e4+t);0<e.imgBytes&&Ic===0&&(Ic=62500*tv());var c=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&dl(e,e.stylesheets),e.unsuspend)){var h=e.unsuspend;e.unsuspend=null,h()}},(e.imgBytes>Ic?50:800)+t);return e.unsuspend=a,function(){e.unsuspend=null,clearTimeout(i),clearTimeout(c)}}:null}function cl(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)dl(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var ul=null;function dl(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,ul=new Map,t.forEach(_v,e),ul=null,cl.call(e))}function _v(e,t){if(!(t.state.loading&4)){var a=ul.get(e);if(a)var i=a.get(null);else{a=new Map,ul.set(e,a);for(var c=e.querySelectorAll("link[data-precedence],style[data-precedence]"),h=0;h<c.length;h++){var g=c[h];(g.nodeName==="LINK"||g.getAttribute("media")!=="not all")&&(a.set(g.dataset.precedence,g),i=g)}i&&a.set(null,i)}c=t.instance,g=c.getAttribute("data-precedence"),h=a.get(g)||i,h===i&&a.set(null,c),a.set(g,c),this.count++,i=cl.bind(this),c.addEventListener("load",i),c.addEventListener("error",i),h?h.parentNode.insertBefore(c,h.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(c,e.firstChild)),t.state.loading|=4}}var Bi={$$typeof:q,Provider:null,Consumer:null,_currentValue:re,_currentValue2:re,_threadCount:0};function Sv(e,t,a,i,c,h,g,x,E){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ql(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ql(0),this.hiddenUpdates=ql(null),this.identifierPrefix=i,this.onUncaughtError=c,this.onCaughtError=h,this.onRecoverableError=g,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=E,this.incompleteTransitions=new Map}function Bm(e,t,a,i,c,h,g,x,E,L,J,ee){return e=new Sv(e,t,a,g,E,L,J,ee,x),t=1,h===!0&&(t|=24),h=$t(3,null,null,t),e.current=h,h.stateNode=e,t=ko(),t.refCount++,e.pooledCache=t,t.refCount++,h.memoizedState={element:i,isDehydrated:a,cache:t},Co(h),e}function $m(e){return e?(e=ls,e):ls}function qm(e,t,a,i,c,h){c=$m(c),i.context===null?i.context=c:i.pendingContext=c,i=Ja(t),i.payload={element:a},h=h===void 0?null:h,h!==null&&(i.callback=h),a=Xa(e,i,t),a!==null&&(zt(a,e,t),pi(a,e,t))}function Hm(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<t?a:t}}function Kc(e,t){Hm(e,t),(e=e.alternate)&&Hm(e,t)}function Gm(e){if(e.tag===13||e.tag===31){var t=Nn(e,67108864);t!==null&&zt(t,e,67108864),Kc(e,67108864)}}function Ym(e){if(e.tag===13||e.tag===31){var t=Vt();t=Hl(t);var a=Nn(e,t);a!==null&&zt(a,e,t),Kc(e,t)}}var hl=!0;function jv(e,t,a,i){var c=M.T;M.T=null;var h=z.p;try{z.p=2,Qc(e,t,a,i)}finally{z.p=h,M.T=c}}function kv(e,t,a,i){var c=M.T;M.T=null;var h=z.p;try{z.p=8,Qc(e,t,a,i)}finally{z.p=h,M.T=c}}function Qc(e,t,a,i){if(hl){var c=Jc(i);if(c===null)zc(e,t,i,fl,a),Pm(e,i);else if(Ev(c,e,t,a,i))i.stopPropagation();else if(Pm(e,i),t&4&&-1<Nv.indexOf(e)){for(;c!==null;){var h=Xn(c);if(h!==null)switch(h.tag){case 3:if(h=h.stateNode,h.current.memoizedState.isDehydrated){var g=wn(h.pendingLanes);if(g!==0){var x=h;for(x.pendingLanes|=2,x.entangledLanes|=2;g;){var E=1<<31-Lt(g);x.entanglements[1]|=E,g&=~E}ba(h),(Le&6)===0&&(Jr=dt()+500,Di(0))}}break;case 31:case 13:x=Nn(h,2),x!==null&&zt(x,h,2),Zr(),Kc(h,2)}if(h=Jc(i),h===null&&zc(e,t,i,fl,a),h===c)break;c=h}c!==null&&i.stopPropagation()}else zc(e,t,i,null,a)}}function Jc(e){return e=Xl(e),Xc(e)}var fl=null;function Xc(e){if(fl=null,e=Jn(e),e!==null){var t=d(e);if(t===null)e=null;else{var a=t.tag;if(a===13){if(e=f(t),e!==null)return e;e=null}else if(a===31){if(e=m(t),e!==null)return e;e=null}else if(a===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return fl=e,null}function Vm(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Qs()){case Xe:return 2;case We:return 8;case Ue:case Xt:return 32;case xn:return 268435456;default:return 32}default:return 32}}var Zc=!1,on=null,cn=null,un=null,$i=new Map,qi=new Map,dn=[],Nv="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Pm(e,t){switch(e){case"focusin":case"focusout":on=null;break;case"dragenter":case"dragleave":cn=null;break;case"mouseover":case"mouseout":un=null;break;case"pointerover":case"pointerout":$i.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":qi.delete(t.pointerId)}}function Hi(e,t,a,i,c,h){return e===null||e.nativeEvent!==h?(e={blockedOn:t,domEventName:a,eventSystemFlags:i,nativeEvent:h,targetContainers:[c]},t!==null&&(t=Xn(t),t!==null&&Gm(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,c!==null&&t.indexOf(c)===-1&&t.push(c),e)}function Ev(e,t,a,i,c){switch(t){case"focusin":return on=Hi(on,e,t,a,i,c),!0;case"dragenter":return cn=Hi(cn,e,t,a,i,c),!0;case"mouseover":return un=Hi(un,e,t,a,i,c),!0;case"pointerover":var h=c.pointerId;return $i.set(h,Hi($i.get(h)||null,e,t,a,i,c)),!0;case"gotpointercapture":return h=c.pointerId,qi.set(h,Hi(qi.get(h)||null,e,t,a,i,c)),!0}return!1}function Im(e){var t=Jn(e.target);if(t!==null){var a=d(t);if(a!==null){if(t=a.tag,t===13){if(t=f(a),t!==null){e.blockedOn=t,id(e.priority,function(){Ym(a)});return}}else if(t===31){if(t=m(a),t!==null){e.blockedOn=t,id(e.priority,function(){Ym(a)});return}}else if(t===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ml(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var a=Jc(e.nativeEvent);if(a===null){a=e.nativeEvent;var i=new a.constructor(a.type,a);Jl=i,a.target.dispatchEvent(i),Jl=null}else return t=Xn(a),t!==null&&Gm(t),e.blockedOn=a,!1;t.shift()}return!0}function Km(e,t,a){ml(e)&&a.delete(t)}function Av(){Zc=!1,on!==null&&ml(on)&&(on=null),cn!==null&&ml(cn)&&(cn=null),un!==null&&ml(un)&&(un=null),$i.forEach(Km),qi.forEach(Km)}function gl(e,t){e.blockedOn===t&&(e.blockedOn=null,Zc||(Zc=!0,l.unstable_scheduleCallback(l.unstable_NormalPriority,Av)))}var pl=null;function Qm(e){pl!==e&&(pl=e,l.unstable_scheduleCallback(l.unstable_NormalPriority,function(){pl===e&&(pl=null);for(var t=0;t<e.length;t+=3){var a=e[t],i=e[t+1],c=e[t+2];if(typeof i!="function"){if(Xc(i||a)===null)continue;break}var h=Xn(a);h!==null&&(e.splice(t,3),t-=3,Jo(h,{pending:!0,data:c,method:a.method,action:i},i,c))}}))}function Os(e){function t(E){return gl(E,e)}on!==null&&gl(on,e),cn!==null&&gl(cn,e),un!==null&&gl(un,e),$i.forEach(t),qi.forEach(t);for(var a=0;a<dn.length;a++){var i=dn[a];i.blockedOn===e&&(i.blockedOn=null)}for(;0<dn.length&&(a=dn[0],a.blockedOn===null);)Im(a),a.blockedOn===null&&dn.shift();if(a=(e.ownerDocument||e).$$reactFormReplay,a!=null)for(i=0;i<a.length;i+=3){var c=a[i],h=a[i+1],g=c[At]||null;if(typeof h=="function")g||Qm(a);else if(g){var x=null;if(h&&h.hasAttribute("formAction")){if(c=h,g=h[At]||null)x=g.formAction;else if(Xc(c)!==null)continue}else x=g.action;typeof x=="function"?a[i+1]=x:(a.splice(i,3),i-=3),Qm(a)}}}function Jm(){function e(h){h.canIntercept&&h.info==="react-transition"&&h.intercept({handler:function(){return new Promise(function(g){return c=g})},focusReset:"manual",scroll:"manual"})}function t(){c!==null&&(c(),c=null),i||setTimeout(a,20)}function a(){if(!i&&!navigation.transition){var h=navigation.currentEntry;h&&h.url!=null&&navigation.navigate(h.url,{state:h.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var i=!1,c=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(a,100),function(){i=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),c!==null&&(c(),c=null)}}}function Fc(e){this._internalRoot=e}yl.prototype.render=Fc.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(r(409));var a=t.current,i=Vt();qm(a,i,e,t,null,null)},yl.prototype.unmount=Fc.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;qm(e.current,2,null,e,null,null),Zr(),t[Qn]=null}};function yl(e){this._internalRoot=e}yl.prototype.unstable_scheduleHydration=function(e){if(e){var t=sd();e={blockedOn:null,target:e,priority:t};for(var a=0;a<dn.length&&t!==0&&t<dn[a].priority;a++);dn.splice(a,0,e),a===0&&Im(e)}};var Xm=n.version;if(Xm!=="19.2.0")throw Error(r(527,Xm,"19.2.0"));z.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(r(188)):(e=Object.keys(e).join(","),Error(r(268,e)));return e=p(t),e=e!==null?b(e):null,e=e===null?null:e.stateNode,e};var Cv={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:M,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var vl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vl.isDisabled&&vl.supportsFiber)try{Xs=vl.inject(Cv),Ut=vl}catch{}}return Yi.createRoot=function(e,t){if(!u(e))throw Error(r(299));var a=!1,i="",c=af,h=nf,g=sf;return t!=null&&(t.unstable_strictMode===!0&&(a=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onUncaughtError!==void 0&&(c=t.onUncaughtError),t.onCaughtError!==void 0&&(h=t.onCaughtError),t.onRecoverableError!==void 0&&(g=t.onRecoverableError)),t=Bm(e,1,!1,null,null,a,i,null,c,h,g,Jm),e[Qn]=t.current,Rc(e),new Fc(t)},Yi.hydrateRoot=function(e,t,a){if(!u(e))throw Error(r(299));var i=!1,c="",h=af,g=nf,x=sf,E=null;return a!=null&&(a.unstable_strictMode===!0&&(i=!0),a.identifierPrefix!==void 0&&(c=a.identifierPrefix),a.onUncaughtError!==void 0&&(h=a.onUncaughtError),a.onCaughtError!==void 0&&(g=a.onCaughtError),a.onRecoverableError!==void 0&&(x=a.onRecoverableError),a.formState!==void 0&&(E=a.formState)),t=Bm(e,1,!0,t,a??null,i,c,E,h,g,x,Jm),t.context=$m(null),a=t.current,i=Vt(),i=Hl(i),c=Ja(i),c.callback=null,Xa(a,c,i),a=i,t.current.lanes=a,Fs(t,a),ba(t),e[Qn]=t.current,Rc(e),new yl(t)},Yi.version="19.2.0",Yi}var rg;function qv(){if(rg)return tu.exports;rg=1;function l(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(l)}catch(n){console.error(n)}}return l(),tu.exports=$v(),tu.exports}var Hv=qv();const Gv=Lu(Hv);var bu=function(l,n){return bu=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,r){s.__proto__=r}||function(s,r){for(var u in r)Object.prototype.hasOwnProperty.call(r,u)&&(s[u]=r[u])},bu(l,n)};function e0(l,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");bu(l,n);function s(){this.constructor=l}l.prototype=n===null?Object.create(n):(s.prototype=n.prototype,new s)}var Cl=function(){return Cl=Object.assign||function(n){for(var s,r=1,u=arguments.length;r<u;r++){s=arguments[r];for(var d in s)Object.prototype.hasOwnProperty.call(s,d)&&(n[d]=s[d])}return n},Cl.apply(this,arguments)};function Ps(l,n){var s={};for(var r in l)Object.prototype.hasOwnProperty.call(l,r)&&n.indexOf(r)<0&&(s[r]=l[r]);if(l!=null&&typeof Object.getOwnPropertySymbols=="function")for(var u=0,r=Object.getOwnPropertySymbols(l);u<r.length;u++)n.indexOf(r[u])<0&&Object.prototype.propertyIsEnumerable.call(l,r[u])&&(s[r[u]]=l[r[u]]);return s}function t0(l,n,s,r){var u=arguments.length,d=u<3?n:r===null?r=Object.getOwnPropertyDescriptor(n,s):r,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(l,n,s,r);else for(var m=l.length-1;m>=0;m--)(f=l[m])&&(d=(u<3?f(d):u>3?f(n,s,d):f(n,s))||d);return u>3&&d&&Object.defineProperty(n,s,d),d}function a0(l,n){return function(s,r){n(s,r,l)}}function n0(l,n,s,r,u,d){function f($){if($!==void 0&&typeof $!="function")throw new TypeError("Function expected");return $}for(var m=r.kind,y=m==="getter"?"get":m==="setter"?"set":"value",p=!n&&l?r.static?l:l.prototype:null,b=n||(p?Object.getOwnPropertyDescriptor(p,r.name):{}),w,S=!1,j=s.length-1;j>=0;j--){var C={};for(var R in r)C[R]=R==="access"?{}:r[R];for(var R in r.access)C.access[R]=r.access[R];C.addInitializer=function($){if(S)throw new TypeError("Cannot add initializers after decoration has completed");d.push(f($||null))};var k=(0,s[j])(m==="accessor"?{get:b.get,set:b.set}:b[y],C);if(m==="accessor"){if(k===void 0)continue;if(k===null||typeof k!="object")throw new TypeError("Object expected");(w=f(k.get))&&(b.get=w),(w=f(k.set))&&(b.set=w),(w=f(k.init))&&u.unshift(w)}else(w=f(k))&&(m==="field"?u.unshift(w):b[y]=w)}p&&Object.defineProperty(p,r.name,b),S=!0}function s0(l,n,s){for(var r=arguments.length>2,u=0;u<n.length;u++)s=r?n[u].call(l,s):n[u].call(l);return r?s:void 0}function i0(l){return typeof l=="symbol"?l:"".concat(l)}function r0(l,n,s){return typeof n=="symbol"&&(n=n.description?"[".concat(n.description,"]"):""),Object.defineProperty(l,"name",{configurable:!0,value:s?"".concat(s," ",n):n})}function l0(l,n){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(l,n)}function pe(l,n,s,r){function u(d){return d instanceof s?d:new s(function(f){f(d)})}return new(s||(s=Promise))(function(d,f){function m(b){try{p(r.next(b))}catch(w){f(w)}}function y(b){try{p(r.throw(b))}catch(w){f(w)}}function p(b){b.done?d(b.value):u(b.value).then(m,y)}p((r=r.apply(l,n||[])).next())})}function o0(l,n){var s={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},r,u,d,f=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return f.next=m(0),f.throw=m(1),f.return=m(2),typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function m(p){return function(b){return y([p,b])}}function y(p){if(r)throw new TypeError("Generator is already executing.");for(;f&&(f=0,p[0]&&(s=0)),s;)try{if(r=1,u&&(d=p[0]&2?u.return:p[0]?u.throw||((d=u.return)&&d.call(u),0):u.next)&&!(d=d.call(u,p[1])).done)return d;switch(u=0,d&&(p=[p[0]&2,d.value]),p[0]){case 0:case 1:d=p;break;case 4:return s.label++,{value:p[1],done:!1};case 5:s.label++,u=p[1],p=[0];continue;case 7:p=s.ops.pop(),s.trys.pop();continue;default:if(d=s.trys,!(d=d.length>0&&d[d.length-1])&&(p[0]===6||p[0]===2)){s=0;continue}if(p[0]===3&&(!d||p[1]>d[0]&&p[1]<d[3])){s.label=p[1];break}if(p[0]===6&&s.label<d[1]){s.label=d[1],d=p;break}if(d&&s.label<d[2]){s.label=d[2],s.ops.push(p);break}d[2]&&s.ops.pop(),s.trys.pop();continue}p=n.call(l,s)}catch(b){p=[6,b],u=0}finally{r=d=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}}var Ml=Object.create?(function(l,n,s,r){r===void 0&&(r=s);var u=Object.getOwnPropertyDescriptor(n,s);(!u||("get"in u?!n.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return n[s]}}),Object.defineProperty(l,r,u)}):(function(l,n,s,r){r===void 0&&(r=s),l[r]=n[s]});function c0(l,n){for(var s in l)s!=="default"&&!Object.prototype.hasOwnProperty.call(n,s)&&Ml(n,l,s)}function Tl(l){var n=typeof Symbol=="function"&&Symbol.iterator,s=n&&l[n],r=0;if(s)return s.call(l);if(l&&typeof l.length=="number")return{next:function(){return l&&r>=l.length&&(l=void 0),{value:l&&l[r++],done:!l}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")}function qu(l,n){var s=typeof Symbol=="function"&&l[Symbol.iterator];if(!s)return l;var r=s.call(l),u,d=[],f;try{for(;(n===void 0||n-- >0)&&!(u=r.next()).done;)d.push(u.value)}catch(m){f={error:m}}finally{try{u&&!u.done&&(s=r.return)&&s.call(r)}finally{if(f)throw f.error}}return d}function u0(){for(var l=[],n=0;n<arguments.length;n++)l=l.concat(qu(arguments[n]));return l}function d0(){for(var l=0,n=0,s=arguments.length;n<s;n++)l+=arguments[n].length;for(var r=Array(l),u=0,n=0;n<s;n++)for(var d=arguments[n],f=0,m=d.length;f<m;f++,u++)r[u]=d[f];return r}function h0(l,n,s){if(s||arguments.length===2)for(var r=0,u=n.length,d;r<u;r++)(d||!(r in n))&&(d||(d=Array.prototype.slice.call(n,0,r)),d[r]=n[r]);return l.concat(d||Array.prototype.slice.call(n))}function Gs(l){return this instanceof Gs?(this.v=l,this):new Gs(l)}function f0(l,n,s){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=s.apply(l,n||[]),u,d=[];return u=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),m("next"),m("throw"),m("return",f),u[Symbol.asyncIterator]=function(){return this},u;function f(j){return function(C){return Promise.resolve(C).then(j,w)}}function m(j,C){r[j]&&(u[j]=function(R){return new Promise(function(k,$){d.push([j,R,k,$])>1||y(j,R)})},C&&(u[j]=C(u[j])))}function y(j,C){try{p(r[j](C))}catch(R){S(d[0][3],R)}}function p(j){j.value instanceof Gs?Promise.resolve(j.value.v).then(b,w):S(d[0][2],j)}function b(j){y("next",j)}function w(j){y("throw",j)}function S(j,C){j(C),d.shift(),d.length&&y(d[0][0],d[0][1])}}function m0(l){var n,s;return n={},r("next"),r("throw",function(u){throw u}),r("return"),n[Symbol.iterator]=function(){return this},n;function r(u,d){n[u]=l[u]?function(f){return(s=!s)?{value:Gs(l[u](f)),done:!1}:d?d(f):f}:d}}function g0(l){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=l[Symbol.asyncIterator],s;return n?n.call(l):(l=typeof Tl=="function"?Tl(l):l[Symbol.iterator](),s={},r("next"),r("throw"),r("return"),s[Symbol.asyncIterator]=function(){return this},s);function r(d){s[d]=l[d]&&function(f){return new Promise(function(m,y){f=l[d](f),u(m,y,f.done,f.value)})}}function u(d,f,m,y){Promise.resolve(y).then(function(p){d({value:p,done:m})},f)}}function p0(l,n){return Object.defineProperty?Object.defineProperty(l,"raw",{value:n}):l.raw=n,l}var Yv=Object.create?(function(l,n){Object.defineProperty(l,"default",{enumerable:!0,value:n})}):function(l,n){l.default=n},xu=function(l){return xu=Object.getOwnPropertyNames||function(n){var s=[];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(s[s.length]=r);return s},xu(l)};function y0(l){if(l&&l.__esModule)return l;var n={};if(l!=null)for(var s=xu(l),r=0;r<s.length;r++)s[r]!=="default"&&Ml(n,l,s[r]);return Yv(n,l),n}function v0(l){return l&&l.__esModule?l:{default:l}}function b0(l,n,s,r){if(s==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof n=="function"?l!==n||!r:!n.has(l))throw new TypeError("Cannot read private member from an object whose class did not declare it");return s==="m"?r:s==="a"?r.call(l):r?r.value:n.get(l)}function x0(l,n,s,r,u){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!u)throw new TypeError("Private accessor was defined without a setter");if(typeof n=="function"?l!==n||!u:!n.has(l))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?u.call(l,s):u?u.value=s:n.set(l,s),s}function w0(l,n){if(n===null||typeof n!="object"&&typeof n!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof l=="function"?n===l:l.has(n)}function _0(l,n,s){if(n!=null){if(typeof n!="object"&&typeof n!="function")throw new TypeError("Object expected.");var r,u;if(s){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=n[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=n[Symbol.dispose],s&&(u=r)}if(typeof r!="function")throw new TypeError("Object not disposable.");u&&(r=function(){try{u.call(this)}catch(d){return Promise.reject(d)}}),l.stack.push({value:n,dispose:r,async:s})}else s&&l.stack.push({async:!0});return n}var Vv=typeof SuppressedError=="function"?SuppressedError:function(l,n,s){var r=new Error(s);return r.name="SuppressedError",r.error=l,r.suppressed=n,r};function S0(l){function n(d){l.error=l.hasError?new Vv(d,l.error,"An error was suppressed during disposal."):d,l.hasError=!0}var s,r=0;function u(){for(;s=l.stack.pop();)try{if(!s.async&&r===1)return r=0,l.stack.push(s),Promise.resolve().then(u);if(s.dispose){var d=s.dispose.call(s.value);if(s.async)return r|=2,Promise.resolve(d).then(u,function(f){return n(f),u()})}else r|=1}catch(f){n(f)}if(r===1)return l.hasError?Promise.reject(l.error):Promise.resolve();if(l.hasError)throw l.error}return u()}function j0(l,n){return typeof l=="string"&&/^\.\.?\//.test(l)?l.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(s,r,u,d,f){return r?n?".jsx":".js":u&&(!d||!f)?s:u+d+"."+f.toLowerCase()+"js"}):l}const Pv={__extends:e0,__assign:Cl,__rest:Ps,__decorate:t0,__param:a0,__esDecorate:n0,__runInitializers:s0,__propKey:i0,__setFunctionName:r0,__metadata:l0,__awaiter:pe,__generator:o0,__createBinding:Ml,__exportStar:c0,__values:Tl,__read:qu,__spread:u0,__spreadArrays:d0,__spreadArray:h0,__await:Gs,__asyncGenerator:f0,__asyncDelegator:m0,__asyncValues:g0,__makeTemplateObject:p0,__importStar:y0,__importDefault:v0,__classPrivateFieldGet:b0,__classPrivateFieldSet:x0,__classPrivateFieldIn:w0,__addDisposableResource:_0,__disposeResources:S0,__rewriteRelativeImportExtension:j0},Iv=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:_0,get __assign(){return Cl},__asyncDelegator:m0,__asyncGenerator:f0,__asyncValues:g0,__await:Gs,__awaiter:pe,__classPrivateFieldGet:b0,__classPrivateFieldIn:w0,__classPrivateFieldSet:x0,__createBinding:Ml,__decorate:t0,__disposeResources:S0,__esDecorate:n0,__exportStar:c0,__extends:e0,__generator:o0,__importDefault:v0,__importStar:y0,__makeTemplateObject:p0,__metadata:l0,__param:a0,__propKey:i0,__read:qu,__rest:Ps,__rewriteRelativeImportExtension:j0,__runInitializers:s0,__setFunctionName:r0,__spread:u0,__spreadArray:h0,__spreadArrays:d0,__values:Tl,default:Pv},Symbol.toStringTag,{value:"Module"})),Kv="modulepreload",Qv=function(l){return"/"+l},lg={},$a=function(n,s,r){let u=Promise.resolve();if(s&&s.length>0){let f=function(p){return Promise.all(p.map(b=>Promise.resolve(b).then(w=>({status:"fulfilled",value:w}),w=>({status:"rejected",reason:w}))))};document.getElementsByTagName("link");const m=document.querySelector("meta[property=csp-nonce]"),y=(m==null?void 0:m.nonce)||(m==null?void 0:m.getAttribute("nonce"));u=f(s.map(p=>{if(p=Qv(p),p in lg)return;lg[p]=!0;const b=p.endsWith(".css"),w=b?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${w}`))return;const S=document.createElement("link");if(S.rel=b?"stylesheet":Kv,b||(S.as="script"),S.crossOrigin="",S.href=p,y&&S.setAttribute("nonce",y),document.head.appendChild(S),b)return new Promise((j,C)=>{S.addEventListener("load",j),S.addEventListener("error",()=>C(new Error(`Unable to preload CSS for ${p}`)))})}))}function d(f){const m=new Event("vite:preloadError",{cancelable:!0});if(m.payload=f,window.dispatchEvent(m),!m.defaultPrevented)throw f}return u.then(f=>{for(const m of f||[])m.status==="rejected"&&d(m.reason);return n().catch(d)})},Jv=l=>{let n;return l?n=l:typeof fetch>"u"?n=(...s)=>$a(async()=>{const{default:r}=await Promise.resolve().then(()=>Pn);return{default:r}},void 0).then(({default:r})=>r(...s)):n=fetch,(...s)=>n(...s)};class Hu extends Error{constructor(n,s="FunctionsError",r){super(n),this.name=s,this.context=r}}class og extends Hu{constructor(n){super("Failed to send a request to the Edge Function","FunctionsFetchError",n)}}class cg extends Hu{constructor(n){super("Relay Error invoking the Edge Function","FunctionsRelayError",n)}}class ug extends Hu{constructor(n){super("Edge Function returned a non-2xx status code","FunctionsHttpError",n)}}var wu;(function(l){l.Any="any",l.ApNortheast1="ap-northeast-1",l.ApNortheast2="ap-northeast-2",l.ApSouth1="ap-south-1",l.ApSoutheast1="ap-southeast-1",l.ApSoutheast2="ap-southeast-2",l.CaCentral1="ca-central-1",l.EuCentral1="eu-central-1",l.EuWest1="eu-west-1",l.EuWest2="eu-west-2",l.EuWest3="eu-west-3",l.SaEast1="sa-east-1",l.UsEast1="us-east-1",l.UsWest1="us-west-1",l.UsWest2="us-west-2"})(wu||(wu={}));class Xv{constructor(n,{headers:s={},customFetch:r,region:u=wu.Any}={}){this.url=n,this.headers=s,this.region=u,this.fetch=Jv(r)}setAuth(n){this.headers.Authorization=`Bearer ${n}`}invoke(n){return pe(this,arguments,void 0,function*(s,r={}){var u;try{const{headers:d,method:f,body:m,signal:y}=r;let p={},{region:b}=r;b||(b=this.region);const w=new URL(`${this.url}/${s}`);b&&b!=="any"&&(p["x-region"]=b,w.searchParams.set("forceFunctionRegion",b));let S;m&&(d&&!Object.prototype.hasOwnProperty.call(d,"Content-Type")||!d)?typeof Blob<"u"&&m instanceof Blob||m instanceof ArrayBuffer?(p["Content-Type"]="application/octet-stream",S=m):typeof m=="string"?(p["Content-Type"]="text/plain",S=m):typeof FormData<"u"&&m instanceof FormData?S=m:(p["Content-Type"]="application/json",S=JSON.stringify(m)):S=m;const j=yield this.fetch(w.toString(),{method:f||"POST",headers:Object.assign(Object.assign(Object.assign({},p),this.headers),d),body:S,signal:y}).catch($=>{throw $.name==="AbortError"?$:new og($)}),C=j.headers.get("x-relay-error");if(C&&C==="true")throw new cg(j);if(!j.ok)throw new ug(j);let R=((u=j.headers.get("Content-Type"))!==null&&u!==void 0?u:"text/plain").split(";")[0].trim(),k;return R==="application/json"?k=yield j.json():R==="application/octet-stream"||R==="application/pdf"?k=yield j.blob():R==="text/event-stream"?k=j:R==="multipart/form-data"?k=yield j.formData():k=yield j.text(),{data:k,error:null,response:j}}catch(d){return d instanceof Error&&d.name==="AbortError"?{data:null,error:new og(d)}:{data:null,error:d,response:d instanceof ug||d instanceof cg?d.context:void 0}}})}}var jt={};const Is=Wg(Iv);var bl={},xl={},wl={},_l={},Sl={},Zv=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Ys=Zv();const Fv=Ys.fetch,k0=Ys.fetch.bind(Ys),N0=Ys.Headers,Wv=Ys.Request,eb=Ys.Response,Pn=Object.freeze(Object.defineProperty({__proto__:null,Headers:N0,Request:Wv,Response:eb,default:k0,fetch:Fv},Symbol.toStringTag,{value:"Module"})),tb=Wg(Pn);var jl={},dg;function E0(){if(dg)return jl;dg=1,Object.defineProperty(jl,"__esModule",{value:!0});class l extends Error{constructor(s){super(s.message),this.name="PostgrestError",this.details=s.details,this.hint=s.hint,this.code=s.code}}return jl.default=l,jl}var hg;function A0(){if(hg)return Sl;hg=1,Object.defineProperty(Sl,"__esModule",{value:!0});const l=Is,n=l.__importDefault(tb),s=l.__importDefault(E0());class r{constructor(d){var f,m;this.shouldThrowOnError=!1,this.method=d.method,this.url=d.url,this.headers=new Headers(d.headers),this.schema=d.schema,this.body=d.body,this.shouldThrowOnError=(f=d.shouldThrowOnError)!==null&&f!==void 0?f:!1,this.signal=d.signal,this.isMaybeSingle=(m=d.isMaybeSingle)!==null&&m!==void 0?m:!1,d.fetch?this.fetch=d.fetch:typeof fetch>"u"?this.fetch=n.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(d,f){return this.headers=new Headers(this.headers),this.headers.set(d,f),this}then(d,f){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const m=this.fetch;let y=m(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async p=>{var b,w,S,j;let C=null,R=null,k=null,$=p.status,B=p.statusText;if(p.ok){if(this.method!=="HEAD"){const Q=await p.text();Q===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((b=this.headers.get("Accept"))===null||b===void 0)&&b.includes("application/vnd.pgrst.plan+text"))?R=Q:R=JSON.parse(Q))}const T=(w=this.headers.get("Prefer"))===null||w===void 0?void 0:w.match(/count=(exact|planned|estimated)/),Z=(S=p.headers.get("content-range"))===null||S===void 0?void 0:S.split("/");T&&Z&&Z.length>1&&(k=parseInt(Z[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(R)&&(R.length>1?(C={code:"PGRST116",details:`Results contain ${R.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},R=null,k=null,$=406,B="Not Acceptable"):R.length===1?R=R[0]:R=null)}else{const T=await p.text();try{C=JSON.parse(T),Array.isArray(C)&&p.status===404&&(R=[],C=null,$=200,B="OK")}catch{p.status===404&&T===""?($=204,B="No Content"):C={message:T}}if(C&&this.isMaybeSingle&&(!((j=C==null?void 0:C.details)===null||j===void 0)&&j.includes("0 rows"))&&(C=null,$=200,B="OK"),C&&this.shouldThrowOnError)throw new s.default(C)}return{error:C,data:R,count:k,status:$,statusText:B}});return this.shouldThrowOnError||(y=y.catch(p=>{var b,w,S;return{error:{message:`${(b=p==null?void 0:p.name)!==null&&b!==void 0?b:"FetchError"}: ${p==null?void 0:p.message}`,details:`${(w=p==null?void 0:p.stack)!==null&&w!==void 0?w:""}`,hint:"",code:`${(S=p==null?void 0:p.code)!==null&&S!==void 0?S:""}`},data:null,count:null,status:0,statusText:""}})),y.then(d,f)}returns(){return this}overrideTypes(){return this}}return Sl.default=r,Sl}var fg;function C0(){if(fg)return _l;fg=1,Object.defineProperty(_l,"__esModule",{value:!0});const n=Is.__importDefault(A0());class s extends n.default{select(u){let d=!1;const f=(u??"*").split("").map(m=>/\s/.test(m)&&!d?"":(m==='"'&&(d=!d),m)).join("");return this.url.searchParams.set("select",f),this.headers.append("Prefer","return=representation"),this}order(u,{ascending:d=!0,nullsFirst:f,foreignTable:m,referencedTable:y=m}={}){const p=y?`${y}.order`:"order",b=this.url.searchParams.get(p);return this.url.searchParams.set(p,`${b?`${b},`:""}${u}.${d?"asc":"desc"}${f===void 0?"":f?".nullsfirst":".nullslast"}`),this}limit(u,{foreignTable:d,referencedTable:f=d}={}){const m=typeof f>"u"?"limit":`${f}.limit`;return this.url.searchParams.set(m,`${u}`),this}range(u,d,{foreignTable:f,referencedTable:m=f}={}){const y=typeof m>"u"?"offset":`${m}.offset`,p=typeof m>"u"?"limit":`${m}.limit`;return this.url.searchParams.set(y,`${u}`),this.url.searchParams.set(p,`${d-u+1}`),this}abortSignal(u){return this.signal=u,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:u=!1,verbose:d=!1,settings:f=!1,buffers:m=!1,wal:y=!1,format:p="text"}={}){var b;const w=[u?"analyze":null,d?"verbose":null,f?"settings":null,m?"buffers":null,y?"wal":null].filter(Boolean).join("|"),S=(b=this.headers.get("Accept"))!==null&&b!==void 0?b:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${p}; for="${S}"; options=${w};`),p==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(u){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${u}`),this}}return _l.default=s,_l}var mg;function Gu(){if(mg)return wl;mg=1,Object.defineProperty(wl,"__esModule",{value:!0});const n=Is.__importDefault(C0()),s=new RegExp("[,()]");class r extends n.default{eq(d,f){return this.url.searchParams.append(d,`eq.${f}`),this}neq(d,f){return this.url.searchParams.append(d,`neq.${f}`),this}gt(d,f){return this.url.searchParams.append(d,`gt.${f}`),this}gte(d,f){return this.url.searchParams.append(d,`gte.${f}`),this}lt(d,f){return this.url.searchParams.append(d,`lt.${f}`),this}lte(d,f){return this.url.searchParams.append(d,`lte.${f}`),this}like(d,f){return this.url.searchParams.append(d,`like.${f}`),this}likeAllOf(d,f){return this.url.searchParams.append(d,`like(all).{${f.join(",")}}`),this}likeAnyOf(d,f){return this.url.searchParams.append(d,`like(any).{${f.join(",")}}`),this}ilike(d,f){return this.url.searchParams.append(d,`ilike.${f}`),this}ilikeAllOf(d,f){return this.url.searchParams.append(d,`ilike(all).{${f.join(",")}}`),this}ilikeAnyOf(d,f){return this.url.searchParams.append(d,`ilike(any).{${f.join(",")}}`),this}is(d,f){return this.url.searchParams.append(d,`is.${f}`),this}in(d,f){const m=Array.from(new Set(f)).map(y=>typeof y=="string"&&s.test(y)?`"${y}"`:`${y}`).join(",");return this.url.searchParams.append(d,`in.(${m})`),this}contains(d,f){return typeof f=="string"?this.url.searchParams.append(d,`cs.${f}`):Array.isArray(f)?this.url.searchParams.append(d,`cs.{${f.join(",")}}`):this.url.searchParams.append(d,`cs.${JSON.stringify(f)}`),this}containedBy(d,f){return typeof f=="string"?this.url.searchParams.append(d,`cd.${f}`):Array.isArray(f)?this.url.searchParams.append(d,`cd.{${f.join(",")}}`):this.url.searchParams.append(d,`cd.${JSON.stringify(f)}`),this}rangeGt(d,f){return this.url.searchParams.append(d,`sr.${f}`),this}rangeGte(d,f){return this.url.searchParams.append(d,`nxl.${f}`),this}rangeLt(d,f){return this.url.searchParams.append(d,`sl.${f}`),this}rangeLte(d,f){return this.url.searchParams.append(d,`nxr.${f}`),this}rangeAdjacent(d,f){return this.url.searchParams.append(d,`adj.${f}`),this}overlaps(d,f){return typeof f=="string"?this.url.searchParams.append(d,`ov.${f}`):this.url.searchParams.append(d,`ov.{${f.join(",")}}`),this}textSearch(d,f,{config:m,type:y}={}){let p="";y==="plain"?p="pl":y==="phrase"?p="ph":y==="websearch"&&(p="w");const b=m===void 0?"":`(${m})`;return this.url.searchParams.append(d,`${p}fts${b}.${f}`),this}match(d){return Object.entries(d).forEach(([f,m])=>{this.url.searchParams.append(f,`eq.${m}`)}),this}not(d,f,m){return this.url.searchParams.append(d,`not.${f}.${m}`),this}or(d,{foreignTable:f,referencedTable:m=f}={}){const y=m?`${m}.or`:"or";return this.url.searchParams.append(y,`(${d})`),this}filter(d,f,m){return this.url.searchParams.append(d,`${f}.${m}`),this}}return wl.default=r,wl}var gg;function T0(){if(gg)return xl;gg=1,Object.defineProperty(xl,"__esModule",{value:!0});const n=Is.__importDefault(Gu());class s{constructor(u,{headers:d={},schema:f,fetch:m}){this.url=u,this.headers=new Headers(d),this.schema=f,this.fetch=m}select(u,d){const{head:f=!1,count:m}=d??{},y=f?"HEAD":"GET";let p=!1;const b=(u??"*").split("").map(w=>/\s/.test(w)&&!p?"":(w==='"'&&(p=!p),w)).join("");return this.url.searchParams.set("select",b),m&&this.headers.append("Prefer",`count=${m}`),new n.default({method:y,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(u,{count:d,defaultToNull:f=!0}={}){var m;const y="POST";if(d&&this.headers.append("Prefer",`count=${d}`),f||this.headers.append("Prefer","missing=default"),Array.isArray(u)){const p=u.reduce((b,w)=>b.concat(Object.keys(w)),[]);if(p.length>0){const b=[...new Set(p)].map(w=>`"${w}"`);this.url.searchParams.set("columns",b.join(","))}}return new n.default({method:y,url:this.url,headers:this.headers,schema:this.schema,body:u,fetch:(m=this.fetch)!==null&&m!==void 0?m:fetch})}upsert(u,{onConflict:d,ignoreDuplicates:f=!1,count:m,defaultToNull:y=!0}={}){var p;const b="POST";if(this.headers.append("Prefer",`resolution=${f?"ignore":"merge"}-duplicates`),d!==void 0&&this.url.searchParams.set("on_conflict",d),m&&this.headers.append("Prefer",`count=${m}`),y||this.headers.append("Prefer","missing=default"),Array.isArray(u)){const w=u.reduce((S,j)=>S.concat(Object.keys(j)),[]);if(w.length>0){const S=[...new Set(w)].map(j=>`"${j}"`);this.url.searchParams.set("columns",S.join(","))}}return new n.default({method:b,url:this.url,headers:this.headers,schema:this.schema,body:u,fetch:(p=this.fetch)!==null&&p!==void 0?p:fetch})}update(u,{count:d}={}){var f;const m="PATCH";return d&&this.headers.append("Prefer",`count=${d}`),new n.default({method:m,url:this.url,headers:this.headers,schema:this.schema,body:u,fetch:(f=this.fetch)!==null&&f!==void 0?f:fetch})}delete({count:u}={}){var d;const f="DELETE";return u&&this.headers.append("Prefer",`count=${u}`),new n.default({method:f,url:this.url,headers:this.headers,schema:this.schema,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}}return xl.default=s,xl}var pg;function ab(){if(pg)return bl;pg=1,Object.defineProperty(bl,"__esModule",{value:!0});const l=Is,n=l.__importDefault(T0()),s=l.__importDefault(Gu());class r{constructor(d,{headers:f={},schema:m,fetch:y}={}){this.url=d,this.headers=new Headers(f),this.schemaName=m,this.fetch=y}from(d){const f=new URL(`${this.url}/${d}`);return new n.default(f,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(d){return new r(this.url,{headers:this.headers,schema:d,fetch:this.fetch})}rpc(d,f={},{head:m=!1,get:y=!1,count:p}={}){var b;let w;const S=new URL(`${this.url}/rpc/${d}`);let j;m||y?(w=m?"HEAD":"GET",Object.entries(f).filter(([R,k])=>k!==void 0).map(([R,k])=>[R,Array.isArray(k)?`{${k.join(",")}}`:`${k}`]).forEach(([R,k])=>{S.searchParams.append(R,k)})):(w="POST",j=f);const C=new Headers(this.headers);return p&&C.set("Prefer",`count=${p}`),new s.default({method:w,url:S,headers:C,schema:this.schemaName,body:j,fetch:(b=this.fetch)!==null&&b!==void 0?b:fetch})}}return bl.default=r,bl}var yg;function nb(){if(yg)return jt;yg=1,Object.defineProperty(jt,"__esModule",{value:!0}),jt.PostgrestError=jt.PostgrestBuilder=jt.PostgrestTransformBuilder=jt.PostgrestFilterBuilder=jt.PostgrestQueryBuilder=jt.PostgrestClient=void 0;const l=Is,n=l.__importDefault(ab());jt.PostgrestClient=n.default;const s=l.__importDefault(T0());jt.PostgrestQueryBuilder=s.default;const r=l.__importDefault(Gu());jt.PostgrestFilterBuilder=r.default;const u=l.__importDefault(C0());jt.PostgrestTransformBuilder=u.default;const d=l.__importDefault(A0());jt.PostgrestBuilder=d.default;const f=l.__importDefault(E0());return jt.PostgrestError=f.default,jt.default={PostgrestClient:n.default,PostgrestQueryBuilder:s.default,PostgrestFilterBuilder:r.default,PostgrestTransformBuilder:u.default,PostgrestBuilder:d.default,PostgrestError:f.default},jt}var O0=nb();const D0=Lu(O0),sb=Ov({__proto__:null,default:D0},[O0]),{PostgrestClient:ib,PostgrestQueryBuilder:TS,PostgrestFilterBuilder:OS,PostgrestTransformBuilder:DS,PostgrestBuilder:RS,PostgrestError:zS}=D0||sb;class rb{static detectEnvironment(){var n;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((n=navigator.userAgent)===null||n===void 0)&&n.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const s=process.versions;if(s&&s.node){const r=s.node,u=parseInt(r.replace(/^v/,"").split(".")[0]);return u>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${u} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${u} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const n=this.detectEnvironment();if(n.constructor)return n.constructor;let s=n.error||"WebSocket not supported in this environment.";throw n.workaround&&(s+=`

Suggested solution: ${n.workaround}`),new Error(s)}static createWebSocket(n,s){const r=this.getWebSocketConstructor();return new r(n,s)}static isWebSocketSupported(){try{const n=this.detectEnvironment();return n.type==="native"||n.type==="ws"}catch{return!1}}}const lb="2.78.0",ob=`realtime-js/${lb}`,cb="1.0.0",_u=1e4,ub=1e3,db=100;var Ii;(function(l){l[l.connecting=0]="connecting",l[l.open=1]="open",l[l.closing=2]="closing",l[l.closed=3]="closed"})(Ii||(Ii={}));var ut;(function(l){l.closed="closed",l.errored="errored",l.joined="joined",l.joining="joining",l.leaving="leaving"})(ut||(ut={}));var ga;(function(l){l.close="phx_close",l.error="phx_error",l.join="phx_join",l.reply="phx_reply",l.leave="phx_leave",l.access_token="access_token"})(ga||(ga={}));var Su;(function(l){l.websocket="websocket"})(Su||(Su={}));var Gn;(function(l){l.Connecting="connecting",l.Open="open",l.Closing="closing",l.Closed="closed"})(Gn||(Gn={}));class hb{constructor(){this.HEADER_LENGTH=1}decode(n,s){return n.constructor===ArrayBuffer?s(this._binaryDecode(n)):s(typeof n=="string"?JSON.parse(n):{})}_binaryDecode(n){const s=new DataView(n),r=new TextDecoder;return this._decodeBroadcast(n,s,r)}_decodeBroadcast(n,s,r){const u=s.getUint8(1),d=s.getUint8(2);let f=this.HEADER_LENGTH+2;const m=r.decode(n.slice(f,f+u));f=f+u;const y=r.decode(n.slice(f,f+d));f=f+d;const p=JSON.parse(r.decode(n.slice(f,n.byteLength)));return{ref:null,topic:m,event:y,payload:p}}}class R0{constructor(n,s){this.callback=n,this.timerCalc=s,this.timer=void 0,this.tries=0,this.callback=n,this.timerCalc=s}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Ie;(function(l){l.abstime="abstime",l.bool="bool",l.date="date",l.daterange="daterange",l.float4="float4",l.float8="float8",l.int2="int2",l.int4="int4",l.int4range="int4range",l.int8="int8",l.int8range="int8range",l.json="json",l.jsonb="jsonb",l.money="money",l.numeric="numeric",l.oid="oid",l.reltime="reltime",l.text="text",l.time="time",l.timestamp="timestamp",l.timestamptz="timestamptz",l.timetz="timetz",l.tsrange="tsrange",l.tstzrange="tstzrange"})(Ie||(Ie={}));const vg=(l,n,s={})=>{var r;const u=(r=s.skipTypes)!==null&&r!==void 0?r:[];return n?Object.keys(n).reduce((d,f)=>(d[f]=fb(f,l,n,u),d),{}):{}},fb=(l,n,s,r)=>{const u=n.find(m=>m.name===l),d=u==null?void 0:u.type,f=s[l];return d&&!r.includes(d)?z0(d,f):ju(f)},z0=(l,n)=>{if(l.charAt(0)==="_"){const s=l.slice(1,l.length);return yb(n,s)}switch(l){case Ie.bool:return mb(n);case Ie.float4:case Ie.float8:case Ie.int2:case Ie.int4:case Ie.int8:case Ie.numeric:case Ie.oid:return gb(n);case Ie.json:case Ie.jsonb:return pb(n);case Ie.timestamp:return vb(n);case Ie.abstime:case Ie.date:case Ie.daterange:case Ie.int4range:case Ie.int8range:case Ie.money:case Ie.reltime:case Ie.text:case Ie.time:case Ie.timestamptz:case Ie.timetz:case Ie.tsrange:case Ie.tstzrange:return ju(n);default:return ju(n)}},ju=l=>l,mb=l=>{switch(l){case"t":return!0;case"f":return!1;default:return l}},gb=l=>{if(typeof l=="string"){const n=parseFloat(l);if(!Number.isNaN(n))return n}return l},pb=l=>{if(typeof l=="string")try{return JSON.parse(l)}catch(n){return console.log(`JSON parse error: ${n}`),l}return l},yb=(l,n)=>{if(typeof l!="string")return l;const s=l.length-1,r=l[s];if(l[0]==="{"&&r==="}"){let d;const f=l.slice(1,s);try{d=JSON.parse("["+f+"]")}catch{d=f?f.split(","):[]}return d.map(m=>z0(n,m))}return l},vb=l=>typeof l=="string"?l.replace(" ","T"):l,M0=l=>{const n=new URL(l);return n.protocol=n.protocol.replace(/^ws/i,"http"),n.pathname=n.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),n.pathname===""||n.pathname==="/"?n.pathname="/api/broadcast":n.pathname=n.pathname+"/api/broadcast",n.href};class iu{constructor(n,s,r={},u=_u){this.channel=n,this.event=s,this.payload=r,this.timeout=u,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(n){this.timeout=n,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(n){this.payload=Object.assign(Object.assign({},this.payload),n)}receive(n,s){var r;return this._hasReceived(n)&&s((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:n,callback:s}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const n=s=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=s,this._matchReceive(s)};this.channel._on(this.refEvent,{},n),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(n,s){this.refEvent&&this.channel._trigger(this.refEvent,{status:n,response:s})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:n,response:s}){this.recHooks.filter(r=>r.status===n).forEach(r=>r.callback(s))}_hasReceived(n){return this.receivedResp&&this.receivedResp.status===n}}var bg;(function(l){l.SYNC="sync",l.JOIN="join",l.LEAVE="leave"})(bg||(bg={}));class Ki{constructor(n,s){this.channel=n,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(s==null?void 0:s.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},u=>{const{onJoin:d,onLeave:f,onSync:m}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Ki.syncState(this.state,u,d,f),this.pendingDiffs.forEach(y=>{this.state=Ki.syncDiff(this.state,y,d,f)}),this.pendingDiffs=[],m()}),this.channel._on(r.diff,{},u=>{const{onJoin:d,onLeave:f,onSync:m}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(u):(this.state=Ki.syncDiff(this.state,u,d,f),m())}),this.onJoin((u,d,f)=>{this.channel._trigger("presence",{event:"join",key:u,currentPresences:d,newPresences:f})}),this.onLeave((u,d,f)=>{this.channel._trigger("presence",{event:"leave",key:u,currentPresences:d,leftPresences:f})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(n,s,r,u){const d=this.cloneDeep(n),f=this.transformState(s),m={},y={};return this.map(d,(p,b)=>{f[p]||(y[p]=b)}),this.map(f,(p,b)=>{const w=d[p];if(w){const S=b.map(k=>k.presence_ref),j=w.map(k=>k.presence_ref),C=b.filter(k=>j.indexOf(k.presence_ref)<0),R=w.filter(k=>S.indexOf(k.presence_ref)<0);C.length>0&&(m[p]=C),R.length>0&&(y[p]=R)}else m[p]=b}),this.syncDiff(d,{joins:m,leaves:y},r,u)}static syncDiff(n,s,r,u){const{joins:d,leaves:f}={joins:this.transformState(s.joins),leaves:this.transformState(s.leaves)};return r||(r=()=>{}),u||(u=()=>{}),this.map(d,(m,y)=>{var p;const b=(p=n[m])!==null&&p!==void 0?p:[];if(n[m]=this.cloneDeep(y),b.length>0){const w=n[m].map(j=>j.presence_ref),S=b.filter(j=>w.indexOf(j.presence_ref)<0);n[m].unshift(...S)}r(m,b,y)}),this.map(f,(m,y)=>{let p=n[m];if(!p)return;const b=y.map(w=>w.presence_ref);p=p.filter(w=>b.indexOf(w.presence_ref)<0),n[m]=p,u(m,p,y),p.length===0&&delete n[m]}),n}static map(n,s){return Object.getOwnPropertyNames(n).map(r=>s(r,n[r]))}static transformState(n){return n=this.cloneDeep(n),Object.getOwnPropertyNames(n).reduce((s,r)=>{const u=n[r];return"metas"in u?s[r]=u.metas.map(d=>(d.presence_ref=d.phx_ref,delete d.phx_ref,delete d.phx_ref_prev,d)):s[r]=u,s},{})}static cloneDeep(n){return JSON.parse(JSON.stringify(n))}onJoin(n){this.caller.onJoin=n}onLeave(n){this.caller.onLeave=n}onSync(n){this.caller.onSync=n}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var xg;(function(l){l.ALL="*",l.INSERT="INSERT",l.UPDATE="UPDATE",l.DELETE="DELETE"})(xg||(xg={}));var Qi;(function(l){l.BROADCAST="broadcast",l.PRESENCE="presence",l.POSTGRES_CHANGES="postgres_changes",l.SYSTEM="system"})(Qi||(Qi={}));var Ba;(function(l){l.SUBSCRIBED="SUBSCRIBED",l.TIMED_OUT="TIMED_OUT",l.CLOSED="CLOSED",l.CHANNEL_ERROR="CHANNEL_ERROR"})(Ba||(Ba={}));class Yu{constructor(n,s={config:{}},r){var u,d;if(this.topic=n,this.params=s,this.socket=r,this.bindings={},this.state=ut.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=n.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},s.config),this.timeout=this.socket.timeout,this.joinPush=new iu(this,ga.join,this.params,this.timeout),this.rejoinTimer=new R0(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=ut.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(f=>f.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=ut.closed,this.socket._remove(this)}),this._onError(f=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,f),this.state=ut.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=ut.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",f=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,f),this.state=ut.errored,this.rejoinTimer.scheduleTimeout())}),this._on(ga.reply,{},(f,m)=>{this._trigger(this._replyEventName(m),f)}),this.presence=new Ki(this),this.broadcastEndpointURL=M0(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((d=(u=this.params.config)===null||u===void 0?void 0:u.broadcast)===null||d===void 0)&&d.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(n,s=this.timeout){var r,u,d;if(this.socket.isConnected()||this.socket.connect(),this.state==ut.closed){const{config:{broadcast:f,presence:m,private:y}}=this.params,p=(u=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(j=>j.filter))!==null&&u!==void 0?u:[],b=!!this.bindings[Qi.PRESENCE]&&this.bindings[Qi.PRESENCE].length>0||((d=this.params.config.presence)===null||d===void 0?void 0:d.enabled)===!0,w={},S={broadcast:f,presence:Object.assign(Object.assign({},m),{enabled:b}),postgres_changes:p,private:y};this.socket.accessTokenValue&&(w.access_token=this.socket.accessTokenValue),this._onError(j=>n==null?void 0:n(Ba.CHANNEL_ERROR,j)),this._onClose(()=>n==null?void 0:n(Ba.CLOSED)),this.updateJoinPayload(Object.assign({config:S},w)),this.joinedOnce=!0,this._rejoin(s),this.joinPush.receive("ok",async({postgres_changes:j})=>{var C;if(this.socket.setAuth(),j===void 0){n==null||n(Ba.SUBSCRIBED);return}else{const R=this.bindings.postgres_changes,k=(C=R==null?void 0:R.length)!==null&&C!==void 0?C:0,$=[];for(let B=0;B<k;B++){const q=R[B],{filter:{event:T,schema:Z,table:Q,filter:P}}=q,F=j&&j[B];if(F&&F.event===T&&F.schema===Z&&F.table===Q&&F.filter===P)$.push(Object.assign(Object.assign({},q),{id:F.id}));else{this.unsubscribe(),this.state=ut.errored,n==null||n(Ba.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=$,n&&n(Ba.SUBSCRIBED);return}}).receive("error",j=>{this.state=ut.errored,n==null||n(Ba.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(j).join(", ")||"error")))}).receive("timeout",()=>{n==null||n(Ba.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(n,s={}){return await this.send({type:"presence",event:"track",payload:n},s.timeout||this.timeout)}async untrack(n={}){return await this.send({type:"presence",event:"untrack"},n)}on(n,s,r){return this.state===ut.joined&&n===Qi.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(n,s,r)}async httpSend(n,s,r={}){var u;const d=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(s==null)return Promise.reject("Payload is required for httpSend()");const f={method:"POST",headers:{Authorization:d,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:n,payload:s,private:this.private}]})},m=await this._fetchWithTimeout(this.broadcastEndpointURL,f,(u=r.timeout)!==null&&u!==void 0?u:this.timeout);if(m.status===202)return{success:!0};let y=m.statusText;try{const p=await m.json();y=p.error||p.message||y}catch{}return Promise.reject(new Error(y))}async send(n,s={}){var r,u;if(!this._canPush()&&n.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:d,payload:f}=n,y={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:d,payload:f,private:this.private}]})};try{const p=await this._fetchWithTimeout(this.broadcastEndpointURL,y,(r=s.timeout)!==null&&r!==void 0?r:this.timeout);return await((u=p.body)===null||u===void 0?void 0:u.cancel()),p.ok?"ok":"error"}catch(p){return p.name==="AbortError"?"timed out":"error"}}else return new Promise(d=>{var f,m,y;const p=this._push(n.type,n,s.timeout||this.timeout);n.type==="broadcast"&&!(!((y=(m=(f=this.params)===null||f===void 0?void 0:f.config)===null||m===void 0?void 0:m.broadcast)===null||y===void 0)&&y.ack)&&d("ok"),p.receive("ok",()=>d("ok")),p.receive("error",()=>d("error")),p.receive("timeout",()=>d("timed out"))})}updateJoinPayload(n){this.joinPush.updatePayload(n)}unsubscribe(n=this.timeout){this.state=ut.leaving;const s=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(ga.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(u=>{r=new iu(this,ga.leave,{},n),r.receive("ok",()=>{s(),u("ok")}).receive("timeout",()=>{s(),u("timed out")}).receive("error",()=>{u("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(n=>n.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=ut.closed,this.bindings={}}async _fetchWithTimeout(n,s,r){const u=new AbortController,d=setTimeout(()=>u.abort(),r),f=await this.socket.fetch(n,Object.assign(Object.assign({},s),{signal:u.signal}));return clearTimeout(d),f}_push(n,s,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${n}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let u=new iu(this,n,s,r);return this._canPush()?u.send():this._addToPushBuffer(u),u}_addToPushBuffer(n){if(n.startTimeout(),this.pushBuffer.push(n),this.pushBuffer.length>db){const s=this.pushBuffer.shift();s&&(s.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${s.event}`,s.payload))}}_onMessage(n,s,r){return s}_isMember(n){return this.topic===n}_joinRef(){return this.joinPush.ref}_trigger(n,s,r){var u,d;const f=n.toLocaleLowerCase(),{close:m,error:y,leave:p,join:b}=ga;if(r&&[m,y,p,b].indexOf(f)>=0&&r!==this._joinRef())return;let S=this._onMessage(f,s,r);if(s&&!S)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(f)?(u=this.bindings.postgres_changes)===null||u===void 0||u.filter(j=>{var C,R,k;return((C=j.filter)===null||C===void 0?void 0:C.event)==="*"||((k=(R=j.filter)===null||R===void 0?void 0:R.event)===null||k===void 0?void 0:k.toLocaleLowerCase())===f}).map(j=>j.callback(S,r)):(d=this.bindings[f])===null||d===void 0||d.filter(j=>{var C,R,k,$,B,q;if(["broadcast","presence","postgres_changes"].includes(f))if("id"in j){const T=j.id,Z=(C=j.filter)===null||C===void 0?void 0:C.event;return T&&((R=s.ids)===null||R===void 0?void 0:R.includes(T))&&(Z==="*"||(Z==null?void 0:Z.toLocaleLowerCase())===((k=s.data)===null||k===void 0?void 0:k.type.toLocaleLowerCase()))}else{const T=(B=($=j==null?void 0:j.filter)===null||$===void 0?void 0:$.event)===null||B===void 0?void 0:B.toLocaleLowerCase();return T==="*"||T===((q=s==null?void 0:s.event)===null||q===void 0?void 0:q.toLocaleLowerCase())}else return j.type.toLocaleLowerCase()===f}).map(j=>{if(typeof S=="object"&&"ids"in S){const C=S.data,{schema:R,table:k,commit_timestamp:$,type:B,errors:q}=C;S=Object.assign(Object.assign({},{schema:R,table:k,commit_timestamp:$,eventType:B,new:{},old:{},errors:q}),this._getPayloadRecords(C))}j.callback(S,r)})}_isClosed(){return this.state===ut.closed}_isJoined(){return this.state===ut.joined}_isJoining(){return this.state===ut.joining}_isLeaving(){return this.state===ut.leaving}_replyEventName(n){return`chan_reply_${n}`}_on(n,s,r){const u=n.toLocaleLowerCase(),d={type:u,filter:s,callback:r};return this.bindings[u]?this.bindings[u].push(d):this.bindings[u]=[d],this}_off(n,s){const r=n.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(u=>{var d;return!(((d=u.type)===null||d===void 0?void 0:d.toLocaleLowerCase())===r&&Yu.isEqual(u.filter,s))})),this}static isEqual(n,s){if(Object.keys(n).length!==Object.keys(s).length)return!1;for(const r in n)if(n[r]!==s[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(n){this._on(ga.close,{},n)}_onError(n){this._on(ga.error,{},s=>n(s))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(n=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=ut.joining,this.joinPush.resend(n))}_getPayloadRecords(n){const s={new:{},old:{}};return(n.type==="INSERT"||n.type==="UPDATE")&&(s.new=vg(n.columns,n.record)),(n.type==="UPDATE"||n.type==="DELETE")&&(s.old=vg(n.columns,n.old_record)),s}}const ru=()=>{},kl={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},bb=[1e3,2e3,5e3,1e4],xb=1e4,wb=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class _b{constructor(n,s){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=_u,this.transport=null,this.heartbeatIntervalMs=kl.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=ru,this.ref=0,this.reconnectTimer=null,this.logger=ru,this.conn=null,this.sendBuffer=[],this.serializer=new hb,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=u=>{let d;return u?d=u:typeof fetch>"u"?d=(...f)=>$a(async()=>{const{default:m}=await Promise.resolve().then(()=>Pn);return{default:m}},void 0).then(({default:m})=>m(...f)).catch(m=>{throw new Error(`Failed to load @supabase/node-fetch: ${m.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):d=fetch,(...f)=>d(...f)},!(!((r=s==null?void 0:s.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=s.params.apikey,this.endPoint=`${n}/${Su.websocket}`,this.httpEndpoint=M0(n),this._initializeOptions(s),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(s==null?void 0:s.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=rb.createWebSocket(this.endpointURL())}catch(n){this._setConnectionState("disconnected");const s=n.message;throw s.includes("Node.js")?new Error(`${s}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${s}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:cb}))}disconnect(n,s){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},n?this.conn.close(n,s??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(n){const s=await n.unsubscribe();return this.channels.length===0&&this.disconnect(),s}async removeAllChannels(){const n=await Promise.all(this.channels.map(s=>s.unsubscribe()));return this.channels=[],this.disconnect(),n}log(n,s,r){this.logger(n,s,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Ii.connecting:return Gn.Connecting;case Ii.open:return Gn.Open;case Ii.closing:return Gn.Closing;default:return Gn.Closed}}isConnected(){return this.connectionState()===Gn.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(n,s={config:{}}){const r=`realtime:${n}`,u=this.getChannels().find(d=>d.topic===r);if(u)return u;{const d=new Yu(`realtime:${n}`,s,this);return this.channels.push(d),d}}push(n){const{topic:s,event:r,payload:u,ref:d}=n,f=()=>{this.encode(n,m=>{var y;(y=this.conn)===null||y===void 0||y.send(m)})};this.log("push",`${s} ${r} (${d})`,u),this.isConnected()?f():this.sendBuffer.push(f)}async setAuth(n=null){this._authPromise=this._performAuth(n);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var n;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(s){this.log("error","error in heartbeat callback",s)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(s){this.log("error","error in heartbeat callback",s)}this._wasManualDisconnect=!1,(n=this.conn)===null||n===void 0||n.close(ub,"heartbeat timeout"),setTimeout(()=>{var s;this.isConnected()||(s=this.reconnectTimer)===null||s===void 0||s.scheduleTimeout()},kl.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(s){this.log("error","error in heartbeat callback",s)}this._setAuthSafely("heartbeat")}onHeartbeat(n){this.heartbeatCallback=n}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(n=>n()),this.sendBuffer=[])}_makeRef(){let n=this.ref+1;return n===this.ref?this.ref=0:this.ref=n,this.ref.toString()}_leaveOpenTopic(n){let s=this.channels.find(r=>r.topic===n&&(r._isJoined()||r._isJoining()));s&&(this.log("transport",`leaving duplicate topic "${n}"`),s.unsubscribe())}_remove(n){this.channels=this.channels.filter(s=>s.topic!==n.topic)}_onConnMessage(n){this.decode(n.data,s=>{if(s.topic==="phoenix"&&s.event==="phx_reply")try{this.heartbeatCallback(s.payload.status==="ok"?"ok":"error")}catch(p){this.log("error","error in heartbeat callback",p)}s.ref&&s.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:u,payload:d,ref:f}=s,m=f?`(${f})`:"",y=d.status||"";this.log("receive",`${y} ${r} ${u} ${m}`.trim(),d),this.channels.filter(p=>p._isMember(r)).forEach(p=>p._trigger(u,d,f)),this._triggerStateCallbacks("message",s)})}_clearTimer(n){var s;n==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):n==="reconnect"&&((s=this.reconnectTimer)===null||s===void 0||s.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=n=>this._onConnError(n),this.conn.onmessage=n=>this._onConnMessage(n),this.conn.onclose=n=>this._onConnClose(n))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(n=>n.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const n=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(n),this.workerRef.onerror=s=>{this.log("worker","worker error",s.message),this.workerRef.terminate()},this.workerRef.onmessage=s=>{s.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(n){var s;this._setConnectionState("disconnected"),this.log("transport","close",n),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(s=this.reconnectTimer)===null||s===void 0||s.scheduleTimeout(),this._triggerStateCallbacks("close",n)}_onConnError(n){this._setConnectionState("disconnected"),this.log("transport",`${n}`),this._triggerChanError(),this._triggerStateCallbacks("error",n)}_triggerChanError(){this.channels.forEach(n=>n._trigger(ga.error))}_appendParams(n,s){if(Object.keys(s).length===0)return n;const r=n.match(/\?/)?"&":"?",u=new URLSearchParams(s);return`${n}${r}${u}`}_workerObjectUrl(n){let s;if(n)s=n;else{const r=new Blob([wb],{type:"application/javascript"});s=URL.createObjectURL(r)}return s}_setConnectionState(n,s=!1){this._connectionState=n,n==="connecting"?this._wasManualDisconnect=!1:n==="disconnecting"&&(this._wasManualDisconnect=s)}async _performAuth(n=null){let s;n?s=n:this.accessToken?s=await this.accessToken():s=this.accessTokenValue,this.accessTokenValue!=s&&(this.accessTokenValue=s,this.channels.forEach(r=>{const u={access_token:s,version:ob};s&&r.updateJoinPayload(u),r.joinedOnce&&r._isJoined()&&r._push(ga.access_token,{access_token:s})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(n="general"){this.setAuth().catch(s=>{this.log("error",`error setting auth in ${n}`,s)})}_triggerStateCallbacks(n,s){try{this.stateChangeCallbacks[n].forEach(r=>{try{r(s)}catch(u){this.log("error",`error in ${n} callback`,u)}})}catch(r){this.log("error",`error triggering ${n} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new R0(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},kl.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(n){var s,r,u,d,f,m,y,p,b;if(this.transport=(s=n==null?void 0:n.transport)!==null&&s!==void 0?s:null,this.timeout=(r=n==null?void 0:n.timeout)!==null&&r!==void 0?r:_u,this.heartbeatIntervalMs=(u=n==null?void 0:n.heartbeatIntervalMs)!==null&&u!==void 0?u:kl.HEARTBEAT_INTERVAL,this.worker=(d=n==null?void 0:n.worker)!==null&&d!==void 0?d:!1,this.accessToken=(f=n==null?void 0:n.accessToken)!==null&&f!==void 0?f:null,this.heartbeatCallback=(m=n==null?void 0:n.heartbeatCallback)!==null&&m!==void 0?m:ru,n!=null&&n.params&&(this.params=n.params),n!=null&&n.logger&&(this.logger=n.logger),(n!=null&&n.logLevel||n!=null&&n.log_level)&&(this.logLevel=n.logLevel||n.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(y=n==null?void 0:n.reconnectAfterMs)!==null&&y!==void 0?y:(w=>bb[w-1]||xb),this.encode=(p=n==null?void 0:n.encode)!==null&&p!==void 0?p:((w,S)=>S(JSON.stringify(w))),this.decode=(b=n==null?void 0:n.decode)!==null&&b!==void 0?b:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=n==null?void 0:n.workerUrl}}}class Vu extends Error{constructor(n){super(n),this.__isStorageError=!0,this.name="StorageError"}}function Fe(l){return typeof l=="object"&&l!==null&&"__isStorageError"in l}class Sb extends Vu{constructor(n,s,r){super(n),this.name="StorageApiError",this.status=s,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class ku extends Vu{constructor(n,s){super(n),this.name="StorageUnknownError",this.originalError=s}}const Pu=l=>{let n;return l?n=l:typeof fetch>"u"?n=(...s)=>$a(async()=>{const{default:r}=await Promise.resolve().then(()=>Pn);return{default:r}},void 0).then(({default:r})=>r(...s)):n=fetch,(...s)=>n(...s)},jb=()=>pe(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield $a(()=>Promise.resolve().then(()=>Pn),void 0)).Response:Response}),Nu=l=>{if(Array.isArray(l))return l.map(s=>Nu(s));if(typeof l=="function"||l!==Object(l))return l;const n={};return Object.entries(l).forEach(([s,r])=>{const u=s.replace(/([-_][a-z])/gi,d=>d.toUpperCase().replace(/[-_]/g,""));n[u]=Nu(r)}),n},kb=l=>{if(typeof l!="object"||l===null)return!1;const n=Object.getPrototypeOf(l);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!(Symbol.toStringTag in l)&&!(Symbol.iterator in l)},lu=l=>{var n;return l.msg||l.message||l.error_description||(typeof l.error=="string"?l.error:(n=l.error)===null||n===void 0?void 0:n.message)||JSON.stringify(l)},Nb=(l,n,s)=>pe(void 0,void 0,void 0,function*(){const r=yield jb();l instanceof r&&!(s!=null&&s.noResolveJson)?l.json().then(u=>{const d=l.status||500,f=(u==null?void 0:u.statusCode)||d+"";n(new Sb(lu(u),d,f))}).catch(u=>{n(new ku(lu(u),u))}):n(new ku(lu(l),l))}),Eb=(l,n,s,r)=>{const u={method:l,headers:(n==null?void 0:n.headers)||{}};return l==="GET"||!r?u:(kb(r)?(u.headers=Object.assign({"Content-Type":"application/json"},n==null?void 0:n.headers),u.body=JSON.stringify(r)):u.body=r,n!=null&&n.duplex&&(u.duplex=n.duplex),Object.assign(Object.assign({},u),s))};function Wi(l,n,s,r,u,d){return pe(this,void 0,void 0,function*(){return new Promise((f,m)=>{l(s,Eb(n,r,u,d)).then(y=>{if(!y.ok)throw y;return r!=null&&r.noResolveJson?y:y.json()}).then(y=>f(y)).catch(y=>Nb(y,m,r))})})}function Xi(l,n,s,r){return pe(this,void 0,void 0,function*(){return Wi(l,"GET",n,s,r)})}function ma(l,n,s,r,u){return pe(this,void 0,void 0,function*(){return Wi(l,"POST",n,r,u,s)})}function Eu(l,n,s,r,u){return pe(this,void 0,void 0,function*(){return Wi(l,"PUT",n,r,u,s)})}function Ab(l,n,s,r){return pe(this,void 0,void 0,function*(){return Wi(l,"HEAD",n,Object.assign(Object.assign({},s),{noResolveJson:!0}),r)})}function Iu(l,n,s,r,u){return pe(this,void 0,void 0,function*(){return Wi(l,"DELETE",n,r,u,s)})}class Cb{constructor(n,s){this.downloadFn=n,this.shouldThrowOnError=s}then(n,s){return this.execute().then(n,s)}execute(){return pe(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Fe(n))return{data:null,error:n};throw n}})}}var U0;class Tb{constructor(n,s){this.downloadFn=n,this.shouldThrowOnError=s,this[U0]="BlobDownloadBuilder",this.promise=null}asStream(){return new Cb(this.downloadFn,this.shouldThrowOnError)}then(n,s){return this.getPromise().then(n,s)}catch(n){return this.getPromise().catch(n)}finally(n){return this.getPromise().finally(n)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return pe(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Fe(n))return{data:null,error:n};throw n}})}}U0=Symbol.toStringTag;const Ob={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},wg={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Db{constructor(n,s={},r,u){this.shouldThrowOnError=!1,this.url=n,this.headers=s,this.bucketId=r,this.fetch=Pu(u)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(n,s,r,u){return pe(this,void 0,void 0,function*(){try{let d;const f=Object.assign(Object.assign({},wg),u);let m=Object.assign(Object.assign({},this.headers),n==="POST"&&{"x-upsert":String(f.upsert)});const y=f.metadata;typeof Blob<"u"&&r instanceof Blob?(d=new FormData,d.append("cacheControl",f.cacheControl),y&&d.append("metadata",this.encodeMetadata(y)),d.append("",r)):typeof FormData<"u"&&r instanceof FormData?(d=r,d.append("cacheControl",f.cacheControl),y&&d.append("metadata",this.encodeMetadata(y))):(d=r,m["cache-control"]=`max-age=${f.cacheControl}`,m["content-type"]=f.contentType,y&&(m["x-metadata"]=this.toBase64(this.encodeMetadata(y)))),u!=null&&u.headers&&(m=Object.assign(Object.assign({},m),u.headers));const p=this._removeEmptyFolders(s),b=this._getFinalPath(p),w=yield(n=="PUT"?Eu:ma)(this.fetch,`${this.url}/object/${b}`,d,Object.assign({headers:m},f!=null&&f.duplex?{duplex:f.duplex}:{}));return{data:{path:p,id:w.Id,fullPath:w.Key},error:null}}catch(d){if(this.shouldThrowOnError)throw d;if(Fe(d))return{data:null,error:d};throw d}})}upload(n,s,r){return pe(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",n,s,r)})}uploadToSignedUrl(n,s,r,u){return pe(this,void 0,void 0,function*(){const d=this._removeEmptyFolders(n),f=this._getFinalPath(d),m=new URL(this.url+`/object/upload/sign/${f}`);m.searchParams.set("token",s);try{let y;const p=Object.assign({upsert:wg.upsert},u),b=Object.assign(Object.assign({},this.headers),{"x-upsert":String(p.upsert)});typeof Blob<"u"&&r instanceof Blob?(y=new FormData,y.append("cacheControl",p.cacheControl),y.append("",r)):typeof FormData<"u"&&r instanceof FormData?(y=r,y.append("cacheControl",p.cacheControl)):(y=r,b["cache-control"]=`max-age=${p.cacheControl}`,b["content-type"]=p.contentType);const w=yield Eu(this.fetch,m.toString(),y,{headers:b});return{data:{path:d,fullPath:w.Key},error:null}}catch(y){if(this.shouldThrowOnError)throw y;if(Fe(y))return{data:null,error:y};throw y}})}createSignedUploadUrl(n,s){return pe(this,void 0,void 0,function*(){try{let r=this._getFinalPath(n);const u=Object.assign({},this.headers);s!=null&&s.upsert&&(u["x-upsert"]="true");const d=yield ma(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:u}),f=new URL(this.url+d.url),m=f.searchParams.get("token");if(!m)throw new Vu("No token returned by API");return{data:{signedUrl:f.toString(),path:n,token:m},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Fe(r))return{data:null,error:r};throw r}})}update(n,s,r){return pe(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",n,s,r)})}move(n,s,r){return pe(this,void 0,void 0,function*(){try{return{data:yield ma(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:n,destinationKey:s,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(u){if(this.shouldThrowOnError)throw u;if(Fe(u))return{data:null,error:u};throw u}})}copy(n,s,r){return pe(this,void 0,void 0,function*(){try{return{data:{path:(yield ma(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:n,destinationKey:s,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(u){if(this.shouldThrowOnError)throw u;if(Fe(u))return{data:null,error:u};throw u}})}createSignedUrl(n,s,r){return pe(this,void 0,void 0,function*(){try{let u=this._getFinalPath(n),d=yield ma(this.fetch,`${this.url}/object/sign/${u}`,Object.assign({expiresIn:s},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const f=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return d={signedUrl:encodeURI(`${this.url}${d.signedURL}${f}`)},{data:d,error:null}}catch(u){if(this.shouldThrowOnError)throw u;if(Fe(u))return{data:null,error:u};throw u}})}createSignedUrls(n,s,r){return pe(this,void 0,void 0,function*(){try{const u=yield ma(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:s,paths:n},{headers:this.headers}),d=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:u.map(f=>Object.assign(Object.assign({},f),{signedUrl:f.signedURL?encodeURI(`${this.url}${f.signedURL}${d}`):null})),error:null}}catch(u){if(this.shouldThrowOnError)throw u;if(Fe(u))return{data:null,error:u};throw u}})}download(n,s){const u=typeof(s==null?void 0:s.transform)<"u"?"render/image/authenticated":"object",d=this.transformOptsToQueryString((s==null?void 0:s.transform)||{}),f=d?`?${d}`:"",m=this._getFinalPath(n),y=()=>Xi(this.fetch,`${this.url}/${u}/${m}${f}`,{headers:this.headers,noResolveJson:!0});return new Tb(y,this.shouldThrowOnError)}info(n){return pe(this,void 0,void 0,function*(){const s=this._getFinalPath(n);try{const r=yield Xi(this.fetch,`${this.url}/object/info/${s}`,{headers:this.headers});return{data:Nu(r),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Fe(r))return{data:null,error:r};throw r}})}exists(n){return pe(this,void 0,void 0,function*(){const s=this._getFinalPath(n);try{return yield Ab(this.fetch,`${this.url}/object/${s}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Fe(r)&&r instanceof ku){const u=r.originalError;if([400,404].includes(u==null?void 0:u.status))return{data:!1,error:r}}throw r}})}getPublicUrl(n,s){const r=this._getFinalPath(n),u=[],d=s!=null&&s.download?`download=${s.download===!0?"":s.download}`:"";d!==""&&u.push(d);const m=typeof(s==null?void 0:s.transform)<"u"?"render/image":"object",y=this.transformOptsToQueryString((s==null?void 0:s.transform)||{});y!==""&&u.push(y);let p=u.join("&");return p!==""&&(p=`?${p}`),{data:{publicUrl:encodeURI(`${this.url}/${m}/public/${r}${p}`)}}}remove(n){return pe(this,void 0,void 0,function*(){try{return{data:yield Iu(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:n},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Fe(s))return{data:null,error:s};throw s}})}list(n,s,r){return pe(this,void 0,void 0,function*(){try{const u=Object.assign(Object.assign(Object.assign({},Ob),s),{prefix:n||""});return{data:yield ma(this.fetch,`${this.url}/object/list/${this.bucketId}`,u,{headers:this.headers},r),error:null}}catch(u){if(this.shouldThrowOnError)throw u;if(Fe(u))return{data:null,error:u};throw u}})}listV2(n,s){return pe(this,void 0,void 0,function*(){try{const r=Object.assign({},n);return{data:yield ma(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},s),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Fe(r))return{data:null,error:r};throw r}})}encodeMetadata(n){return JSON.stringify(n)}toBase64(n){return typeof Buffer<"u"?Buffer.from(n).toString("base64"):btoa(n)}_getFinalPath(n){return`${this.bucketId}/${n.replace(/^\/+/,"")}`}_removeEmptyFolders(n){return n.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(n){const s=[];return n.width&&s.push(`width=${n.width}`),n.height&&s.push(`height=${n.height}`),n.resize&&s.push(`resize=${n.resize}`),n.format&&s.push(`format=${n.format}`),n.quality&&s.push(`quality=${n.quality}`),s.join("&")}}const L0="2.78.0",B0={"X-Client-Info":`storage-js/${L0}`};class Rb{constructor(n,s={},r,u){this.shouldThrowOnError=!1;const d=new URL(n);u!=null&&u.useNewHostname&&/supabase\.(co|in|red)$/.test(d.hostname)&&!d.hostname.includes("storage.supabase.")&&(d.hostname=d.hostname.replace("supabase.","storage.supabase.")),this.url=d.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},B0),s),this.fetch=Pu(r)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(n){return pe(this,void 0,void 0,function*(){try{const s=this.listBucketOptionsToQueryString(n);return{data:yield Xi(this.fetch,`${this.url}/bucket${s}`,{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Fe(s))return{data:null,error:s};throw s}})}getBucket(n){return pe(this,void 0,void 0,function*(){try{return{data:yield Xi(this.fetch,`${this.url}/bucket/${n}`,{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Fe(s))return{data:null,error:s};throw s}})}createBucket(n){return pe(this,arguments,void 0,function*(s,r={public:!1}){try{return{data:yield ma(this.fetch,`${this.url}/bucket`,{id:s,name:s,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(u){if(this.shouldThrowOnError)throw u;if(Fe(u))return{data:null,error:u};throw u}})}updateBucket(n,s){return pe(this,void 0,void 0,function*(){try{return{data:yield Eu(this.fetch,`${this.url}/bucket/${n}`,{id:n,name:n,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Fe(r))return{data:null,error:r};throw r}})}emptyBucket(n){return pe(this,void 0,void 0,function*(){try{return{data:yield ma(this.fetch,`${this.url}/bucket/${n}/empty`,{},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Fe(s))return{data:null,error:s};throw s}})}deleteBucket(n){return pe(this,void 0,void 0,function*(){try{return{data:yield Iu(this.fetch,`${this.url}/bucket/${n}`,{},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Fe(s))return{data:null,error:s};throw s}})}listBucketOptionsToQueryString(n){const s={};return n&&("limit"in n&&(s.limit=String(n.limit)),"offset"in n&&(s.offset=String(n.offset)),n.search&&(s.search=n.search),n.sortColumn&&(s.sortColumn=n.sortColumn),n.sortOrder&&(s.sortOrder=n.sortOrder)),Object.keys(s).length>0?"?"+new URLSearchParams(s).toString():""}}class zb{constructor(n,s={},r){this.shouldThrowOnError=!1,this.url=n.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},B0),s),this.fetch=Pu(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(n){return pe(this,void 0,void 0,function*(){try{return{data:yield ma(this.fetch,`${this.url}/bucket`,{name:n},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Fe(s))return{data:null,error:s};throw s}})}listBuckets(n){return pe(this,void 0,void 0,function*(){try{const s=new URLSearchParams;(n==null?void 0:n.limit)!==void 0&&s.set("limit",n.limit.toString()),(n==null?void 0:n.offset)!==void 0&&s.set("offset",n.offset.toString()),n!=null&&n.sortColumn&&s.set("sortColumn",n.sortColumn),n!=null&&n.sortOrder&&s.set("sortOrder",n.sortOrder),n!=null&&n.search&&s.set("search",n.search);const r=s.toString(),u=r?`${this.url}/bucket?${r}`:`${this.url}/bucket`;return{data:yield Xi(this.fetch,u,{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Fe(s))return{data:null,error:s};throw s}})}deleteBucket(n){return pe(this,void 0,void 0,function*(){try{return{data:yield Iu(this.fetch,`${this.url}/bucket/${n}`,{},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Fe(s))return{data:null,error:s};throw s}})}}const Ku={"X-Client-Info":`storage-js/${L0}`,"Content-Type":"application/json"};class $0 extends Error{constructor(n){super(n),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function It(l){return typeof l=="object"&&l!==null&&"__isStorageVectorsError"in l}class ou extends $0{constructor(n,s,r){super(n),this.name="StorageVectorsApiError",this.status=s,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Mb extends $0{constructor(n,s){super(n),this.name="StorageVectorsUnknownError",this.originalError=s}}var _g;(function(l){l.InternalError="InternalError",l.S3VectorConflictException="S3VectorConflictException",l.S3VectorNotFoundException="S3VectorNotFoundException",l.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",l.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",l.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(_g||(_g={}));const Qu=l=>{let n;return l?n=l:typeof fetch>"u"?n=(...s)=>$a(async()=>{const{default:r}=await Promise.resolve().then(()=>Pn);return{default:r}},void 0).then(({default:r})=>r(...s)):n=fetch,(...s)=>n(...s)},Ub=l=>{if(typeof l!="object"||l===null)return!1;const n=Object.getPrototypeOf(l);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!(Symbol.toStringTag in l)&&!(Symbol.iterator in l)},Sg=l=>l.msg||l.message||l.error_description||l.error||JSON.stringify(l),Lb=(l,n,s)=>pe(void 0,void 0,void 0,function*(){if(l&&typeof l=="object"&&"status"in l&&"ok"in l&&typeof l.status=="number"&&!(s!=null&&s.noResolveJson)){const u=l.status||500,d=l;if(typeof d.json=="function")d.json().then(f=>{const m=(f==null?void 0:f.statusCode)||(f==null?void 0:f.code)||u+"";n(new ou(Sg(f),u,m))}).catch(()=>{const f=u+"",m=d.statusText||`HTTP ${u} error`;n(new ou(m,u,f))});else{const f=u+"",m=d.statusText||`HTTP ${u} error`;n(new ou(m,u,f))}}else n(new Mb(Sg(l),l))}),Bb=(l,n,s,r)=>{const u={method:l,headers:(n==null?void 0:n.headers)||{}};return r?(Ub(r)?(u.headers=Object.assign({"Content-Type":"application/json"},n==null?void 0:n.headers),u.body=JSON.stringify(r)):u.body=r,Object.assign(Object.assign({},u),s)):u};function $b(l,n,s,r,u,d){return pe(this,void 0,void 0,function*(){return new Promise((f,m)=>{l(s,Bb(n,r,u,d)).then(y=>{if(!y.ok)throw y;if(r!=null&&r.noResolveJson)return y;const p=y.headers.get("content-type");return!p||!p.includes("application/json")?{}:y.json()}).then(y=>f(y)).catch(y=>Lb(y,m,r))})})}function Kt(l,n,s,r,u){return pe(this,void 0,void 0,function*(){return $b(l,"POST",n,r,u,s)})}class qb{constructor(n,s={},r){this.shouldThrowOnError=!1,this.url=n.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Ku),s),this.fetch=Qu(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(n){return pe(this,void 0,void 0,function*(){try{return{data:(yield Kt(this.fetch,`${this.url}/CreateIndex`,n,{headers:this.headers}))||{},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(It(s))return{data:null,error:s};throw s}})}getIndex(n,s){return pe(this,void 0,void 0,function*(){try{return{data:yield Kt(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:n,indexName:s},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(It(r))return{data:null,error:r};throw r}})}listIndexes(n){return pe(this,void 0,void 0,function*(){try{return{data:yield Kt(this.fetch,`${this.url}/ListIndexes`,n,{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(It(s))return{data:null,error:s};throw s}})}deleteIndex(n,s){return pe(this,void 0,void 0,function*(){try{return{data:(yield Kt(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:n,indexName:s},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(It(r))return{data:null,error:r};throw r}})}}class Hb{constructor(n,s={},r){this.shouldThrowOnError=!1,this.url=n.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Ku),s),this.fetch=Qu(r)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(n){return pe(this,void 0,void 0,function*(){try{if(n.vectors.length<1||n.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield Kt(this.fetch,`${this.url}/PutVectors`,n,{headers:this.headers}))||{},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(It(s))return{data:null,error:s};throw s}})}getVectors(n){return pe(this,void 0,void 0,function*(){try{return{data:yield Kt(this.fetch,`${this.url}/GetVectors`,n,{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(It(s))return{data:null,error:s};throw s}})}listVectors(n){return pe(this,void 0,void 0,function*(){try{if(n.segmentCount!==void 0){if(n.segmentCount<1||n.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(n.segmentIndex!==void 0&&(n.segmentIndex<0||n.segmentIndex>=n.segmentCount))throw new Error(`segmentIndex must be between 0 and ${n.segmentCount-1}`)}return{data:yield Kt(this.fetch,`${this.url}/ListVectors`,n,{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(It(s))return{data:null,error:s};throw s}})}queryVectors(n){return pe(this,void 0,void 0,function*(){try{return{data:yield Kt(this.fetch,`${this.url}/QueryVectors`,n,{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(It(s))return{data:null,error:s};throw s}})}deleteVectors(n){return pe(this,void 0,void 0,function*(){try{if(n.keys.length<1||n.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield Kt(this.fetch,`${this.url}/DeleteVectors`,n,{headers:this.headers}))||{},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(It(s))return{data:null,error:s};throw s}})}}class Gb{constructor(n,s={},r){this.shouldThrowOnError=!1,this.url=n.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Ku),s),this.fetch=Qu(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(n){return pe(this,void 0,void 0,function*(){try{return{data:(yield Kt(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:n},{headers:this.headers}))||{},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(It(s))return{data:null,error:s};throw s}})}getBucket(n){return pe(this,void 0,void 0,function*(){try{return{data:yield Kt(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:n},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(It(s))return{data:null,error:s};throw s}})}listBuckets(){return pe(this,arguments,void 0,function*(n={}){try{return{data:yield Kt(this.fetch,`${this.url}/ListVectorBuckets`,n,{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(It(s))return{data:null,error:s};throw s}})}deleteBucket(n){return pe(this,void 0,void 0,function*(){try{return{data:(yield Kt(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:n},{headers:this.headers}))||{},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(It(s))return{data:null,error:s};throw s}})}}class Yb extends Gb{constructor(n,s={}){super(n,s.headers||{},s.fetch)}from(n){return new Vb(this.url,this.headers,n,this.fetch)}}class Vb extends qb{constructor(n,s,r,u){super(n,s,u),this.vectorBucketName=r}createIndex(n){const s=Object.create(null,{createIndex:{get:()=>super.createIndex}});return pe(this,void 0,void 0,function*(){return s.createIndex.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const n=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return pe(this,arguments,void 0,function*(s={}){return n.listIndexes.call(this,Object.assign(Object.assign({},s),{vectorBucketName:this.vectorBucketName}))})}getIndex(n){const s=Object.create(null,{getIndex:{get:()=>super.getIndex}});return pe(this,void 0,void 0,function*(){return s.getIndex.call(this,this.vectorBucketName,n)})}deleteIndex(n){const s=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return pe(this,void 0,void 0,function*(){return s.deleteIndex.call(this,this.vectorBucketName,n)})}index(n){return new Pb(this.url,this.headers,this.vectorBucketName,n,this.fetch)}}class Pb extends Hb{constructor(n,s,r,u,d){super(n,s,d),this.vectorBucketName=r,this.indexName=u}putVectors(n){const s=Object.create(null,{putVectors:{get:()=>super.putVectors}});return pe(this,void 0,void 0,function*(){return s.putVectors.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(n){const s=Object.create(null,{getVectors:{get:()=>super.getVectors}});return pe(this,void 0,void 0,function*(){return s.getVectors.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const n=Object.create(null,{listVectors:{get:()=>super.listVectors}});return pe(this,arguments,void 0,function*(s={}){return n.listVectors.call(this,Object.assign(Object.assign({},s),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(n){const s=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return pe(this,void 0,void 0,function*(){return s.queryVectors.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(n){const s=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return pe(this,void 0,void 0,function*(){return s.deleteVectors.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class Ib extends Rb{constructor(n,s={},r,u){super(n,s,r,u)}from(n){return new Db(this.url,this.headers,n,this.fetch)}get vectors(){return new Yb(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new zb(this.url+"/iceberg",this.headers,this.fetch)}}const Kb="2.78.0";let Pi="";typeof Deno<"u"?Pi="deno":typeof document<"u"?Pi="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Pi="react-native":Pi="node";const Qb={"X-Client-Info":`supabase-js-${Pi}/${Kb}`},Jb={headers:Qb},Xb={schema:"public"},Zb={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Fb={},Wb=l=>{let n;return l?n=l:typeof fetch>"u"?n=k0:n=fetch,(...s)=>n(...s)},ex=()=>typeof Headers>"u"?N0:Headers,tx=(l,n,s)=>{const r=Wb(s),u=ex();return async(d,f)=>{var m;const y=(m=await n())!==null&&m!==void 0?m:l;let p=new u(f==null?void 0:f.headers);return p.has("apikey")||p.set("apikey",l),p.has("Authorization")||p.set("Authorization",`Bearer ${y}`),r(d,Object.assign(Object.assign({},f),{headers:p}))}};function ax(l){return l.endsWith("/")?l:l+"/"}function nx(l,n){var s,r;const{db:u,auth:d,realtime:f,global:m}=l,{db:y,auth:p,realtime:b,global:w}=n,S={db:Object.assign(Object.assign({},y),u),auth:Object.assign(Object.assign({},p),d),realtime:Object.assign(Object.assign({},b),f),storage:{},global:Object.assign(Object.assign(Object.assign({},w),m),{headers:Object.assign(Object.assign({},(s=w==null?void 0:w.headers)!==null&&s!==void 0?s:{}),(r=m==null?void 0:m.headers)!==null&&r!==void 0?r:{})}),accessToken:async()=>""};return l.accessToken?S.accessToken=l.accessToken:delete S.accessToken,S}function sx(l){const n=l==null?void 0:l.trim();if(!n)throw new Error("supabaseUrl is required.");if(!n.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(ax(n))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const q0="2.78.0",Bs=30*1e3,Au=3,cu=Au*Bs,ix="http://localhost:9999",rx="supabase.auth.token",lx={"X-Client-Info":`gotrue-js/${q0}`},Cu="X-Supabase-Api-Version",H0={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},ox=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,cx=600*1e3;class Zi extends Error{constructor(n,s,r){super(n),this.__isAuthError=!0,this.name="AuthError",this.status=s,this.code=r}}function ye(l){return typeof l=="object"&&l!==null&&"__isAuthError"in l}class ux extends Zi{constructor(n,s,r){super(n,s,r),this.name="AuthApiError",this.status=s,this.code=r}}function dx(l){return ye(l)&&l.name==="AuthApiError"}class Yn extends Zi{constructor(n,s){super(n),this.name="AuthUnknownError",this.originalError=s}}class pn extends Zi{constructor(n,s,r,u){super(n,r,u),this.name=s,this.status=r}}class ha extends pn{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function hx(l){return ye(l)&&l.name==="AuthSessionMissingError"}class Ds extends pn{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Nl extends pn{constructor(n){super(n,"AuthInvalidCredentialsError",400,void 0)}}class El extends pn{constructor(n,s=null){super(n,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function fx(l){return ye(l)&&l.name==="AuthImplicitGrantRedirectError"}class jg extends pn{constructor(n,s=null){super(n,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Tu extends pn{constructor(n,s){super(n,"AuthRetryableFetchError",s,void 0)}}function uu(l){return ye(l)&&l.name==="AuthRetryableFetchError"}class kg extends pn{constructor(n,s,r){super(n,"AuthWeakPasswordError",s,"weak_password"),this.reasons=r}}class Ou extends pn{constructor(n){super(n,"AuthInvalidJwtError",400,"invalid_jwt")}}const Ol="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Ng=` 	
\r=`.split(""),mx=(()=>{const l=new Array(128);for(let n=0;n<l.length;n+=1)l[n]=-1;for(let n=0;n<Ng.length;n+=1)l[Ng[n].charCodeAt(0)]=-2;for(let n=0;n<Ol.length;n+=1)l[Ol[n].charCodeAt(0)]=n;return l})();function Eg(l,n,s){if(l!==null)for(n.queue=n.queue<<8|l,n.queuedBits+=8;n.queuedBits>=6;){const r=n.queue>>n.queuedBits-6&63;s(Ol[r]),n.queuedBits-=6}else if(n.queuedBits>0)for(n.queue=n.queue<<6-n.queuedBits,n.queuedBits=6;n.queuedBits>=6;){const r=n.queue>>n.queuedBits-6&63;s(Ol[r]),n.queuedBits-=6}}function G0(l,n,s){const r=mx[l];if(r>-1)for(n.queue=n.queue<<6|r,n.queuedBits+=6;n.queuedBits>=8;)s(n.queue>>n.queuedBits-8&255),n.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(l)}"`)}}function Ag(l){const n=[],s=f=>{n.push(String.fromCodePoint(f))},r={utf8seq:0,codepoint:0},u={queue:0,queuedBits:0},d=f=>{yx(f,r,s)};for(let f=0;f<l.length;f+=1)G0(l.charCodeAt(f),u,d);return n.join("")}function gx(l,n){if(l<=127){n(l);return}else if(l<=2047){n(192|l>>6),n(128|l&63);return}else if(l<=65535){n(224|l>>12),n(128|l>>6&63),n(128|l&63);return}else if(l<=1114111){n(240|l>>18),n(128|l>>12&63),n(128|l>>6&63),n(128|l&63);return}throw new Error(`Unrecognized Unicode codepoint: ${l.toString(16)}`)}function px(l,n){for(let s=0;s<l.length;s+=1){let r=l.charCodeAt(s);if(r>55295&&r<=56319){const u=(r-55296)*1024&65535;r=(l.charCodeAt(s+1)-56320&65535|u)+65536,s+=1}gx(r,n)}}function yx(l,n,s){if(n.utf8seq===0){if(l<=127){s(l);return}for(let r=1;r<6;r+=1)if((l>>7-r&1)===0){n.utf8seq=r;break}if(n.utf8seq===2)n.codepoint=l&31;else if(n.utf8seq===3)n.codepoint=l&15;else if(n.utf8seq===4)n.codepoint=l&7;else throw new Error("Invalid UTF-8 sequence");n.utf8seq-=1}else if(n.utf8seq>0){if(l<=127)throw new Error("Invalid UTF-8 sequence");n.codepoint=n.codepoint<<6|l&63,n.utf8seq-=1,n.utf8seq===0&&s(n.codepoint)}}function qs(l){const n=[],s={queue:0,queuedBits:0},r=u=>{n.push(u)};for(let u=0;u<l.length;u+=1)G0(l.charCodeAt(u),s,r);return new Uint8Array(n)}function vx(l){const n=[];return px(l,s=>n.push(s)),new Uint8Array(n)}function Vn(l){const n=[],s={queue:0,queuedBits:0},r=u=>{n.push(u)};return l.forEach(u=>Eg(u,s,r)),Eg(null,s,r),n.join("")}function bx(l){return Math.round(Date.now()/1e3)+l}function xx(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(l){const n=Math.random()*16|0;return(l=="x"?n:n&3|8).toString(16)})}const Nt=()=>typeof window<"u"&&typeof document<"u",$n={tested:!1,writable:!1},Y0=()=>{if(!Nt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if($n.tested)return $n.writable;const l=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(l,l),globalThis.localStorage.removeItem(l),$n.tested=!0,$n.writable=!0}catch{$n.tested=!0,$n.writable=!1}return $n.writable};function wx(l){const n={},s=new URL(l);if(s.hash&&s.hash[0]==="#")try{new URLSearchParams(s.hash.substring(1)).forEach((u,d)=>{n[d]=u})}catch{}return s.searchParams.forEach((r,u)=>{n[u]=r}),n}const V0=l=>{let n;return l?n=l:typeof fetch>"u"?n=(...s)=>$a(async()=>{const{default:r}=await Promise.resolve().then(()=>Pn);return{default:r}},void 0).then(({default:r})=>r(...s)):n=fetch,(...s)=>n(...s)},_x=l=>typeof l=="object"&&l!==null&&"status"in l&&"ok"in l&&"json"in l&&typeof l.json=="function",$s=async(l,n,s)=>{await l.setItem(n,JSON.stringify(s))},qn=async(l,n)=>{const s=await l.getItem(n);if(!s)return null;try{return JSON.parse(s)}catch{return s}},fn=async(l,n)=>{await l.removeItem(n)};class Ul{constructor(){this.promise=new Ul.promiseConstructor((n,s)=>{this.resolve=n,this.reject=s})}}Ul.promiseConstructor=Promise;function du(l){const n=l.split(".");if(n.length!==3)throw new Ou("Invalid JWT structure");for(let r=0;r<n.length;r++)if(!ox.test(n[r]))throw new Ou("JWT not in base64url format");return{header:JSON.parse(Ag(n[0])),payload:JSON.parse(Ag(n[1])),signature:qs(n[2]),raw:{header:n[0],payload:n[1]}}}async function Sx(l){return await new Promise(n=>{setTimeout(()=>n(null),l)})}function jx(l,n){return new Promise((r,u)=>{(async()=>{for(let d=0;d<1/0;d++)try{const f=await l(d);if(!n(d,null,f)){r(f);return}}catch(f){if(!n(d,f)){u(f);return}}})()})}function kx(l){return("0"+l.toString(16)).substr(-2)}function Nx(){const n=new Uint32Array(56);if(typeof crypto>"u"){const s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=s.length;let u="";for(let d=0;d<56;d++)u+=s.charAt(Math.floor(Math.random()*r));return u}return crypto.getRandomValues(n),Array.from(n,kx).join("")}async function Ex(l){const s=new TextEncoder().encode(l),r=await crypto.subtle.digest("SHA-256",s),u=new Uint8Array(r);return Array.from(u).map(d=>String.fromCharCode(d)).join("")}async function Ax(l){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),l;const s=await Ex(l);return btoa(s).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Rs(l,n,s=!1){const r=Nx();let u=r;s&&(u+="/PASSWORD_RECOVERY"),await $s(l,`${n}-code-verifier`,u);const d=await Ax(r);return[d,r===d?"plain":"s256"]}const Cx=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Tx(l){const n=l.headers.get(Cu);if(!n||!n.match(Cx))return null;try{return new Date(`${n}T00:00:00.0Z`)}catch{return null}}function Ox(l){if(!l)throw new Error("Missing exp claim");const n=Math.floor(Date.now()/1e3);if(l<=n)throw new Error("JWT has expired")}function Dx(l){switch(l){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Rx=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function zs(l){if(!Rx.test(l))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function hu(){const l={};return new Proxy(l,{get:(n,s)=>{if(s==="__isUserNotAvailableProxy")return!0;if(typeof s=="symbol"){const r=s.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${s}" property of the session object is not supported. Please use getUser() instead.`)},set:(n,s)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${s}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(n,s)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${s}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function zx(l,n){return new Proxy(l,{get:(s,r,u)=>{if(r==="__isInsecureUserWarningProxy")return!0;if(typeof r=="symbol"){const d=r.toString();if(d==="Symbol(Symbol.toPrimitive)"||d==="Symbol(Symbol.toStringTag)"||d==="Symbol(util.inspect.custom)"||d==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(s,r,u)}return!n.value&&typeof r=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),n.value=!0),Reflect.get(s,r,u)}})}function Cg(l){return JSON.parse(JSON.stringify(l))}const Hn=l=>l.msg||l.message||l.error_description||l.error||JSON.stringify(l),Mx=[502,503,504];async function Tg(l){var n;if(!_x(l))throw new Tu(Hn(l),0);if(Mx.includes(l.status))throw new Tu(Hn(l),l.status);let s;try{s=await l.json()}catch(d){throw new Yn(Hn(d),d)}let r;const u=Tx(l);if(u&&u.getTime()>=H0["2024-01-01"].timestamp&&typeof s=="object"&&s&&typeof s.code=="string"?r=s.code:typeof s=="object"&&s&&typeof s.error_code=="string"&&(r=s.error_code),r){if(r==="weak_password")throw new kg(Hn(s),l.status,((n=s.weak_password)===null||n===void 0?void 0:n.reasons)||[]);if(r==="session_not_found")throw new ha}else if(typeof s=="object"&&s&&typeof s.weak_password=="object"&&s.weak_password&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.reasons.reduce((d,f)=>d&&typeof f=="string",!0))throw new kg(Hn(s),l.status,s.weak_password.reasons);throw new ux(Hn(s),l.status||500,r)}const Ux=(l,n,s,r)=>{const u={method:l,headers:(n==null?void 0:n.headers)||{}};return l==="GET"?u:(u.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},n==null?void 0:n.headers),u.body=JSON.stringify(r),Object.assign(Object.assign({},u),s))};async function _e(l,n,s,r){var u;const d=Object.assign({},r==null?void 0:r.headers);d[Cu]||(d[Cu]=H0["2024-01-01"].name),r!=null&&r.jwt&&(d.Authorization=`Bearer ${r.jwt}`);const f=(u=r==null?void 0:r.query)!==null&&u!==void 0?u:{};r!=null&&r.redirectTo&&(f.redirect_to=r.redirectTo);const m=Object.keys(f).length?"?"+new URLSearchParams(f).toString():"",y=await Lx(l,n,s+m,{headers:d,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(y):{data:Object.assign({},y),error:null}}async function Lx(l,n,s,r,u,d){const f=Ux(n,r,u,d);let m;try{m=await l(s,Object.assign({},f))}catch(y){throw console.error(y),new Tu(Hn(y),0)}if(m.ok||await Tg(m),r!=null&&r.noResolveJson)return m;try{return await m.json()}catch(y){await Tg(y)}}function fa(l){var n;let s=null;qx(l)&&(s=Object.assign({},l),l.expires_at||(s.expires_at=bx(l.expires_in)));const r=(n=l.user)!==null&&n!==void 0?n:l;return{data:{session:s,user:r},error:null}}function Og(l){const n=fa(l);return!n.error&&l.weak_password&&typeof l.weak_password=="object"&&Array.isArray(l.weak_password.reasons)&&l.weak_password.reasons.length&&l.weak_password.message&&typeof l.weak_password.message=="string"&&l.weak_password.reasons.reduce((s,r)=>s&&typeof r=="string",!0)&&(n.data.weak_password=l.weak_password),n}function gn(l){var n;return{data:{user:(n=l.user)!==null&&n!==void 0?n:l},error:null}}function Bx(l){return{data:l,error:null}}function $x(l){const{action_link:n,email_otp:s,hashed_token:r,redirect_to:u,verification_type:d}=l,f=Ps(l,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),m={action_link:n,email_otp:s,hashed_token:r,redirect_to:u,verification_type:d},y=Object.assign({},f);return{data:{properties:m,user:y},error:null}}function Dg(l){return l}function qx(l){return l.access_token&&l.refresh_token&&l.expires_in}const fu=["global","local","others"];class Hx{constructor({url:n="",headers:s={},fetch:r}){this.url=n,this.headers=s,this.fetch=V0(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(n,s=fu[0]){if(fu.indexOf(s)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${fu.join(", ")}`);try{return await _e(this.fetch,"POST",`${this.url}/logout?scope=${s}`,{headers:this.headers,jwt:n,noResolveJson:!0}),{data:null,error:null}}catch(r){if(ye(r))return{data:null,error:r};throw r}}async inviteUserByEmail(n,s={}){try{return await _e(this.fetch,"POST",`${this.url}/invite`,{body:{email:n,data:s.data},headers:this.headers,redirectTo:s.redirectTo,xform:gn})}catch(r){if(ye(r))return{data:{user:null},error:r};throw r}}async generateLink(n){try{const{options:s}=n,r=Ps(n,["options"]),u=Object.assign(Object.assign({},r),s);return"newEmail"in r&&(u.new_email=r==null?void 0:r.newEmail,delete u.newEmail),await _e(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:u,headers:this.headers,xform:$x,redirectTo:s==null?void 0:s.redirectTo})}catch(s){if(ye(s))return{data:{properties:null,user:null},error:s};throw s}}async createUser(n){try{return await _e(this.fetch,"POST",`${this.url}/admin/users`,{body:n,headers:this.headers,xform:gn})}catch(s){if(ye(s))return{data:{user:null},error:s};throw s}}async listUsers(n){var s,r,u,d,f,m,y;try{const p={nextPage:null,lastPage:0,total:0},b=await _e(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(s=n==null?void 0:n.page)===null||s===void 0?void 0:s.toString())!==null&&r!==void 0?r:"",per_page:(d=(u=n==null?void 0:n.perPage)===null||u===void 0?void 0:u.toString())!==null&&d!==void 0?d:""},xform:Dg});if(b.error)throw b.error;const w=await b.json(),S=(f=b.headers.get("x-total-count"))!==null&&f!==void 0?f:0,j=(y=(m=b.headers.get("link"))===null||m===void 0?void 0:m.split(","))!==null&&y!==void 0?y:[];return j.length>0&&(j.forEach(C=>{const R=parseInt(C.split(";")[0].split("=")[1].substring(0,1)),k=JSON.parse(C.split(";")[1].split("=")[1]);p[`${k}Page`]=R}),p.total=parseInt(S)),{data:Object.assign(Object.assign({},w),p),error:null}}catch(p){if(ye(p))return{data:{users:[]},error:p};throw p}}async getUserById(n){zs(n);try{return await _e(this.fetch,"GET",`${this.url}/admin/users/${n}`,{headers:this.headers,xform:gn})}catch(s){if(ye(s))return{data:{user:null},error:s};throw s}}async updateUserById(n,s){zs(n);try{return await _e(this.fetch,"PUT",`${this.url}/admin/users/${n}`,{body:s,headers:this.headers,xform:gn})}catch(r){if(ye(r))return{data:{user:null},error:r};throw r}}async deleteUser(n,s=!1){zs(n);try{return await _e(this.fetch,"DELETE",`${this.url}/admin/users/${n}`,{headers:this.headers,body:{should_soft_delete:s},xform:gn})}catch(r){if(ye(r))return{data:{user:null},error:r};throw r}}async _listFactors(n){zs(n.userId);try{const{data:s,error:r}=await _e(this.fetch,"GET",`${this.url}/admin/users/${n.userId}/factors`,{headers:this.headers,xform:u=>({data:{factors:u},error:null})});return{data:s,error:r}}catch(s){if(ye(s))return{data:null,error:s};throw s}}async _deleteFactor(n){zs(n.userId),zs(n.id);try{return{data:await _e(this.fetch,"DELETE",`${this.url}/admin/users/${n.userId}/factors/${n.id}`,{headers:this.headers}),error:null}}catch(s){if(ye(s))return{data:null,error:s};throw s}}async _listOAuthClients(n){var s,r,u,d,f,m,y;try{const p={nextPage:null,lastPage:0,total:0},b=await _e(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(s=n==null?void 0:n.page)===null||s===void 0?void 0:s.toString())!==null&&r!==void 0?r:"",per_page:(d=(u=n==null?void 0:n.perPage)===null||u===void 0?void 0:u.toString())!==null&&d!==void 0?d:""},xform:Dg});if(b.error)throw b.error;const w=await b.json(),S=(f=b.headers.get("x-total-count"))!==null&&f!==void 0?f:0,j=(y=(m=b.headers.get("link"))===null||m===void 0?void 0:m.split(","))!==null&&y!==void 0?y:[];return j.length>0&&(j.forEach(C=>{const R=parseInt(C.split(";")[0].split("=")[1].substring(0,1)),k=JSON.parse(C.split(";")[1].split("=")[1]);p[`${k}Page`]=R}),p.total=parseInt(S)),{data:Object.assign(Object.assign({},w),p),error:null}}catch(p){if(ye(p))return{data:{clients:[]},error:p};throw p}}async _createOAuthClient(n){try{return await _e(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:n,headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(ye(s))return{data:null,error:s};throw s}}async _getOAuthClient(n){try{return await _e(this.fetch,"GET",`${this.url}/admin/oauth/clients/${n}`,{headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(ye(s))return{data:null,error:s};throw s}}async _updateOAuthClient(n,s){try{return await _e(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${n}`,{body:s,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(ye(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(n){try{return await _e(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${n}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(s){if(ye(s))return{data:null,error:s};throw s}}async _regenerateOAuthClientSecret(n){try{return await _e(this.fetch,"POST",`${this.url}/admin/oauth/clients/${n}/regenerate_secret`,{headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(ye(s))return{data:null,error:s};throw s}}}function Rg(l={}){return{getItem:n=>l[n]||null,setItem:(n,s)=>{l[n]=s},removeItem:n=>{delete l[n]}}}const Ms={debug:!!(globalThis&&Y0()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class P0 extends Error{constructor(n){super(n),this.isAcquireTimeout=!0}}class Gx extends P0{}async function Yx(l,n,s){Ms.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",l,n);const r=new globalThis.AbortController;return n>0&&setTimeout(()=>{r.abort(),Ms.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",l)},n),await Promise.resolve().then(()=>globalThis.navigator.locks.request(l,n===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async u=>{if(u){Ms.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",l,u.name);try{return await s()}finally{Ms.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",l,u.name)}}else{if(n===0)throw Ms.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",l),new Gx(`Acquiring an exclusive Navigator LockManager lock "${l}" immediately failed`);if(Ms.debug)try{const d=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(d,null,"  "))}catch(d){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",d)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await s()}}))}function Vx(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function I0(l){if(!/^0x[a-fA-F0-9]{40}$/.test(l))throw new Error(`@supabase/auth-js: Address "${l}" is invalid.`);return l.toLowerCase()}function Px(l){return parseInt(l,16)}function Ix(l){const n=new TextEncoder().encode(l);return"0x"+Array.from(n,r=>r.toString(16).padStart(2,"0")).join("")}function Kx(l){var n;const{chainId:s,domain:r,expirationTime:u,issuedAt:d=new Date,nonce:f,notBefore:m,requestId:y,resources:p,scheme:b,uri:w,version:S}=l;{if(!Number.isInteger(s))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${s}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(f&&f.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${f}`);if(!w)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(S!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${S}`);if(!((n=l.statement)===null||n===void 0)&&n.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${l.statement}`)}const j=I0(l.address),C=b?`${b}://${r}`:r,R=l.statement?`${l.statement}
`:"",k=`${C} wants you to sign in with your Ethereum account:
${j}

${R}`;let $=`URI: ${w}
Version: ${S}
Chain ID: ${s}${f?`
Nonce: ${f}`:""}
Issued At: ${d.toISOString()}`;if(u&&($+=`
Expiration Time: ${u.toISOString()}`),m&&($+=`
Not Before: ${m.toISOString()}`),y&&($+=`
Request ID: ${y}`),p){let B=`
Resources:`;for(const q of p){if(!q||typeof q!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${q}`);B+=`
- ${q}`}$+=B}return`${k}
${$}`}class ot extends Error{constructor({message:n,code:s,cause:r,name:u}){var d;super(n,{cause:r}),this.__isWebAuthnError=!0,this.name=(d=u??(r instanceof Error?r.name:void 0))!==null&&d!==void 0?d:"Unknown Error",this.code=s}}class Dl extends ot{constructor(n,s){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s,message:n}),this.name="WebAuthnUnknownError",this.originalError=s}}function Qx({error:l,options:n}){var s,r,u;const{publicKey:d}=n;if(!d)throw Error("options was missing required publicKey property");if(l.name==="AbortError"){if(n.signal instanceof AbortSignal)return new ot({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:l})}else if(l.name==="ConstraintError"){if(((s=d.authenticatorSelection)===null||s===void 0?void 0:s.requireResidentKey)===!0)return new ot({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:l});if(n.mediation==="conditional"&&((r=d.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new ot({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:l});if(((u=d.authenticatorSelection)===null||u===void 0?void 0:u.userVerification)==="required")return new ot({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:l})}else{if(l.name==="InvalidStateError")return new ot({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:l});if(l.name==="NotAllowedError")return new ot({message:l.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:l});if(l.name==="NotSupportedError")return d.pubKeyCredParams.filter(m=>m.type==="public-key").length===0?new ot({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:l}):new ot({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:l});if(l.name==="SecurityError"){const f=window.location.hostname;if(K0(f)){if(d.rp.id!==f)return new ot({message:`The RP ID "${d.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:l})}else return new ot({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:l})}else if(l.name==="TypeError"){if(d.user.id.byteLength<1||d.user.id.byteLength>64)return new ot({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:l})}else if(l.name==="UnknownError")return new ot({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:l})}return new ot({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:l})}function Jx({error:l,options:n}){const{publicKey:s}=n;if(!s)throw Error("options was missing required publicKey property");if(l.name==="AbortError"){if(n.signal instanceof AbortSignal)return new ot({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:l})}else{if(l.name==="NotAllowedError")return new ot({message:l.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:l});if(l.name==="SecurityError"){const r=window.location.hostname;if(K0(r)){if(s.rpId!==r)return new ot({message:`The RP ID "${s.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:l})}else return new ot({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:l})}else if(l.name==="UnknownError")return new ot({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:l})}return new ot({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:l})}class Xx{createNewAbortSignal(){if(this.controller){const s=new Error("Cancelling existing WebAuthn API call for new one");s.name="AbortError",this.controller.abort(s)}const n=new AbortController;return this.controller=n,n.signal}cancelCeremony(){if(this.controller){const n=new Error("Manually cancelling existing WebAuthn API call");n.name="AbortError",this.controller.abort(n),this.controller=void 0}}}const Zx=new Xx;function Fx(l){if(!l)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(l);const{challenge:n,user:s,excludeCredentials:r}=l,u=Ps(l,["challenge","user","excludeCredentials"]),d=qs(n).buffer,f=Object.assign(Object.assign({},s),{id:qs(s.id).buffer}),m=Object.assign(Object.assign({},u),{challenge:d,user:f});if(r&&r.length>0){m.excludeCredentials=new Array(r.length);for(let y=0;y<r.length;y++){const p=r[y];m.excludeCredentials[y]=Object.assign(Object.assign({},p),{id:qs(p.id).buffer,type:p.type||"public-key",transports:p.transports})}}return m}function Wx(l){if(!l)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(l);const{challenge:n,allowCredentials:s}=l,r=Ps(l,["challenge","allowCredentials"]),u=qs(n).buffer,d=Object.assign(Object.assign({},r),{challenge:u});if(s&&s.length>0){d.allowCredentials=new Array(s.length);for(let f=0;f<s.length;f++){const m=s[f];d.allowCredentials[f]=Object.assign(Object.assign({},m),{id:qs(m.id).buffer,type:m.type||"public-key",transports:m.transports})}}return d}function ew(l){var n;if("toJSON"in l&&typeof l.toJSON=="function")return l.toJSON();const s=l;return{id:l.id,rawId:l.id,response:{attestationObject:Vn(new Uint8Array(l.response.attestationObject)),clientDataJSON:Vn(new Uint8Array(l.response.clientDataJSON))},type:"public-key",clientExtensionResults:l.getClientExtensionResults(),authenticatorAttachment:(n=s.authenticatorAttachment)!==null&&n!==void 0?n:void 0}}function tw(l){var n;if("toJSON"in l&&typeof l.toJSON=="function")return l.toJSON();const s=l,r=l.getClientExtensionResults(),u=l.response;return{id:l.id,rawId:l.id,response:{authenticatorData:Vn(new Uint8Array(u.authenticatorData)),clientDataJSON:Vn(new Uint8Array(u.clientDataJSON)),signature:Vn(new Uint8Array(u.signature)),userHandle:u.userHandle?Vn(new Uint8Array(u.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(n=s.authenticatorAttachment)!==null&&n!==void 0?n:void 0}}function K0(l){return l==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(l)}function zg(){var l,n;return!!(Nt()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((l=navigator==null?void 0:navigator.credentials)===null||l===void 0?void 0:l.create)=="function"&&typeof((n=navigator==null?void 0:navigator.credentials)===null||n===void 0?void 0:n.get)=="function")}async function aw(l){try{const n=await navigator.credentials.create(l);return n?n instanceof PublicKeyCredential?{data:n,error:null}:{data:null,error:new Dl("Browser returned unexpected credential type",n)}:{data:null,error:new Dl("Empty credential response",n)}}catch(n){return{data:null,error:Qx({error:n,options:l})}}}async function nw(l){try{const n=await navigator.credentials.get(l);return n?n instanceof PublicKeyCredential?{data:n,error:null}:{data:null,error:new Dl("Browser returned unexpected credential type",n)}:{data:null,error:new Dl("Empty credential response",n)}}catch(n){return{data:null,error:Jx({error:n,options:l})}}}const sw={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},iw={userVerification:"preferred",hints:["security-key"]};function Rl(...l){const n=u=>u!==null&&typeof u=="object"&&!Array.isArray(u),s=u=>u instanceof ArrayBuffer||ArrayBuffer.isView(u),r={};for(const u of l)if(u)for(const d in u){const f=u[d];if(f!==void 0)if(Array.isArray(f))r[d]=f;else if(s(f))r[d]=f;else if(n(f)){const m=r[d];n(m)?r[d]=Rl(m,f):r[d]=Rl(f)}else r[d]=f}return r}function rw(l,n){return Rl(sw,l,n||{})}function lw(l,n){return Rl(iw,l,n||{})}class ow{constructor(n){this.client=n,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(n){return this.client.mfa.enroll(Object.assign(Object.assign({},n),{factorType:"webauthn"}))}async _challenge({factorId:n,webauthn:s,friendlyName:r,signal:u},d){try{const{data:f,error:m}=await this.client.mfa.challenge({factorId:n,webauthn:s});if(!f)return{data:null,error:m};const y=u??Zx.createNewAbortSignal();if(f.webauthn.type==="create"){const{user:p}=f.webauthn.credential_options.publicKey;p.name||(p.name=`${p.id}:${r}`),p.displayName||(p.displayName=p.name)}switch(f.webauthn.type){case"create":{const p=rw(f.webauthn.credential_options.publicKey,d==null?void 0:d.create),{data:b,error:w}=await aw({publicKey:p,signal:y});return b?{data:{factorId:n,challengeId:f.id,webauthn:{type:f.webauthn.type,credential_response:b}},error:null}:{data:null,error:w}}case"request":{const p=lw(f.webauthn.credential_options.publicKey,d==null?void 0:d.request),{data:b,error:w}=await nw(Object.assign(Object.assign({},f.webauthn.credential_options),{publicKey:p,signal:y}));return b?{data:{factorId:n,challengeId:f.id,webauthn:{type:f.webauthn.type,credential_response:b}},error:null}:{data:null,error:w}}}}catch(f){return ye(f)?{data:null,error:f}:{data:null,error:new Yn("Unexpected error in challenge",f)}}}async _verify({challengeId:n,factorId:s,webauthn:r}){return this.client.mfa.verify({factorId:s,challengeId:n,webauthn:r})}async _authenticate({factorId:n,webauthn:{rpId:s=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:u}},d){if(!s)return{data:null,error:new Zi("rpId is required for WebAuthn authentication")};try{if(!zg())return{data:null,error:new Yn("Browser does not support WebAuthn",null)};const{data:f,error:m}=await this.challenge({factorId:n,webauthn:{rpId:s,rpOrigins:r},signal:u},{request:d});if(!f)return{data:null,error:m};const{webauthn:y}=f;return this._verify({factorId:n,challengeId:f.challengeId,webauthn:{type:y.type,rpId:s,rpOrigins:r,credential_response:y.credential_response}})}catch(f){return ye(f)?{data:null,error:f}:{data:null,error:new Yn("Unexpected error in authenticate",f)}}}async _register({friendlyName:n,rpId:s=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:u},d){if(!s)return{data:null,error:new Zi("rpId is required for WebAuthn registration")};try{if(!zg())return{data:null,error:new Yn("Browser does not support WebAuthn",null)};const{data:f,error:m}=await this._enroll({friendlyName:n});if(!f)return await this.client.mfa.listFactors().then(b=>{var w;return(w=b.data)===null||w===void 0?void 0:w.all.find(S=>S.factor_type==="webauthn"&&S.friendly_name===n&&S.status!=="unverified")}).then(b=>b?this.client.mfa.unenroll({factorId:b==null?void 0:b.id}):void 0),{data:null,error:m};const{data:y,error:p}=await this._challenge({factorId:f.id,friendlyName:f.friendly_name,webauthn:{rpId:s,rpOrigins:r},signal:u},{create:d});return y?this._verify({factorId:f.id,challengeId:y.challengeId,webauthn:{rpId:s,rpOrigins:r,type:y.webauthn.type,credential_response:y.webauthn.credential_response}}):{data:null,error:p}}catch(f){return ye(f)?{data:null,error:f}:{data:null,error:new Yn("Unexpected error in register",f)}}}}Vx();const cw={url:ix,storageKey:rx,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:lx,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Mg(l,n,s){return await s()}const Us={};class Fi{get jwks(){var n,s;return(s=(n=Us[this.storageKey])===null||n===void 0?void 0:n.jwks)!==null&&s!==void 0?s:{keys:[]}}set jwks(n){Us[this.storageKey]=Object.assign(Object.assign({},Us[this.storageKey]),{jwks:n})}get jwks_cached_at(){var n,s;return(s=(n=Us[this.storageKey])===null||n===void 0?void 0:n.cachedAt)!==null&&s!==void 0?s:Number.MIN_SAFE_INTEGER}set jwks_cached_at(n){Us[this.storageKey]=Object.assign(Object.assign({},Us[this.storageKey]),{cachedAt:n})}constructor(n){var s,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Fi.nextInstanceID,Fi.nextInstanceID+=1,this.instanceID>0&&Nt()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const u=Object.assign(Object.assign({},cw),n);if(this.logDebugMessages=!!u.debug,typeof u.debug=="function"&&(this.logger=u.debug),this.persistSession=u.persistSession,this.storageKey=u.storageKey,this.autoRefreshToken=u.autoRefreshToken,this.admin=new Hx({url:u.url,headers:u.headers,fetch:u.fetch}),this.url=u.url,this.headers=u.headers,this.fetch=V0(u.fetch),this.lock=u.lock||Mg,this.detectSessionInUrl=u.detectSessionInUrl,this.flowType=u.flowType,this.hasCustomAuthorizationHeader=u.hasCustomAuthorizationHeader,u.lock?this.lock=u.lock:Nt()&&(!((s=globalThis==null?void 0:globalThis.navigator)===null||s===void 0)&&s.locks)?this.lock=Yx:this.lock=Mg,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new ow(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this)},this.persistSession?(u.storage?this.storage=u.storage:Y0()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Rg(this.memoryStorage)),u.userStorage&&(this.userStorage=u.userStorage)):(this.memoryStorage={},this.storage=Rg(this.memoryStorage)),Nt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(d){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",d)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async d=>{this._debug("received broadcast notification from other tab or client",d),await this._notifyAllSubscribers(d.data.event,d.data.session,!1)})}this.initialize()}_debug(...n){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${q0}) ${new Date().toISOString()}`,...n),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var n;try{const s=wx(window.location.href);let r="none";if(this._isImplicitGrantCallback(s)?r="implicit":await this._isPKCECallback(s)&&(r="pkce"),Nt()&&this.detectSessionInUrl&&r!=="none"){const{data:u,error:d}=await this._getSessionFromURL(s,r);if(d){if(this._debug("#_initialize()","error detecting session from URL",d),fx(d)){const y=(n=d.details)===null||n===void 0?void 0:n.code;if(y==="identity_already_exists"||y==="identity_not_found"||y==="single_identity_not_deletable")return{error:d}}return await this._removeSession(),{error:d}}const{session:f,redirectType:m}=u;return this._debug("#_initialize()","detected session in URL",f,"redirect type",m),await this._saveSession(f),setTimeout(async()=>{m==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",f):await this._notifyAllSubscribers("SIGNED_IN",f)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(s){return ye(s)?{error:s}:{error:new Yn("Unexpected error during initialization",s)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(n){var s,r,u;try{const d=await _e(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(s=n==null?void 0:n.options)===null||s===void 0?void 0:s.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(u=n==null?void 0:n.options)===null||u===void 0?void 0:u.captchaToken}},xform:fa}),{data:f,error:m}=d;if(m||!f)return{data:{user:null,session:null},error:m};const y=f.session,p=f.user;return f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",y)),{data:{user:p,session:y},error:null}}catch(d){if(ye(d))return{data:{user:null,session:null},error:d};throw d}}async signUp(n){var s,r,u;try{let d;if("email"in n){const{email:b,password:w,options:S}=n;let j=null,C=null;this.flowType==="pkce"&&([j,C]=await Rs(this.storage,this.storageKey)),d=await _e(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:S==null?void 0:S.emailRedirectTo,body:{email:b,password:w,data:(s=S==null?void 0:S.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:S==null?void 0:S.captchaToken},code_challenge:j,code_challenge_method:C},xform:fa})}else if("phone"in n){const{phone:b,password:w,options:S}=n;d=await _e(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:b,password:w,data:(r=S==null?void 0:S.data)!==null&&r!==void 0?r:{},channel:(u=S==null?void 0:S.channel)!==null&&u!==void 0?u:"sms",gotrue_meta_security:{captcha_token:S==null?void 0:S.captchaToken}},xform:fa})}else throw new Nl("You must provide either an email or phone number and a password");const{data:f,error:m}=d;if(m||!f)return{data:{user:null,session:null},error:m};const y=f.session,p=f.user;return f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",y)),{data:{user:p,session:y},error:null}}catch(d){if(ye(d))return{data:{user:null,session:null},error:d};throw d}}async signInWithPassword(n){try{let s;if("email"in n){const{email:d,password:f,options:m}=n;s=await _e(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:d,password:f,gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken}},xform:Og})}else if("phone"in n){const{phone:d,password:f,options:m}=n;s=await _e(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:d,password:f,gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken}},xform:Og})}else throw new Nl("You must provide either an email or phone number and a password");const{data:r,error:u}=s;return u?{data:{user:null,session:null},error:u}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new Ds}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:u})}catch(s){if(ye(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithOAuth(n){var s,r,u,d;return await this._handleProviderSignIn(n.provider,{redirectTo:(s=n.options)===null||s===void 0?void 0:s.redirectTo,scopes:(r=n.options)===null||r===void 0?void 0:r.scopes,queryParams:(u=n.options)===null||u===void 0?void 0:u.queryParams,skipBrowserRedirect:(d=n.options)===null||d===void 0?void 0:d.skipBrowserRedirect})}async exchangeCodeForSession(n){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(n))}async signInWithWeb3(n){const{chain:s}=n;switch(s){case"ethereum":return await this.signInWithEthereum(n);case"solana":return await this.signInWithSolana(n);default:throw new Error(`@supabase/auth-js: Unsupported chain "${s}"`)}}async signInWithEthereum(n){var s,r,u,d,f,m,y,p,b,w,S;let j,C;if("message"in n)j=n.message,C=n.signature;else{const{chain:R,wallet:k,statement:$,options:B}=n;let q;if(Nt())if(typeof k=="object")q=k;else{const O=window;if("ethereum"in O&&typeof O.ethereum=="object"&&"request"in O.ethereum&&typeof O.ethereum.request=="function")q=O.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof k!="object"||!(B!=null&&B.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");q=k}const T=new URL((s=B==null?void 0:B.url)!==null&&s!==void 0?s:window.location.href),Z=await q.request({method:"eth_requestAccounts"}).then(O=>O).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!Z||Z.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const Q=I0(Z[0]);let P=(r=B==null?void 0:B.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!P){const O=await q.request({method:"eth_chainId"});P=Px(O)}const F={domain:T.host,address:Q,statement:$,uri:T.href,version:"1",chainId:P,nonce:(u=B==null?void 0:B.signInWithEthereum)===null||u===void 0?void 0:u.nonce,issuedAt:(f=(d=B==null?void 0:B.signInWithEthereum)===null||d===void 0?void 0:d.issuedAt)!==null&&f!==void 0?f:new Date,expirationTime:(m=B==null?void 0:B.signInWithEthereum)===null||m===void 0?void 0:m.expirationTime,notBefore:(y=B==null?void 0:B.signInWithEthereum)===null||y===void 0?void 0:y.notBefore,requestId:(p=B==null?void 0:B.signInWithEthereum)===null||p===void 0?void 0:p.requestId,resources:(b=B==null?void 0:B.signInWithEthereum)===null||b===void 0?void 0:b.resources};j=Kx(F),C=await q.request({method:"personal_sign",params:[Ix(j),Q]})}try{const{data:R,error:k}=await _e(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:j,signature:C},!((w=n.options)===null||w===void 0)&&w.captchaToken?{gotrue_meta_security:{captcha_token:(S=n.options)===null||S===void 0?void 0:S.captchaToken}}:null),xform:fa});if(k)throw k;return!R||!R.session||!R.user?{data:{user:null,session:null},error:new Ds}:(R.session&&(await this._saveSession(R.session),await this._notifyAllSubscribers("SIGNED_IN",R.session)),{data:Object.assign({},R),error:k})}catch(R){if(ye(R))return{data:{user:null,session:null},error:R};throw R}}async signInWithSolana(n){var s,r,u,d,f,m,y,p,b,w,S,j;let C,R;if("message"in n)C=n.message,R=n.signature;else{const{chain:k,wallet:$,statement:B,options:q}=n;let T;if(Nt())if(typeof $=="object")T=$;else{const Q=window;if("solana"in Q&&typeof Q.solana=="object"&&("signIn"in Q.solana&&typeof Q.solana.signIn=="function"||"signMessage"in Q.solana&&typeof Q.solana.signMessage=="function"))T=Q.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof $!="object"||!(q!=null&&q.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");T=$}const Z=new URL((s=q==null?void 0:q.url)!==null&&s!==void 0?s:window.location.href);if("signIn"in T&&T.signIn){const Q=await T.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},q==null?void 0:q.signInWithSolana),{version:"1",domain:Z.host,uri:Z.href}),B?{statement:B}:null));let P;if(Array.isArray(Q)&&Q[0]&&typeof Q[0]=="object")P=Q[0];else if(Q&&typeof Q=="object"&&"signedMessage"in Q&&"signature"in Q)P=Q;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in P&&"signature"in P&&(typeof P.signedMessage=="string"||P.signedMessage instanceof Uint8Array)&&P.signature instanceof Uint8Array)C=typeof P.signedMessage=="string"?P.signedMessage:new TextDecoder().decode(P.signedMessage),R=P.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in T)||typeof T.signMessage!="function"||!("publicKey"in T)||typeof T!="object"||!T.publicKey||!("toBase58"in T.publicKey)||typeof T.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");C=[`${Z.host} wants you to sign in with your Solana account:`,T.publicKey.toBase58(),...B?["",B,""]:[""],"Version: 1",`URI: ${Z.href}`,`Issued At: ${(u=(r=q==null?void 0:q.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&u!==void 0?u:new Date().toISOString()}`,...!((d=q==null?void 0:q.signInWithSolana)===null||d===void 0)&&d.notBefore?[`Not Before: ${q.signInWithSolana.notBefore}`]:[],...!((f=q==null?void 0:q.signInWithSolana)===null||f===void 0)&&f.expirationTime?[`Expiration Time: ${q.signInWithSolana.expirationTime}`]:[],...!((m=q==null?void 0:q.signInWithSolana)===null||m===void 0)&&m.chainId?[`Chain ID: ${q.signInWithSolana.chainId}`]:[],...!((y=q==null?void 0:q.signInWithSolana)===null||y===void 0)&&y.nonce?[`Nonce: ${q.signInWithSolana.nonce}`]:[],...!((p=q==null?void 0:q.signInWithSolana)===null||p===void 0)&&p.requestId?[`Request ID: ${q.signInWithSolana.requestId}`]:[],...!((w=(b=q==null?void 0:q.signInWithSolana)===null||b===void 0?void 0:b.resources)===null||w===void 0)&&w.length?["Resources",...q.signInWithSolana.resources.map(P=>`- ${P}`)]:[]].join(`
`);const Q=await T.signMessage(new TextEncoder().encode(C),"utf8");if(!Q||!(Q instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");R=Q}}try{const{data:k,error:$}=await _e(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:C,signature:Vn(R)},!((S=n.options)===null||S===void 0)&&S.captchaToken?{gotrue_meta_security:{captcha_token:(j=n.options)===null||j===void 0?void 0:j.captchaToken}}:null),xform:fa});if($)throw $;return!k||!k.session||!k.user?{data:{user:null,session:null},error:new Ds}:(k.session&&(await this._saveSession(k.session),await this._notifyAllSubscribers("SIGNED_IN",k.session)),{data:Object.assign({},k),error:$})}catch(k){if(ye(k))return{data:{user:null,session:null},error:k};throw k}}async _exchangeCodeForSession(n){const s=await qn(this.storage,`${this.storageKey}-code-verifier`),[r,u]=(s??"").split("/");try{const{data:d,error:f}=await _e(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:n,code_verifier:r},xform:fa});if(await fn(this.storage,`${this.storageKey}-code-verifier`),f)throw f;return!d||!d.session||!d.user?{data:{user:null,session:null,redirectType:null},error:new Ds}:(d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",d.session)),{data:Object.assign(Object.assign({},d),{redirectType:u??null}),error:f})}catch(d){if(ye(d))return{data:{user:null,session:null,redirectType:null},error:d};throw d}}async signInWithIdToken(n){try{const{options:s,provider:r,token:u,access_token:d,nonce:f}=n,m=await _e(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:u,access_token:d,nonce:f,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},xform:fa}),{data:y,error:p}=m;return p?{data:{user:null,session:null},error:p}:!y||!y.session||!y.user?{data:{user:null,session:null},error:new Ds}:(y.session&&(await this._saveSession(y.session),await this._notifyAllSubscribers("SIGNED_IN",y.session)),{data:y,error:p})}catch(s){if(ye(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithOtp(n){var s,r,u,d,f;try{if("email"in n){const{email:m,options:y}=n;let p=null,b=null;this.flowType==="pkce"&&([p,b]=await Rs(this.storage,this.storageKey));const{error:w}=await _e(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:m,data:(s=y==null?void 0:y.data)!==null&&s!==void 0?s:{},create_user:(r=y==null?void 0:y.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:y==null?void 0:y.captchaToken},code_challenge:p,code_challenge_method:b},redirectTo:y==null?void 0:y.emailRedirectTo});return{data:{user:null,session:null},error:w}}if("phone"in n){const{phone:m,options:y}=n,{data:p,error:b}=await _e(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:m,data:(u=y==null?void 0:y.data)!==null&&u!==void 0?u:{},create_user:(d=y==null?void 0:y.shouldCreateUser)!==null&&d!==void 0?d:!0,gotrue_meta_security:{captcha_token:y==null?void 0:y.captchaToken},channel:(f=y==null?void 0:y.channel)!==null&&f!==void 0?f:"sms"}});return{data:{user:null,session:null,messageId:p==null?void 0:p.message_id},error:b}}throw new Nl("You must provide either an email or phone number.")}catch(m){if(ye(m))return{data:{user:null,session:null},error:m};throw m}}async verifyOtp(n){var s,r;try{let u,d;"options"in n&&(u=(s=n.options)===null||s===void 0?void 0:s.redirectTo,d=(r=n.options)===null||r===void 0?void 0:r.captchaToken);const{data:f,error:m}=await _e(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},n),{gotrue_meta_security:{captcha_token:d}}),redirectTo:u,xform:fa});if(m)throw m;if(!f)throw new Error("An error occurred on token verification.");const y=f.session,p=f.user;return y!=null&&y.access_token&&(await this._saveSession(y),await this._notifyAllSubscribers(n.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",y)),{data:{user:p,session:y},error:null}}catch(u){if(ye(u))return{data:{user:null,session:null},error:u};throw u}}async signInWithSSO(n){var s,r,u;try{let d=null,f=null;return this.flowType==="pkce"&&([d,f]=await Rs(this.storage,this.storageKey)),await _e(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in n?{provider_id:n.providerId}:null),"domain"in n?{domain:n.domain}:null),{redirect_to:(r=(s=n.options)===null||s===void 0?void 0:s.redirectTo)!==null&&r!==void 0?r:void 0}),!((u=n==null?void 0:n.options)===null||u===void 0)&&u.captchaToken?{gotrue_meta_security:{captcha_token:n.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:d,code_challenge_method:f}),headers:this.headers,xform:Bx})}catch(d){if(ye(d))return{data:null,error:d};throw d}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async n=>{const{data:{session:s},error:r}=n;if(r)throw r;if(!s)throw new ha;const{error:u}=await _e(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:s.access_token});return{data:{user:null,session:null},error:u}})}catch(n){if(ye(n))return{data:{user:null,session:null},error:n};throw n}}async resend(n){try{const s=`${this.url}/resend`;if("email"in n){const{email:r,type:u,options:d}=n,{error:f}=await _e(this.fetch,"POST",s,{headers:this.headers,body:{email:r,type:u,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken}},redirectTo:d==null?void 0:d.emailRedirectTo});return{data:{user:null,session:null},error:f}}else if("phone"in n){const{phone:r,type:u,options:d}=n,{data:f,error:m}=await _e(this.fetch,"POST",s,{headers:this.headers,body:{phone:r,type:u,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken}}});return{data:{user:null,session:null,messageId:f==null?void 0:f.message_id},error:m}}throw new Nl("You must provide either an email or phone number and a type")}catch(s){if(ye(s))return{data:{user:null,session:null},error:s};throw s}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async s=>s))}async _acquireLock(n,s){this._debug("#_acquireLock","begin",n);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),u=(async()=>(await r,await s()))();return this.pendingInLock.push((async()=>{try{await u}catch{}})()),u}return await this.lock(`lock:${this.storageKey}`,n,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=s();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const u=[...this.pendingInLock];await Promise.all(u),this.pendingInLock.splice(0,u.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(n){this._debug("#_useSession","begin");try{const s=await this.__loadSession();return await n(s)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let n=null;const s=await qn(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",s),s!==null&&(this._isValidSession(s)?n=s:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!n)return{data:{session:null},error:null};const r=n.expires_at?n.expires_at*1e3-Date.now()<cu:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",n.expires_at),!r){if(this.userStorage){const f=await qn(this.userStorage,this.storageKey+"-user");f!=null&&f.user?n.user=f.user:n.user=hu()}if(this.storage.isServer&&n.user&&!n.user.__isUserNotAvailableProxy){const f={value:this.suppressGetSessionWarning};n.user=zx(n.user,f),f.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:n},error:null}}const{data:u,error:d}=await this._callRefreshToken(n.refresh_token);return d?{data:{session:null},error:d}:{data:{session:u},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(n){return n?await this._getUser(n):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(n){try{return n?await _e(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:n,xform:gn}):await this._useSession(async s=>{var r,u,d;const{data:f,error:m}=s;if(m)throw m;return!(!((r=f.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new ha}:await _e(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(d=(u=f.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0,xform:gn})})}catch(s){if(ye(s))return hx(s)&&(await this._removeSession(),await fn(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:s};throw s}}async updateUser(n,s={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(n,s))}async _updateUser(n,s={}){try{return await this._useSession(async r=>{const{data:u,error:d}=r;if(d)throw d;if(!u.session)throw new ha;const f=u.session;let m=null,y=null;this.flowType==="pkce"&&n.email!=null&&([m,y]=await Rs(this.storage,this.storageKey));const{data:p,error:b}=await _e(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:s==null?void 0:s.emailRedirectTo,body:Object.assign(Object.assign({},n),{code_challenge:m,code_challenge_method:y}),jwt:f.access_token,xform:gn});if(b)throw b;return f.user=p.user,await this._saveSession(f),await this._notifyAllSubscribers("USER_UPDATED",f),{data:{user:f.user},error:null}})}catch(r){if(ye(r))return{data:{user:null},error:r};throw r}}async setSession(n){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(n))}async _setSession(n){try{if(!n.access_token||!n.refresh_token)throw new ha;const s=Date.now()/1e3;let r=s,u=!0,d=null;const{payload:f}=du(n.access_token);if(f.exp&&(r=f.exp,u=r<=s),u){const{data:m,error:y}=await this._callRefreshToken(n.refresh_token);if(y)return{data:{user:null,session:null},error:y};if(!m)return{data:{user:null,session:null},error:null};d=m}else{const{data:m,error:y}=await this._getUser(n.access_token);if(y)throw y;d={access_token:n.access_token,refresh_token:n.refresh_token,user:m.user,token_type:"bearer",expires_in:r-s,expires_at:r},await this._saveSession(d),await this._notifyAllSubscribers("SIGNED_IN",d)}return{data:{user:d.user,session:d},error:null}}catch(s){if(ye(s))return{data:{session:null,user:null},error:s};throw s}}async refreshSession(n){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(n))}async _refreshSession(n){try{return await this._useSession(async s=>{var r;if(!n){const{data:f,error:m}=s;if(m)throw m;n=(r=f.session)!==null&&r!==void 0?r:void 0}if(!(n!=null&&n.refresh_token))throw new ha;const{data:u,error:d}=await this._callRefreshToken(n.refresh_token);return d?{data:{user:null,session:null},error:d}:u?{data:{user:u.user,session:u},error:null}:{data:{user:null,session:null},error:null}})}catch(s){if(ye(s))return{data:{user:null,session:null},error:s};throw s}}async _getSessionFromURL(n,s){try{if(!Nt())throw new El("No browser detected.");if(n.error||n.error_description||n.error_code)throw new El(n.error_description||"Error in URL with unspecified error_description",{error:n.error||"unspecified_error",code:n.error_code||"unspecified_code"});switch(s){case"implicit":if(this.flowType==="pkce")throw new jg("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new El("Not a valid implicit grant flow url.");break;default:}if(s==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!n.code)throw new jg("No code detected.");const{data:B,error:q}=await this._exchangeCodeForSession(n.code);if(q)throw q;const T=new URL(window.location.href);return T.searchParams.delete("code"),window.history.replaceState(window.history.state,"",T.toString()),{data:{session:B.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:u,access_token:d,refresh_token:f,expires_in:m,expires_at:y,token_type:p}=n;if(!d||!m||!f||!p)throw new El("No session defined in URL");const b=Math.round(Date.now()/1e3),w=parseInt(m);let S=b+w;y&&(S=parseInt(y));const j=S-b;j*1e3<=Bs&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${j}s, should have been closer to ${w}s`);const C=S-w;b-C>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",C,S,b):b-C<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",C,S,b);const{data:R,error:k}=await this._getUser(d);if(k)throw k;const $={provider_token:r,provider_refresh_token:u,access_token:d,expires_in:w,expires_at:S,refresh_token:f,token_type:p,user:R.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:$,redirectType:n.type},error:null}}catch(r){if(ye(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(n){return!!(n.access_token||n.error_description)}async _isPKCECallback(n){const s=await qn(this.storage,`${this.storageKey}-code-verifier`);return!!(n.code&&s)}async signOut(n={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(n))}async _signOut({scope:n}={scope:"global"}){return await this._useSession(async s=>{var r;const{data:u,error:d}=s;if(d)return{error:d};const f=(r=u.session)===null||r===void 0?void 0:r.access_token;if(f){const{error:m}=await this.admin.signOut(f,n);if(m&&!(dx(m)&&(m.status===404||m.status===401||m.status===403)))return{error:m}}return n!=="others"&&(await this._removeSession(),await fn(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(n){const s=xx(),r={id:s,callback:n,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",s),this.stateChangeEmitters.delete(s)}};return this._debug("#onAuthStateChange()","registered callback with id",s),this.stateChangeEmitters.set(s,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(s)})))(),{data:{subscription:r}}}async _emitInitialSession(n){return await this._useSession(async s=>{var r,u;try{const{data:{session:d},error:f}=s;if(f)throw f;await((r=this.stateChangeEmitters.get(n))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",d)),this._debug("INITIAL_SESSION","callback id",n,"session",d)}catch(d){await((u=this.stateChangeEmitters.get(n))===null||u===void 0?void 0:u.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",n,"error",d),console.error(d)}})}async resetPasswordForEmail(n,s={}){let r=null,u=null;this.flowType==="pkce"&&([r,u]=await Rs(this.storage,this.storageKey,!0));try{return await _e(this.fetch,"POST",`${this.url}/recover`,{body:{email:n,code_challenge:r,code_challenge_method:u,gotrue_meta_security:{captcha_token:s.captchaToken}},headers:this.headers,redirectTo:s.redirectTo})}catch(d){if(ye(d))return{data:null,error:d};throw d}}async getUserIdentities(){var n;try{const{data:s,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(n=s.user.identities)!==null&&n!==void 0?n:[]},error:null}}catch(s){if(ye(s))return{data:null,error:s};throw s}}async linkIdentity(n){return"token"in n?this.linkIdentityIdToken(n):this.linkIdentityOAuth(n)}async linkIdentityOAuth(n){var s;try{const{data:r,error:u}=await this._useSession(async d=>{var f,m,y,p,b;const{data:w,error:S}=d;if(S)throw S;const j=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,n.provider,{redirectTo:(f=n.options)===null||f===void 0?void 0:f.redirectTo,scopes:(m=n.options)===null||m===void 0?void 0:m.scopes,queryParams:(y=n.options)===null||y===void 0?void 0:y.queryParams,skipBrowserRedirect:!0});return await _e(this.fetch,"GET",j,{headers:this.headers,jwt:(b=(p=w.session)===null||p===void 0?void 0:p.access_token)!==null&&b!==void 0?b:void 0})});if(u)throw u;return Nt()&&!(!((s=n.options)===null||s===void 0)&&s.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:n.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(ye(r))return{data:{provider:n.provider,url:null},error:r};throw r}}async linkIdentityIdToken(n){return await this._useSession(async s=>{var r;try{const{error:u,data:{session:d}}=s;if(u)throw u;const{options:f,provider:m,token:y,access_token:p,nonce:b}=n,w=await _e(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=d==null?void 0:d.access_token)!==null&&r!==void 0?r:void 0,body:{provider:m,id_token:y,access_token:p,nonce:b,link_identity:!0,gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:fa}),{data:S,error:j}=w;return j?{data:{user:null,session:null},error:j}:!S||!S.session||!S.user?{data:{user:null,session:null},error:new Ds}:(S.session&&(await this._saveSession(S.session),await this._notifyAllSubscribers("USER_UPDATED",S.session)),{data:S,error:j})}catch(u){if(ye(u))return{data:{user:null,session:null},error:u};throw u}})}async unlinkIdentity(n){try{return await this._useSession(async s=>{var r,u;const{data:d,error:f}=s;if(f)throw f;return await _e(this.fetch,"DELETE",`${this.url}/user/identities/${n.identity_id}`,{headers:this.headers,jwt:(u=(r=d.session)===null||r===void 0?void 0:r.access_token)!==null&&u!==void 0?u:void 0})})}catch(s){if(ye(s))return{data:null,error:s};throw s}}async _refreshAccessToken(n){const s=`#_refreshAccessToken(${n.substring(0,5)}...)`;this._debug(s,"begin");try{const r=Date.now();return await jx(async u=>(u>0&&await Sx(200*Math.pow(2,u-1)),this._debug(s,"refreshing attempt",u),await _e(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:n},headers:this.headers,xform:fa})),(u,d)=>{const f=200*Math.pow(2,u);return d&&uu(d)&&Date.now()+f-r<Bs})}catch(r){if(this._debug(s,"error",r),ye(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(s,"end")}}_isValidSession(n){return typeof n=="object"&&n!==null&&"access_token"in n&&"refresh_token"in n&&"expires_at"in n}async _handleProviderSignIn(n,s){const r=await this._getUrlForProvider(`${this.url}/authorize`,n,{redirectTo:s.redirectTo,scopes:s.scopes,queryParams:s.queryParams});return this._debug("#_handleProviderSignIn()","provider",n,"options",s,"url",r),Nt()&&!s.skipBrowserRedirect&&window.location.assign(r),{data:{provider:n,url:r},error:null}}async _recoverAndRefresh(){var n,s;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const u=await qn(this.storage,this.storageKey);if(u&&this.userStorage){let f=await qn(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!f&&(f={user:u.user},await $s(this.userStorage,this.storageKey+"-user",f)),u.user=(n=f==null?void 0:f.user)!==null&&n!==void 0?n:hu()}else if(u&&!u.user&&!u.user){const f=await qn(this.storage,this.storageKey+"-user");f&&(f!=null&&f.user)?(u.user=f.user,await fn(this.storage,this.storageKey+"-user"),await $s(this.storage,this.storageKey,u)):u.user=hu()}if(this._debug(r,"session from storage",u),!this._isValidSession(u)){this._debug(r,"session is not valid"),u!==null&&await this._removeSession();return}const d=((s=u.expires_at)!==null&&s!==void 0?s:1/0)*1e3-Date.now()<cu;if(this._debug(r,`session has${d?"":" not"} expired with margin of ${cu}s`),d){if(this.autoRefreshToken&&u.refresh_token){const{error:f}=await this._callRefreshToken(u.refresh_token);f&&(console.error(f),uu(f)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",f),await this._removeSession()))}}else if(u.user&&u.user.__isUserNotAvailableProxy===!0)try{const{data:f,error:m}=await this._getUser(u.access_token);!m&&(f!=null&&f.user)?(u.user=f.user,await this._saveSession(u),await this._notifyAllSubscribers("SIGNED_IN",u)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(f){console.error("Error getting user data:",f),this._debug(r,"error getting user data, skipping SIGNED_IN notification",f)}else await this._notifyAllSubscribers("SIGNED_IN",u)}catch(u){this._debug(r,"error",u),console.error(u);return}finally{this._debug(r,"end")}}async _callRefreshToken(n){var s,r;if(!n)throw new ha;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const u=`#_callRefreshToken(${n.substring(0,5)}...)`;this._debug(u,"begin");try{this.refreshingDeferred=new Ul;const{data:d,error:f}=await this._refreshAccessToken(n);if(f)throw f;if(!d.session)throw new ha;await this._saveSession(d.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",d.session);const m={data:d.session,error:null};return this.refreshingDeferred.resolve(m),m}catch(d){if(this._debug(u,"error",d),ye(d)){const f={data:null,error:d};return uu(d)||await this._removeSession(),(s=this.refreshingDeferred)===null||s===void 0||s.resolve(f),f}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(d),d}finally{this.refreshingDeferred=null,this._debug(u,"end")}}async _notifyAllSubscribers(n,s,r=!0){const u=`#_notifyAllSubscribers(${n})`;this._debug(u,"begin",s,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:n,session:s});const d=[],f=Array.from(this.stateChangeEmitters.values()).map(async m=>{try{await m.callback(n,s)}catch(y){d.push(y)}});if(await Promise.all(f),d.length>0){for(let m=0;m<d.length;m+=1)console.error(d[m]);throw d[0]}}finally{this._debug(u,"end")}}async _saveSession(n){this._debug("#_saveSession()",n),this.suppressGetSessionWarning=!0;const s=Object.assign({},n),r=s.user&&s.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&s.user&&await $s(this.userStorage,this.storageKey+"-user",{user:s.user});const u=Object.assign({},s);delete u.user;const d=Cg(u);await $s(this.storage,this.storageKey,d)}else{const u=Cg(s);await $s(this.storage,this.storageKey,u)}}async _removeSession(){this._debug("#_removeSession()"),await fn(this.storage,this.storageKey),await fn(this.storage,this.storageKey+"-code-verifier"),await fn(this.storage,this.storageKey+"-user"),this.userStorage&&await fn(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const n=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{n&&Nt()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",n)}catch(s){console.error("removing visibilitychange callback failed",s)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const n=setInterval(()=>this._autoRefreshTokenTick(),Bs);this.autoRefreshTicker=n,n&&typeof n=="object"&&typeof n.unref=="function"?n.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(n),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const n=this.autoRefreshTicker;this.autoRefreshTicker=null,n&&clearInterval(n)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const n=Date.now();try{return await this._useSession(async s=>{const{data:{session:r}}=s;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const u=Math.floor((r.expires_at*1e3-n)/Bs);this._debug("#_autoRefreshTokenTick()",`access token expires in ${u} ticks, a tick lasts ${Bs}ms, refresh threshold is ${Au} ticks`),u<=Au&&await this._callRefreshToken(r.refresh_token)})}catch(s){console.error("Auto refresh tick failed with error. This is likely a transient error.",s)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(n){if(n.isAcquireTimeout||n instanceof P0)this._debug("auto refresh token tick lock not available");else throw n}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Nt()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(n){console.error("_handleVisibilityChange",n)}}async _onVisibilityChanged(n){const s=`#_onVisibilityChanged(${n})`;this._debug(s,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),n||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(s,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(n,s,r){const u=[`provider=${encodeURIComponent(s)}`];if(r!=null&&r.redirectTo&&u.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&u.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[d,f]=await Rs(this.storage,this.storageKey),m=new URLSearchParams({code_challenge:`${encodeURIComponent(d)}`,code_challenge_method:`${encodeURIComponent(f)}`});u.push(m.toString())}if(r!=null&&r.queryParams){const d=new URLSearchParams(r.queryParams);u.push(d.toString())}return r!=null&&r.skipBrowserRedirect&&u.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${n}?${u.join("&")}`}async _unenroll(n){try{return await this._useSession(async s=>{var r;const{data:u,error:d}=s;return d?{data:null,error:d}:await _e(this.fetch,"DELETE",`${this.url}/factors/${n.factorId}`,{headers:this.headers,jwt:(r=u==null?void 0:u.session)===null||r===void 0?void 0:r.access_token})})}catch(s){if(ye(s))return{data:null,error:s};throw s}}async _enroll(n){try{return await this._useSession(async s=>{var r,u;const{data:d,error:f}=s;if(f)return{data:null,error:f};const m=Object.assign({friendly_name:n.friendlyName,factor_type:n.factorType},n.factorType==="phone"?{phone:n.phone}:n.factorType==="totp"?{issuer:n.issuer}:{}),{data:y,error:p}=await _e(this.fetch,"POST",`${this.url}/factors`,{body:m,headers:this.headers,jwt:(r=d==null?void 0:d.session)===null||r===void 0?void 0:r.access_token});return p?{data:null,error:p}:(n.factorType==="totp"&&y.type==="totp"&&(!((u=y==null?void 0:y.totp)===null||u===void 0)&&u.qr_code)&&(y.totp.qr_code=`data:image/svg+xml;utf-8,${y.totp.qr_code}`),{data:y,error:null})})}catch(s){if(ye(s))return{data:null,error:s};throw s}}async _verify(n){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var r;const{data:u,error:d}=s;if(d)return{data:null,error:d};const f=Object.assign({challenge_id:n.challengeId},"webauthn"in n?{webauthn:Object.assign(Object.assign({},n.webauthn),{credential_response:n.webauthn.type==="create"?ew(n.webauthn.credential_response):tw(n.webauthn.credential_response)})}:{code:n.code}),{data:m,error:y}=await _e(this.fetch,"POST",`${this.url}/factors/${n.factorId}/verify`,{body:f,headers:this.headers,jwt:(r=u==null?void 0:u.session)===null||r===void 0?void 0:r.access_token});return y?{data:null,error:y}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+m.expires_in},m)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",m),{data:m,error:y})})}catch(s){if(ye(s))return{data:null,error:s};throw s}})}async _challenge(n){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var r;const{data:u,error:d}=s;if(d)return{data:null,error:d};const f=await _e(this.fetch,"POST",`${this.url}/factors/${n.factorId}/challenge`,{body:n,headers:this.headers,jwt:(r=u==null?void 0:u.session)===null||r===void 0?void 0:r.access_token});if(f.error)return f;const{data:m}=f;if(m.type!=="webauthn")return{data:m,error:null};switch(m.webauthn.type){case"create":return{data:Object.assign(Object.assign({},m),{webauthn:Object.assign(Object.assign({},m.webauthn),{credential_options:Object.assign(Object.assign({},m.webauthn.credential_options),{publicKey:Fx(m.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},m),{webauthn:Object.assign(Object.assign({},m.webauthn),{credential_options:Object.assign(Object.assign({},m.webauthn.credential_options),{publicKey:Wx(m.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(s){if(ye(s))return{data:null,error:s};throw s}})}async _challengeAndVerify(n){const{data:s,error:r}=await this._challenge({factorId:n.factorId});return r?{data:null,error:r}:await this._verify({factorId:n.factorId,challengeId:s.id,code:n.code})}async _listFactors(){var n;const{data:{user:s},error:r}=await this.getUser();if(r)return{data:null,error:r};const u={all:[],phone:[],totp:[],webauthn:[]};for(const d of(n=s==null?void 0:s.factors)!==null&&n!==void 0?n:[])u.all.push(d),d.status==="verified"&&u[d.factor_type].push(d);return{data:u,error:null}}async _getAuthenticatorAssuranceLevel(){var n,s;const{data:{session:r},error:u}=await this.getSession();if(u)return{data:null,error:u};if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:d}=du(r.access_token);let f=null;d.aal&&(f=d.aal);let m=f;((s=(n=r.user.factors)===null||n===void 0?void 0:n.filter(b=>b.status==="verified"))!==null&&s!==void 0?s:[]).length>0&&(m="aal2");const p=d.amr||[];return{data:{currentLevel:f,nextLevel:m,currentAuthenticationMethods:p},error:null}}async _getAuthorizationDetails(n){try{return await this._useSession(async s=>{const{data:{session:r},error:u}=s;return u?{data:null,error:u}:r?await _e(this.fetch,"GET",`${this.url}/oauth/authorizations/${n}`,{headers:this.headers,jwt:r.access_token,xform:d=>({data:d,error:null})}):{data:null,error:new ha}})}catch(s){if(ye(s))return{data:null,error:s};throw s}}async _approveAuthorization(n,s){try{return await this._useSession(async r=>{const{data:{session:u},error:d}=r;if(d)return{data:null,error:d};if(!u)return{data:null,error:new ha};const f=await _e(this.fetch,"POST",`${this.url}/oauth/authorizations/${n}/consent`,{headers:this.headers,jwt:u.access_token,body:{action:"approve"},xform:m=>({data:m,error:null})});return f.data&&f.data.redirect_url&&Nt()&&!(s!=null&&s.skipBrowserRedirect)&&window.location.assign(f.data.redirect_url),f})}catch(r){if(ye(r))return{data:null,error:r};throw r}}async _denyAuthorization(n,s){try{return await this._useSession(async r=>{const{data:{session:u},error:d}=r;if(d)return{data:null,error:d};if(!u)return{data:null,error:new ha};const f=await _e(this.fetch,"POST",`${this.url}/oauth/authorizations/${n}/consent`,{headers:this.headers,jwt:u.access_token,body:{action:"deny"},xform:m=>({data:m,error:null})});return f.data&&f.data.redirect_url&&Nt()&&!(s!=null&&s.skipBrowserRedirect)&&window.location.assign(f.data.redirect_url),f})}catch(r){if(ye(r))return{data:null,error:r};throw r}}async fetchJwk(n,s={keys:[]}){let r=s.keys.find(m=>m.kid===n);if(r)return r;const u=Date.now();if(r=this.jwks.keys.find(m=>m.kid===n),r&&this.jwks_cached_at+cx>u)return r;const{data:d,error:f}=await _e(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(f)throw f;return!d.keys||d.keys.length===0||(this.jwks=d,this.jwks_cached_at=u,r=d.keys.find(m=>m.kid===n),!r)?null:r}async getClaims(n,s={}){try{let r=n;if(!r){const{data:j,error:C}=await this.getSession();if(C||!j.session)return{data:null,error:C};r=j.session.access_token}const{header:u,payload:d,signature:f,raw:{header:m,payload:y}}=du(r);s!=null&&s.allowExpired||Ox(d.exp);const p=!u.alg||u.alg.startsWith("HS")||!u.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(u.kid,s!=null&&s.keys?{keys:s.keys}:s==null?void 0:s.jwks);if(!p){const{error:j}=await this.getUser(r);if(j)throw j;return{data:{claims:d,header:u,signature:f},error:null}}const b=Dx(u.alg),w=await crypto.subtle.importKey("jwk",p,b,!0,["verify"]);if(!await crypto.subtle.verify(b,w,f,vx(`${m}.${y}`)))throw new Ou("Invalid JWT signature");return{data:{claims:d,header:u,signature:f},error:null}}catch(r){if(ye(r))return{data:null,error:r};throw r}}}Fi.nextInstanceID=0;const uw=Fi;class dw extends uw{constructor(n){super(n)}}class hw{constructor(n,s,r){var u,d,f;this.supabaseUrl=n,this.supabaseKey=s;const m=sx(n);if(!s)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",m),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",m),this.storageUrl=new URL("storage/v1",m),this.functionsUrl=new URL("functions/v1",m);const y=`sb-${m.hostname.split(".")[0]}-auth-token`,p={db:Xb,realtime:Fb,auth:Object.assign(Object.assign({},Zb),{storageKey:y}),global:Jb},b=nx(r??{},p);this.storageKey=(u=b.auth.storageKey)!==null&&u!==void 0?u:"",this.headers=(d=b.global.headers)!==null&&d!==void 0?d:{},b.accessToken?(this.accessToken=b.accessToken,this.auth=new Proxy({},{get:(w,S)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(S)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((f=b.auth)!==null&&f!==void 0?f:{},this.headers,b.global.fetch),this.fetch=tx(s,this._getAccessToken.bind(this),b.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},b.realtime)),this.rest=new ib(new URL("rest/v1",m).href,{headers:this.headers,schema:b.db.schema,fetch:this.fetch}),this.storage=new Ib(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),b.accessToken||this._listenForAuthEvents()}get functions(){return new Xv(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(n){return this.rest.from(n)}schema(n){return this.rest.schema(n)}rpc(n,s={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(n,s,r)}channel(n,s={config:{}}){return this.realtime.channel(n,s)}getChannels(){return this.realtime.getChannels()}removeChannel(n){return this.realtime.removeChannel(n)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var n,s;if(this.accessToken)return await this.accessToken();const{data:r}=await this.auth.getSession();return(s=(n=r.session)===null||n===void 0?void 0:n.access_token)!==null&&s!==void 0?s:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:n,persistSession:s,detectSessionInUrl:r,storage:u,userStorage:d,storageKey:f,flowType:m,lock:y,debug:p},b,w){const S={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new dw({url:this.authUrl.href,headers:Object.assign(Object.assign({},S),b),storageKey:f,autoRefreshToken:n,persistSession:s,detectSessionInUrl:r,storage:u,userStorage:d,flowType:m,lock:y,debug:p,fetch:w,hasCustomAuthorizationHeader:Object.keys(this.headers).some(j=>j.toLowerCase()==="authorization")})}_initRealtimeClient(n){return new _b(this.realtimeUrl.href,Object.assign(Object.assign({},n),{params:Object.assign({apikey:this.supabaseKey},n==null?void 0:n.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((s,r)=>{this._handleTokenChanged(s,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(n,s,r){(n==="TOKEN_REFRESHED"||n==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):n==="SIGNED_OUT"&&(this.realtime.setAuth(),s=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const fw=(l,n,s)=>new hw(l,n,s);function mw(){if(typeof window<"u"||typeof process>"u")return!1;const l=process.version;if(l==null)return!1;const n=l.match(/^v(\d+)\./);return n?parseInt(n[1],10)<=18:!1}mw()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const gw="https://kxvimzacukdqqldfkocu.supabase.co",pw="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imt4dmltemFjdWtkcXFsZGZrb2N1Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjE5MzgyNjUsImV4cCI6MjA3NzUxNDI2NX0.c6m_N2avqmV_vqaAxPhS1ftRUbJTEmBge3AxLpXRu6U",ae=fw(gw,pw);let In="tr";const yw=()=>{var l;if(typeof window<"u"){const n=localStorage.getItem("app_language");if(n==="tr"||n==="en")return n;if(((l=navigator.language)==null?void 0:l.slice(0,2))==="en")return"en"}return"tr"};In=yw();const Q0=l=>{In=l,typeof window<"u"&&localStorage.setItem("app_language",l)},Ke=()=>In,vw={tr:{turkish:"Trke",math:"Matematik",science:"Fen",social:"Sosyal",motor_health:"Hareket ve Salk",art:"Sanat",music:"Mzik"},en:{turkish:"Turkish Language",math:"Mathematics",science:"Science",social:"Social Studies",motor_health:"Motor & Health",art:"Art",music:"Music"}},Et=()=>vw[In],bw={tr:{classroom:"Snf i",outdoor:"D Mekan",home:"Ev",other:"Dier"},en:{classroom:"Classroom",outdoor:"Outdoor",home:"Home",other:"Other"}},Ug=()=>bw[In],yn=()=>In==="tr"?"tr-TR":"en-US",Lg={tr:{appName:"PortfoAI",signInTitle:"Giri Yapn",signUpTitle:"Hesap Oluturun",signInDescription:"Hesabnza erimek iin e-posta ve parolanz girin.",signUpDescription:"Balamak iin yeni bir hesap oluturun.",emailLabel:"E-posta Adresi",passwordLabel:"Parola",signInAction:"Giri Yap",signUpAction:"ye Ol",noAccountPrompt:"Hesabnz yok mu?",haveAccountPrompt:"Zaten hesabnz var m?",switchToSignUp:"ye Olun",switchToSignIn:"Giri Yapn",signUpSuccess:"Hesabnz oluturuldu! Ltfen e-postanz dorulayn.",apiKeyError:"Supabase API Anahtar geersiz veya eksik.",dashboard:"Anasayfa",children:"ocuklar",observations:"Gzlemler",settings:"Ayarlar",signOut:"k Yap",welcome:"Ho Geldiniz",landingHero:"Yapay zeka destekli gzlem, analiz ve portfolyo ynetimi ile ocuklarn geliimini profesyonelce takip edin.",smartAnalysisTitle:"Akll Gzlem Analizi",smartAnalysisDesc:"Yapay zeka ile otomatik deerlendirme ve neriler",digitalPortfolioTitle:"Dijital Portfolyo",digitalPortfolioDesc:"ocuklarn rnlerini ve geliimini dijital ortamda saklayn",anyDeviceTitle:"Her Yerden Eriim",anyDeviceDesc:"Telefon, tablet veya bilgisayardan kolayca ulan",createAccountTitle:"Hesap Olutur",welcomeTitle:"Ho Geldiniz",createAccountDesc:"Yeni bir hesap oluturun ve balayn",signInDesc:"Hesabnza giri yapn",yourName:"Adnz",yourSurname:"Soyadnz",schoolName:"Okul Ad",secureSSL:"SSL ifreli",secureBadge:"Gvenli",fastBadge:"Hzl",footerRights:" 2025 PortfoAI - Tm haklar sakldr",haveAccountBtn:"Zaten hesabnz var m? Giri yapn",noAccountBtn:"Hesabnz yok mu? Kayt olun",missingTeacherFields:"Ltfen ad, soyad ve okul alanlarn doldurun.",recentObservations:"Son Gzlemler",quickAccess:"Hzl Eriim",addChild:"ocuk Ekle",addObservation:"Gzlem Ekle",editObservation:"Gzlemi Dzenle",childList:"ocuk Listesi",searchChild:"ocuk ara...",noChildrenFound:"Henz hi ocuk eklenmedi.",childProfile:"ocuk Profili",firstName:"Ad",lastName:"Soyad",dob:"Doum Tarihi",age:"Ya",classroom:"Snf",parentalConsent:"Veli Onay Alnd",save:"Kaydet",cancel:"ptal",delete:"Sil",edit:"Dzenle",newObservationFor:"iin Yeni Gzlem",observationNote:"Gzlem Notu",notePlaceholder:"ocuun davranlar, szleri ve etkileimleri hakknda detayl notlar...",developmentDomains:"Beceri Alanlar",selectDomains:"lgili beceri alanlarn sein",context:"Ortam",tags:"Etiketler",tagsPlaceholder:"Virgl ile ayrarak etiket ekleyin",addMedia:"Fotoraf/Video Ekle",submitObservation:"Gzlemi Kaydet",consentYes:"Evet",consentNo:"Hayr",childDetail:"ocuk Detaylar",profile:"Profil",development:"Geliim",media:"Medya",generateReport:"Geliim Raporu Olutur",aiAnalysis:"Yapay Zeka Analizi",getAnalysis:"Analiz ste",summary:"zet",riskLevel:"Risk Dzeyi",suggestions:"retmene neriler",domainScores:"Alan Puanlar",low:"Dk",medium:"Orta",high:"Yksek",loading:"Ykleniyor...",deleting:"Siliniyor...",errorOccurred:"Bir hata olutu.",offlineWarning:"evrimd moddasnz.",syncAttempt:"Veriler senkronize ediliyor...",syncSuccess:"Veriler baaryla senkronize edildi.",syncError:"Senkronizasyon srasnda hata olutu.",noInternetConnection:"nternet balantnz bulunmuyor. Baz zellikler almayabilir.",exportData:"Verileri Da Aktar",exportChildData:"ocuun Verilerini Da Aktar (JSON)",legal:"Yasal Bilgiler",privacyPolicy:"Gizlilik Politikas",termsOfService:"Hizmet artlar",noRecentObservations:"Yakn zamanda gzlem yok.",childNotFound:"ocuk bulunamad.",pendingSync:"Senkronizasyon bekleniyor.",developmentSummary:"Geliim zeti",developmentReport:"Geliim Raporu",reportDate:"Rapor Tarihi",childInfo:"ocuk Bilgileri",fullName:"Tam Ad",aiSummariesAndSuggestions:"Yapay Zeka zetleri ve neriler",noAssessmentsForReport:"Rapor iin deerlendirme yok.",observationDate:"Gzlem Tarihi",aiSummary:"Yapay Zeka zeti",observationSavedOffline:"Gzlem evrimd kaydedildi.",observationsSynced:"Gzlemler senkronize edildi.",exportDataDescription:"Tm verilerinizi JSON olarak da Aktarn.",exportAllData:"Tm Verileri Da Aktar",products:"rnler",selectValidImage:"Ltfen geerli bir resim dosyas sein.",fileTooLarge:"Dosya boyutu ok byk. Maksimum 10MB olmaldr.",profilePhoto:"Profil Fotoraf",retakePhoto:"Yeniden ek",deletePhoto:"Fotoraf Sil",takeWithCamera:"Kamera ile ek",uploadFromFile:"Dosyadan Ykle",changePhoto:"Fotoraf Deitir",lowRisk:"Dk Risk",mediumRisk:"Orta Risk",highRisk:"Yksek Risk",unknown:"Belirsiz",notAddedYet:"Henz eklenmedi.",interestsSection:"lgi Alanlar",strengthsSection:"Gl Ynler",guardiansSection:"Veli ve letiim Bilgileri",noGuardiansAdded:"Veli bilgisi eklenmemi.",enrollmentDate:"Kayt Tarihi",importantNotes:"nemli Notlar",aiInsights:"Yapay Zek ngrleri",goalsLoadError:"Hedefler yklenemedi",goalsLoading:"Hedefler ykleniyor...",developmentGoals:"Geliim Hedefleri",addGoal:"Hedef Ekle",addNewGoal:"Yeni Hedef Ekle",goalTitle:"Hedef Bal",goalTitlePlaceholder:"rn: 10 kelime renme",developmentArea:"Geliim Alan",priority:"ncelik",priorityLow:"Dk",priorityMedium:"Orta",priorityHigh:"Yksek",targetDate:"Hedef Tarihi",descriptionLabel:"Aklama",descriptionPlaceholder:"Hedef hakknda detayl aklama...",statusCompleted:"Tamamland",statusInProgress:"Devam Ediyor",statusNotStarted:"Balamad",statusCancelled:"ptal Edildi",noGoalsYet:"Henz hedef belirlenmemi.",addGoalHint:"Yukardaki butondan yeni hedef ekleyebilirsiniz.",attachPhotoOptional:"Ek Fotoraf (istee bal)",present:"Geldi",absent:"Gelmedi",late:"Ge",allItems:"Tm",fullList:"Tm Liste",studentsShown:"renci gsteriliyor",theme:"Tema",lightTheme:"Ak",darkTheme:"Koyu",pdfTeacher:"retmen",pdfSchool:"Okul",pdfReport:"Rapor",pdfTitle:"Geliim Raporu",pdfProductMedia:"rn / Medya",pdfObservation:"Gzlem",pdfObservationNote:"Gzlem Notu",pdfAiSummary:"Yapay Zek zeti",pdfSuggestions:"retmene neriler",pdfBirth:"Doum",pdfAge:"Ya",pdfClass:"Snf",pdfNoObservations:"Gzlem bulunamad.",pdfYears:"yl",pdfMonths:"ay",filtering:"Filtreleniyor",classLabel:"Snf:",pinned:"Sabit",last7daysObs:"Son 7 Gn Gzlem",last7daysProducts:"Son 7 Gn rn",nameSurnamePlaceholder:"Ad Soyad...",developmentTrend:"Geliim Alan Trendi (8 Hafta)",deleteClassConfirm:'"{classroom}" snfn silmek istediinize emin misiniz?',deleteClassConfirmWithChildren:`"{classroom}" snfn silmek istediinize emin misiniz?

Bu ilem {childCount} ocuu ve tm gzlem/rn kaytlarn kalc olarak silecektir!`,classDeleting:"Snf siliniyor...",changeLanguageDesc:"Uygulama dilini deitirin.",createDemoData:"Demo Verisi Olutur",demoDataDesc:"Mevcut hesabnza rnek snf, ocuk, gzlem ve rn fotoraflar ekler.",classCount:"Snf says (15)",childrenPerClass:"Snf bana ocuk",obsPerChild:"ocuk bana gzlem",mediaPerChild:"ocuk bana rn",starting:"Balyor...",completed:"Tamamland.",errorPrefix:"Hata:",creating:"Oluturuluyor...",createDemoBtn:"Demo Verisini Olutur",demoNote:"Not: lem internet hzna gre zaman alabilir.",confirmRemoveDemo:"Demo verileri kaldrlacak. Devam edilsin mi?",removing:"Kaldrlyor...",removeDemoBtn:"Demo Verisini Geri Al",aiInsightsDesc:"Hesabnzdaki gzlemler iin eksik/yer tutucu (fallback) analizleri yeniden oluturur.",recomputeBtn:"Tm ocuklar in Yeniden Olutur",recomputeSuccess:"Tamamland. ocuk sayfalarnda Yenile'ye gerek kalmadan neriler grnr.",advancedOps:"Gelimi lemler",exportToExcel:"Excele Aktar (CSV)",exportDesc:"Tm ocuk verilerinizi Excel formatnda (CSV) da aktarn.",exportNote:"Trke karakterler korunur, Excelde dzenleme ve analiz yapabilirsiniz.",preparingData:"Veriler hazrlanyor...",noChildrenToExport:"Da aktarlacak ocuk bulunamad.",preparingChildren:"ocuk verisi hazrlanyor...",downloadCompleted:"Tamamland! ocuk iin Excel dosyas indirildi.",preparing:"Hazrlanyor...",exportBtn:"Excele Aktar",exportCsvNote:"* Tek bir CSV dosyas indirilecek, Excelde alabilir.",totalObservations:"Toplam Gzlem",mediaCount:"rn/Medya Says",lastObservation:"Son Gzlem",consentPending:"Bekliyor",uploadProduct:"rn Ykle",noProductsAdded:"Henz rn eklenmedi.",productName:"rn Ad",productDescription:"rn Hakknda Not",productDomain:"lgili Beceri Alan",selectFile:"Medya Se",fileSelected:"Dosya Seildi:",noFileSelected:"Henz dosya seilmedi.",productNamePlaceholder:"rn: Renkli Bloklarla Yaplan Kule",productDescriptionPlaceholder:"Ksa aklama...",selectDomainPrompt:"Bir geliim alan sein...",confirmDeleteTitle:"Kayd Sil",confirmDeleteMessage:"Bu kayd silmek istiyor musunuz?",yes:"Evet",no:"Hayr",deleteSuccess:"Gzlem silindi.",productDeleteSuccess:"rn silindi.",basicInfo:"Temel Bilgiler",guardians:"Veli Bilgileri",healthInfo:"Salk Bilgileri",otherInfo:"Dier Bilgiler",addGuardian:"Veli Ekle",guardianName:"Ad Soyad",guardianRelation:"Yaknl",guardianPhone:"Telefon",guardianEmail:"E-posta",removeGuardian:"Kaldr",allergies:"Alerjiler (virgl ile ayrn)",healthNotes:"nemli Salk Notlar",interests:"lgi Alanlar",strengths:"Gl Ynler",editChild:"ocuk Bilgilerini Dzenle",updateSuccess:"Gncellendi.",confirmDeleteChildTitle:"ocuu Sil",confirmDeleteChildMessage:"Bu ocuu ve ilikili verileri silmek istiyor musunuz?",childDeleteSuccess:"Silindi.",editClass:"Dzenle",pdfDownload:"PDF ndir",backToClasses:"Snflara Dn",teacherFirstName:"retmen Ad",teacherLastName:"retmen Soyad",profileUpdateSuccess:"Profil gncellendi.",gettingStarted:"Balarken",language:"Dil",classes:"Snflar",attendance:"Yoklama",aiAssistant:"Yapay Zek Asistan",earlyChildhoodSystem:"Erken ocukluk Eitiminde Yapay Zeka Destekli Dijital Portfolyo Uygulamas",welcomeBack:"Ho geldin",today:"Bugn",activity7days:"Aktivite (7 gn)",viewChild:"ocua Git",pinnedChildren:"Sabitlenen ocuklar",newChat:"Yeni Sohbet",chats:"Sohbetler",noChatYet:"Henz sohbet yok.",general:"Genel",child:"ocuk",selectClass:"Snf sein",selectChild:"ocuk sein",typeMessage:"Mesajnz yazn",send:"Gnder",assistantTyping:"Asistan yazyor",noteDisclaimer:"Not: Tbbi tan koymaz; pratik snf ii neriler sunar.",createClass:"Snf Olutur",noClassFound:"Snf bulunamad. stten yeni snf oluturabilirsiniz.",allChildren:"Tm ocuklar",editClassTitle:"Snf Dzenle",className:"Snf Ad",color:"Renk",pinClass:"Snf sabitle",deleteClass:"Snf Sil",deletingClass:"Snf siliniyor...",filterClass:"Snf Filtrele",allClasses:"Tm Snflar",classReport:"Snf Raporu",aiSuggestionsForClass:"Snf iin Yapay Zek nerileri",nameSurname:"Ad Soyad",childrenList:"ocuklar",saveChildrenPortfolio:"ocuklarn rnlerini ve geliimini dijital ortamda saklayn",selectClassFirst:"Ltfen bir snf sein. nce Snflar sayfasndan snf oluturmanz gerekebilir.",createClassFirst:"nce Snflar sayfasndan snf oluturun.",classAddError:"Snf eklenemedi",noChildInClass:"Bu snfta ocuk yok.",noSuggestionsYet:"Henz neri yok.",noData:"Veri yok.",regenerateAll:"Tm ocuklar in Yeniden Olutur",generating:"Oluturuluyor...",regenerateDone:"Tamamland. ocuk sayfalarnda Yenile'ye gerek kalmadan neriler grnr.",searchBox:"ocuk ara: st ksmdaki arama kutusunu kullann.",themeSetting:"ak/koyu temay",createClassAndChild:"Snf Olutur ve ocuk Ekle",createClassDescription:"Sol mende Snflar blmnden yeni snf oluturun. Ardndan ocuklar sayfasndan her snfa ocuk kartlar ekleyin.",recordObservation:"Gzlem Kayd",recordObservationDescription:"ocuun detay sayfasna girerek gzlem ve rn kayd yapn. Yazl not veya fotoraf/video ekleyebilirsiniz.",aiReports:"Yapay Zek Raporlar",aiReportsDescription:"ocuk veya snf sayfalarndaki Rapor blmnden geliim zetlerini grntleyebilir, PDF olarak indirebilirsiniz.",tipsTitle:"pular",askAnything:'Sorunuzu yazn. rn: "3-4 ya grubu iin ince motoru glendiren etkinlik nerir misin?"',confirmDeleteChat:"sohbetini silmek istiyor musunuz?",gettingStartedDesc:"PortfoAI ile hzl bir balang yapmanz iin ksa bir kullanm klavuzu.",step1Title:"1) Snf Olutur ve ocuk Ekle",step1Desc:"Sol mende Snflar blmnden yeni snf oluturun. Ardndan ocuklar sayfasndan her snfa ocuk kartlar ekleyin.",step2Title:"2) Gzlem Ekle ve Alanlar Se",step2Desc:"Bir ocuun kartna girip Gzlem Ekle deyin. Davran ksa bir notla yazn, geliim alanlarn sein.",step3Title:"3) rn/Medya Ykle (Portfolyo)",step3Desc:"ocuun sayfasndaki Medya sekmesinden rn fotoraflarn ykleyin.",step4Title:"4) Rapor ve PDF Alma",step4Desc:"ocuk veya snf sayfalarndaki Rapor blmnden geliim zetlerini grntleyebilir, PDF olarak indirebilirsiniz.",demoDataTip:"pucu: Demo Veri ile Hzl Keif",goToSettings:"Ayarlar'a Git",frequentActions:"Sk Kullanlan lemler",searchChildTip:"ocuk ara: st ksmdaki arama kutusunu kullann.",exportDataTip:"Veri aktarm: Ayarlar  Verileri Da Aktar.",themeTip:"Tema: Sol panel altndan ak/koyu temay deitirin.",attendanceSystem:"Yoklama Sistemi",dailyAttendanceTracking:"Gnlk devam takibi ve istatistikler",thisMonthAttendance:"Bu Ay Devam",excused:"Mazeret",unmarked:"aretlenmedi",allList:"Tm Liste",selectDate:"Tarih Se",quickAction:"Hzl lem",markAllPresent:"Hepsini Geldi aretle",markAllAbsent:"Hepsini Gelmedi aretle",clearFilter:"Filtreyi Temizle",showAll:"Tm Listeyi Gster",studentList:"renci Listesi",showingStudents:"renci gsteriliyor",showAllList:"Tmn Gster",photo:"Fotoraf",status:"Durum",action:"lem",noStudentFound:"Hi ocuk bulunamad.",noStudentInStatus:"durumunda renci bulunamad.",saveAttendance:"Yoklamay Kaydet",savingAttendance:"Kaydediliyor...",attendanceSaved:"Yoklama baaryla kaydedildi!",attendanceSaveFailed:"Yoklama kaydedilemedi",dataLoadFailed:"Veri yklenemedi"},en:{appName:"PortfoAI",signInTitle:"Sign In",signUpTitle:"Create Account",signInDescription:"Enter your email and password to access your account.",signUpDescription:"Create a new account to get started.",emailLabel:"Email Address",passwordLabel:"Password",signInAction:"Sign In",signUpAction:"Sign Up",noAccountPrompt:"Don't have an account?",haveAccountPrompt:"Already have an account?",switchToSignUp:"Sign Up",switchToSignIn:"Sign In",signUpSuccess:"Account created! Please verify your email.",apiKeyError:"Supabase API key is invalid or missing.",dashboard:"Dashboard",children:"Children",observations:"Observations",settings:"Settings",signOut:"Sign Out",welcome:"Welcome",landingHero:"Professionally track child development with AI-powered observation, analysis, and portfolio management.",smartAnalysisTitle:"Smart Analysis",smartAnalysisDesc:"Automated evaluation and suggestions with AI",digitalPortfolioTitle:"Digital Portfolio",digitalPortfolioDesc:"Store children's work and development digitally",anyDeviceTitle:"Access Anywhere",anyDeviceDesc:"Easily access from phone, tablet, or computer",createAccountTitle:"Create Account",welcomeTitle:"Welcome",createAccountDesc:"Create a new account to get started",signInDesc:"Sign in to your account",yourName:"First Name",yourSurname:"Last Name",schoolName:"School Name",secureSSL:"SSL Encrypted",secureBadge:"Secure",fastBadge:"Fast",footerRights:" 2025 PortfoAI - All rights reserved",haveAccountBtn:"Already have an account? Sign in",noAccountBtn:"Don't have an account? Sign up",missingTeacherFields:"Please fill in name, surname, and school fields.",recentObservations:"Recent Observations",quickAccess:"Quick Access",addChild:"Add Child",addObservation:"Add Observation",editObservation:"Edit Observation",childList:"Child List",searchChild:"Search child...",noChildrenFound:"No children added yet.",childProfile:"Child Profile",firstName:"First Name",lastName:"Last Name",dob:"Date of Birth",age:"Age",classroom:"Classroom",parentalConsent:"Parental Consent Obtained",save:"Save",cancel:"Cancel",delete:"Delete",edit:"Edit",newObservationFor:"New Observation for",observationNote:"Observation Note",notePlaceholder:"Detailed notes about the child's behaviors, words, and interactions...",developmentDomains:"Skill Areas",selectDomains:"Select relevant skill areas",context:"Context",tags:"Tags",tagsPlaceholder:"Add tags separated by commas",addMedia:"Add Photo/Video",submitObservation:"Save Observation",consentYes:"Yes",consentNo:"No",childDetail:"Child Details",profile:"Profile",development:"Development",media:"Media",generateReport:"Generate Development Report",aiAnalysis:"AI Analysis",getAnalysis:"Get Analysis",summary:"Summary",riskLevel:"Risk Level",suggestions:"Suggestions for Teacher",domainScores:"Domain Scores",low:"Low",medium:"Medium",high:"High",loading:"Loading...",deleting:"Deleting...",errorOccurred:"An error occurred.",offlineWarning:"You are offline.",syncAttempt:"Syncing data...",syncSuccess:"Data synced successfully.",syncError:"Error during synchronization.",noInternetConnection:"No internet connection. Some features may not work.",exportData:"Export Data",exportChildData:"Export Child Data (JSON)",legal:"Legal",privacyPolicy:"Privacy Policy",termsOfService:"Terms of Service",noRecentObservations:"No recent observations.",childNotFound:"Child not found.",pendingSync:"Sync pending.",developmentSummary:"Development Summary",developmentReport:"Development Report",reportDate:"Report Date",childInfo:"Child Information",fullName:"Full Name",aiSummariesAndSuggestions:"AI Summaries and Suggestions",noAssessmentsForReport:"No assessments for report.",observationDate:"Observation Date",aiSummary:"AI Summary",observationSavedOffline:"Observation saved offline.",observationsSynced:"Observations synced.",exportDataDescription:"Export all your data as JSON.",exportAllData:"Export All Data",products:"Products",selectValidImage:"Please select a valid image file.",fileTooLarge:"File size too large. Maximum 10MB.",profilePhoto:"Profile Photo",retakePhoto:"Retake",deletePhoto:"Delete Photo",takeWithCamera:"Take with Camera",uploadFromFile:"Upload from File",changePhoto:"Change Photo",lowRisk:"Low Risk",mediumRisk:"Medium Risk",highRisk:"High Risk",unknown:"Unknown",notAddedYet:"Not added yet.",interestsSection:"Interests",strengthsSection:"Strengths",guardiansSection:"Guardian & Contact Information",noGuardiansAdded:"No guardian information added.",enrollmentDate:"Enrollment Date",importantNotes:"Important Notes",aiInsights:"AI Insights",goalsLoadError:"Could not load goals",goalsLoading:"Loading goals...",developmentGoals:"Development Goals",addGoal:"Add Goal",addNewGoal:"Add New Goal",goalTitle:"Goal Title",goalTitlePlaceholder:"E.g.: Learn 10 words",developmentArea:"Development Area",priority:"Priority",priorityLow:"Low",priorityMedium:"Medium",priorityHigh:"High",targetDate:"Target Date",descriptionLabel:"Description",descriptionPlaceholder:"Detailed description about the goal...",statusCompleted:"Completed",statusInProgress:"In Progress",statusNotStarted:"Not Started",statusCancelled:"Cancelled",noGoalsYet:"No goals set yet.",addGoalHint:"You can add a new goal using the button above.",attachPhotoOptional:"Attach Photo (optional)",present:"Present",absent:"Absent",late:"Late",allItems:"All",fullList:"Full List",studentsShown:"students shown",theme:"Theme",lightTheme:"Light",darkTheme:"Dark",pdfTeacher:"Teacher",pdfSchool:"School",pdfReport:"Report",pdfTitle:"Development Report",pdfProductMedia:"Product / Media",pdfObservation:"Observation",pdfObservationNote:"Observation Note",pdfAiSummary:"AI Summary",pdfSuggestions:"Suggestions for Teacher",pdfBirth:"Birth",pdfAge:"Age",pdfClass:"Class",pdfNoObservations:"No observations found.",pdfYears:"years",pdfMonths:"months",filtering:"Filtering",classLabel:"Class:",pinned:"Pinned",last7daysObs:"Last 7 Days Obs.",last7daysProducts:"Last 7 Days Products",nameSurnamePlaceholder:"Name Surname...",developmentTrend:"Development Area Trend (8 Weeks)",deleteClassConfirm:'Are you sure you want to delete the class "{classroom}"?',deleteClassConfirmWithChildren:`Are you sure you want to delete the class "{classroom}"?

This will permanently delete {childCount} children and all their observation/product records!`,classDeleting:"Deleting class...",changeLanguageDesc:"Change application language.",createDemoData:"Create Demo Data",demoDataDesc:"Adds sample classes, children, observations and product photos to your account.",classCount:"Number of classes (15)",childrenPerClass:"Children per class",obsPerChild:"Observations per child",mediaPerChild:"Products per child",starting:"Starting...",completed:"Completed.",errorPrefix:"Error:",creating:"Creating...",createDemoBtn:"Create Demo Data",demoNote:"Note: This may take time depending on internet speed.",confirmRemoveDemo:"Demo data will be removed. Continue?",removing:"Removing...",removeDemoBtn:"Remove Demo Data",aiInsightsDesc:"Regenerates missing/placeholder analyses for observations in your account.",recomputeBtn:"Regenerate for All Children",recomputeSuccess:"Completed. Suggestions will appear on child pages without needing to refresh.",advancedOps:"Advanced Operations",exportToExcel:"Export to Excel (CSV)",exportDesc:"Export all child data in Excel format (CSV).",exportNote:"Turkish characters are preserved, you can edit and analyze in Excel.",preparingData:"Preparing data...",noChildrenToExport:"No children found to export.",preparingChildren:"child data being prepared...",downloadCompleted:"Completed! Excel file downloaded for children.",preparing:"Preparing...",exportBtn:"Export to Excel",exportCsvNote:"* A single CSV file will be downloaded, can be opened in Excel.",totalObservations:"Total Observations",mediaCount:"Product/Media Count",lastObservation:"Last Observation",consentPending:"Pending",uploadProduct:"Upload Product",noProductsAdded:"No products added yet.",productName:"Product Name",productDescription:"Notes About Product",productDomain:"Related Skill Area",selectFile:"Select Media",fileSelected:"File Selected:",noFileSelected:"No file selected yet.",productNamePlaceholder:"E.g.: Tower Made with Colorful Blocks",productDescriptionPlaceholder:"Brief description...",selectDomainPrompt:"Select a skill area...",confirmDeleteTitle:"Delete Record",confirmDeleteMessage:"Do you want to delete this record?",yes:"Yes",no:"No",deleteSuccess:"Observation deleted.",productDeleteSuccess:"Product deleted.",basicInfo:"Basic Information",guardians:"Guardian Information",healthInfo:"Health Information",otherInfo:"Other Information",addGuardian:"Add Guardian",guardianName:"Full Name",guardianRelation:"Relationship",guardianPhone:"Phone",guardianEmail:"Email",removeGuardian:"Remove",allergies:"Allergies (separate with commas)",healthNotes:"Important Health Notes",interests:"Interests",strengths:"Strengths",editChild:"Edit Child Information",updateSuccess:"Updated.",confirmDeleteChildTitle:"Delete Child",confirmDeleteChildMessage:"Do you want to delete this child and all related data?",childDeleteSuccess:"Deleted.",editClass:"Edit",pdfDownload:"Download PDF",backToClasses:"Back to Classes",teacherFirstName:"Teacher First Name",teacherLastName:"Teacher Last Name",profileUpdateSuccess:"Profile updated.",gettingStarted:"Getting Started",language:"Language",classes:"Classes",attendance:"Attendance",aiAssistant:"AI Assistant",earlyChildhoodSystem:"Early Childhood Observation System",welcomeBack:"Welcome back",today:"Today",activity7days:"Activity (7 days)",viewChild:"Go to Child",pinnedChildren:"Pinned Children",newChat:"New Chat",chats:"Chats",noChatYet:"No chats yet.",general:"General",child:"Child",selectClass:"Select class...",selectChild:"Select child...",typeMessage:"Type your message...",send:"Send",assistantTyping:"Assistant is typing...",noteDisclaimer:"Note: Does not provide medical diagnoses; offers practical classroom suggestions.",createClass:"Create Class",noClassFound:"No classes found. You can create a new class above.",allChildren:"All Children",editClassTitle:"Edit Class",className:"Class Name",color:"Color",pinClass:"Pin this class",deleteClass:"Delete Class",deletingClass:"Deleting class...",filterClass:"Filter by Class",allClasses:"All Classes",classReport:"Class Report",aiSuggestionsForClass:"AI Suggestions for Class",nameSurname:"Name",childrenList:"Children",saveChildrenPortfolio:"Store children's products and development digitally",selectClassFirst:"Please select a class. You may need to create a class from the Classes page first.",createClassFirst:"Create a class from the Classes page first.",classAddError:"Could not add class",noChildInClass:"No children in this class.",noSuggestionsYet:"No suggestions yet.",noData:"No data.",regenerateAll:"Regenerate for All Children",generating:"Generating...",regenerateDone:"Done. Suggestions will appear on child pages without needing to refresh.",searchBox:"Search child: use the search box at the top.",themeSetting:"light/dark theme",createClassAndChild:"Create Class and Add Child",createClassDescription:"Create a new class from the Classes section in the left menu. Then add child cards to each class from the Children page.",recordObservation:"Record Observation",recordObservationDescription:"Enter the child's detail page to record observations and products. You can add written notes or photos/videos.",aiReports:"AI Reports",aiReportsDescription:"View development summaries from the Report section on child or class pages, and download as PDF.",tipsTitle:"Tips",askAnything:'Type your question. E.g.: "Can you suggest activities to strengthen fine motor skills for 3-4 year olds?"',confirmDeleteChat:"chat? Are you sure you want to delete this",gettingStartedDesc:"A quick guide to help you get started with Lukid AI.",step1Title:"1) Create Class and Add Child",step1Desc:"Create a new class from the Classes section in the left menu. Then add child cards to each class from the Children page.",step2Title:"2) Add Observation and Select Areas",step2Desc:"Click on a child card and select Add Observation. Write a brief note about the behavior and select development areas.",step3Title:"3) Upload Product/Media (Portfolio)",step3Desc:"Upload product photos from the Media tab on the child page.",step4Title:"4) Get Report and PDF",step4Desc:"View development summaries from the Report section on child or class pages, and download as PDF.",demoDataTip:"Tip: Quick Exploration with Demo Data",goToSettings:"Go to Settings",frequentActions:"Frequent Actions",searchChildTip:"Search child: use the search box at the top.",exportDataTip:"Data export: Settings  Export Data.",themeTip:"Theme: Change light/dark theme from the bottom of the left panel.",attendanceSystem:"Attendance System",dailyAttendanceTracking:"Daily attendance tracking and statistics",thisMonthAttendance:"This Month Attendance",excused:"Excused",unmarked:"Unmarked",allList:"All List",selectDate:"Select Date",quickAction:"Quick Action",markAllPresent:"Mark All Present",markAllAbsent:"Mark All Absent",clearFilter:"Clear Filter",showAll:"Show All",studentList:"Student List",showingStudents:"students showing",showAllList:"Show All",photo:"Photo",status:"Status",action:"Action",noStudentFound:"No children found.",noStudentInStatus:"No students found with status",saveAttendance:"Save Attendance",savingAttendance:"Saving...",attendanceSaved:"Attendance saved successfully!",attendanceSaveFailed:"Could not save attendance",dataLoadFailed:"Could not load data"}},v=l=>Lg[In][l]||Lg.tr[l]||l,xw=({mouseX:l,mouseY:n})=>{const s=[{x:65,y:25,color:"#FF6B9D",hairColor:"#8B4789",name:"Aye",skin:"#FFE4C4"},{x:85,y:30,color:"#4A90E2",hairColor:"#2C3E50",name:"Ahmet",skin:"#F5D5C3"},{x:70,y:65,color:"#50C878",hairColor:"#CD853F",name:"Zeynep",skin:"#FFDAB9"},{x:88,y:70,color:"#FFB347",hairColor:"#8B7355",name:"Mehmet",skin:"#F4E4D7"}],r=(u,d)=>{const f=u/100*window.innerWidth*.5,m=d/100*window.innerHeight,y=Math.atan2(n-m,l-f),p=y*(180/Math.PI),b=Math.round(p/5)*5,w=6,S=Math.cos(y)*w,j=Math.sin(y)*w,C=Math.round(S*2)/2,R=Math.round(j*2)/2;return{rotation:b,eyeX:C,eyeY:R}};return o.jsx("div",{className:"absolute inset-0 pointer-events-none",children:s.map(u=>{const{rotation:d,eyeX:f,eyeY:m}=r(u.x,u.y);return o.jsx("div",{className:"absolute",style:{left:`${u.x}%`,top:`${u.y}%`,transform:"translate(-50%, -50%)"},children:o.jsx("div",{className:"kid-float-wrapper",style:{animationDelay:`${Math.random()*2}s`},children:o.jsxs("svg",{width:"160",height:"180",viewBox:"0 0 160 180",className:"drop-shadow-2xl filter hover:drop-shadow-[0_0_25px_rgba(255,255,255,0.3)]",children:[o.jsxs("defs",{children:[o.jsxs("linearGradient",{id:`hair-${u.name}`,x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[o.jsx("stop",{offset:"0%",stopColor:u.hairColor,stopOpacity:"1"}),o.jsx("stop",{offset:"100%",stopColor:u.hairColor,stopOpacity:"0.7"})]}),o.jsxs("radialGradient",{id:`skin-${u.name}`,children:[o.jsx("stop",{offset:"0%",stopColor:u.skin}),o.jsx("stop",{offset:"100%",stopColor:u.skin,stopOpacity:"0.9"})]}),o.jsxs("linearGradient",{id:`clothes-${u.name}`,x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[o.jsx("stop",{offset:"0%",stopColor:u.color}),o.jsx("stop",{offset:"100%",stopColor:u.color,stopOpacity:"0.8"})]})]}),o.jsxs("g",{children:[o.jsx("path",{d:"M 60 120 L 50 115 Q 45 110 45 125 L 45 160 Q 45 165 50 165 L 110 165 Q 115 165 115 160 L 115 125 Q 115 110 110 115 L 100 120",fill:`url(#clothes-${u.name})`,stroke:"white",strokeWidth:"2"}),o.jsx("path",{d:"M 50 120 Q 30 125 28 145 Q 28 150 32 150 L 45 145",fill:u.skin,stroke:"white",strokeWidth:"2"}),o.jsx("path",{d:"M 110 120 Q 130 125 132 145 Q 132 150 128 150 L 115 145",fill:u.skin,stroke:"white",strokeWidth:"2"}),o.jsx("circle",{cx:"30",cy:"150",r:"8",fill:u.skin,stroke:"white",strokeWidth:"2"}),o.jsx("circle",{cx:"130",cy:"150",r:"8",fill:u.skin,stroke:"white",strokeWidth:"2"})]}),o.jsxs("g",{transform:`rotate(${d*.08}, 80, 70)`,className:"kid-head-smooth",children:[o.jsx("rect",{x:"70",y:"95",width:"20",height:"20",rx:"5",fill:u.skin,stroke:"white",strokeWidth:"2"}),o.jsx("ellipse",{cx:"80",cy:"45",rx:"45",ry:"38",fill:`url(#hair-${u.name})`,opacity:"0.95"}),o.jsx("path",{d:"M 40 50 Q 35 40 40 35 Q 45 30 50 35",fill:`url(#hair-${u.name})`,opacity:"0.9"}),o.jsx("path",{d:"M 120 50 Q 125 40 120 35 Q 115 30 110 35",fill:`url(#hair-${u.name})`,opacity:"0.9"}),o.jsx("ellipse",{cx:"80",cy:"70",rx:"38",ry:"42",fill:`url(#skin-${u.name})`,stroke:"white",strokeWidth:"3"}),o.jsx("ellipse",{cx:"45",cy:"70",rx:"8",ry:"12",fill:u.skin,stroke:"white",strokeWidth:"2"}),o.jsx("ellipse",{cx:"115",cy:"70",rx:"8",ry:"12",fill:u.skin,stroke:"white",strokeWidth:"2"}),o.jsx("ellipse",{cx:"65",cy:"65",rx:"10",ry:"11",fill:"white",stroke:"#2C3E50",strokeWidth:"2.5",className:"kid-blink"}),o.jsx("circle",{cx:65+f,cy:65+m,r:"5",fill:"#2C3E50",className:"kid-blink"}),o.jsx("circle",{cx:67+f,cy:63+m,r:"2",fill:"white",opacity:"0.8",className:"kid-blink"}),o.jsx("path",{d:"M 58 60 L 55 58",stroke:"#2C3E50",strokeWidth:"2",strokeLinecap:"round",className:"kid-blink"}),o.jsx("path",{d:"M 72 60 L 75 58",stroke:"#2C3E50",strokeWidth:"2",strokeLinecap:"round",className:"kid-blink"}),o.jsx("ellipse",{cx:"95",cy:"65",rx:"10",ry:"11",fill:"white",stroke:"#2C3E50",strokeWidth:"2.5",className:"kid-blink"}),o.jsx("circle",{cx:95+f,cy:65+m,r:"5",fill:"#2C3E50",className:"kid-blink"}),o.jsx("circle",{cx:97+f,cy:63+m,r:"2",fill:"white",opacity:"0.8",className:"kid-blink"}),o.jsx("path",{d:"M 88 60 L 85 58",stroke:"#2C3E50",strokeWidth:"2",strokeLinecap:"round",className:"kid-blink"}),o.jsx("path",{d:"M 102 60 L 105 58",stroke:"#2C3E50",strokeWidth:"2",strokeLinecap:"round",className:"kid-blink"}),o.jsx("path",{d:"M 55 55 Q 65 52 75 55",stroke:"#8B7355",strokeWidth:"3",fill:"none",strokeLinecap:"round"}),o.jsx("path",{d:"M 85 55 Q 95 52 105 55",stroke:"#8B7355",strokeWidth:"3",fill:"none",strokeLinecap:"round"}),o.jsx("path",{d:"M 80 72 L 78 80 L 82 80 Z",fill:"#FFB6A3",opacity:"0.6"}),o.jsx("path",{d:"M 60 85 Q 80 95 100 85",stroke:"#FF6B9D",strokeWidth:"3.5",fill:"none",strokeLinecap:"round"}),o.jsx("ellipse",{cx:"55",cy:"78",rx:"8",ry:"6",fill:"#FFB6C1",opacity:"0.5"}),o.jsx("ellipse",{cx:"105",cy:"78",rx:"8",ry:"6",fill:"#FFB6C1",opacity:"0.5"}),o.jsx("path",{d:"M 50 45 Q 55 35 65 40",fill:u.hairColor,opacity:"0.8"}),o.jsx("path",{d:"M 110 45 Q 105 35 95 40",fill:u.hairColor,opacity:"0.8"})]})]})})},u.name)})})},ww=()=>{const[l,n]=_.useState(Ke()),[s,r]=_.useState(!1),[u,d]=_.useState(!1),[f,m]=_.useState(""),[y,p]=_.useState(""),[b,w]=_.useState(""),[S,j]=_.useState(""),[C,R]=_.useState(""),[k,$]=_.useState(""),[B,q]=_.useState(""),[T,Z]=_.useState({x:0,y:0});_.useEffect(()=>{let F=null;const O=G=>{F||(F=setTimeout(()=>{Z({x:G.clientX,y:G.clientY}),F=null},50))};return window.addEventListener("mousemove",O),()=>{window.removeEventListener("mousemove",O),F&&clearTimeout(F)}},[]);const Q=F=>{Q0(F),n(F)},P=async F=>{F.preventDefault(),d(!0),w(""),j("");let O=null;if(s){if(!C.trim()||!k.trim()||!B.trim()){j(v("missingTeacherFields")),d(!1);return}const{error:G}=await ae.auth.signUp({email:f,password:y,options:{data:{first_name:C.trim(),last_name:k.trim(),school_name:B.trim()}}});O=G,G||w(v("signUpSuccess"))}else{const{error:G}=await ae.auth.signInWithPassword({email:f,password:y});O=G}O&&(O.message.toLowerCase().includes("invalid api key")?j(v("apiKeyError")):j(O.message)),d(!1)};return o.jsxs("div",{className:"min-h-screen flex relative",children:[o.jsxs("div",{className:"hidden lg:flex lg:w-1/2 bg-gradient-to-br from-[#0c0f1d] via-[#161b33] to-[#0c0f1d] relative overflow-hidden",children:[o.jsxs("div",{className:"absolute inset-0",children:[o.jsx("div",{className:"absolute top-10 left-10 w-72 h-72 bg-indigo-600/10 rounded-full blur-3xl"}),o.jsx("div",{className:"absolute bottom-10 right-10 w-80 h-80 bg-orange-500/10 rounded-full blur-3xl"}),o.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-96 h-96 bg-slate-700/20 rounded-full blur-3xl"})]}),o.jsx(xw,{mouseX:T.x,mouseY:T.y}),o.jsxs("div",{className:"relative z-10 flex flex-col justify-center px-16 text-white",children:[o.jsx("div",{className:"mb-12 relative",children:o.jsxs("div",{className:"relative flex items-center gap-4",children:[o.jsx("img",{src:"/logo.png",alt:"Lukid AI",className:"h-48 w-48 object-contain drop-shadow-2xl",draggable:!1}),o.jsxs("div",{className:"flex flex-col",children:[o.jsx("h1",{className:"text-6xl font-extrabold tracking-tight text-white drop-shadow-md",children:"Lukid AI"}),o.jsx("span",{className:"text-[#FF6B4A] font-bold tracking-widest text-sm mt-1 uppercase",children:"SMART PORTFOLIO"})]})]})}),o.jsx("p",{className:"text-xl text-slate-300 mb-10 leading-relaxed max-w-md font-light",children:v("landingHero")}),o.jsxs("div",{className:"space-y-5 max-w-md",children:[o.jsxs("div",{className:"flex items-start gap-4 group",children:[o.jsx("div",{className:"w-11 h-11 rounded-lg bg-indigo-500/20 border border-indigo-500/30 flex items-center justify-center flex-shrink-0 group-hover:bg-indigo-500/30 transition-all",children:o.jsx("span",{className:"text-2xl",children:""})}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-medium mb-0.5 text-white",children:v("smartAnalysisTitle")}),o.jsx("p",{className:"text-slate-400 text-sm",children:v("smartAnalysisDesc")})]})]}),o.jsxs("div",{className:"flex items-start gap-4 group",children:[o.jsx("div",{className:"w-11 h-11 rounded-lg bg-indigo-500/20 border border-indigo-500/30 flex items-center justify-center flex-shrink-0 group-hover:bg-indigo-500/30 transition-all",children:o.jsx("span",{className:"text-2xl",children:""})}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-medium mb-0.5 text-white",children:v("digitalPortfolioTitle")}),o.jsx("p",{className:"text-slate-400 text-sm",children:v("digitalPortfolioDesc")})]})]}),o.jsxs("div",{className:"flex items-start gap-4 group",children:[o.jsx("div",{className:"w-11 h-11 rounded-lg bg-indigo-500/20 border border-indigo-500/30 flex items-center justify-center flex-shrink-0 group-hover:bg-indigo-500/30 transition-all",children:o.jsx("span",{className:"text-2xl",children:""})}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-medium mb-0.5 text-white",children:v("anyDeviceTitle")}),o.jsx("p",{className:"text-slate-400 text-sm",children:v("anyDeviceDesc")})]})]})]})]})]}),o.jsx("div",{className:"flex-1 flex items-center justify-center p-8 bg-gray-50",children:o.jsxs("div",{className:"w-full max-w-md",children:[o.jsx("div",{className:"lg:hidden mb-8 text-center",children:o.jsxs("div",{className:"inline-flex items-center gap-3 relative",children:[o.jsx("div",{className:"absolute -inset-4 bg-gradient-to-r from-indigo-100/40 to-orange-100/40 rounded-full blur-2xl"}),o.jsx("img",{src:"/logo.png",alt:"Lukid AI",className:"h-20 w-20 relative shadow-lg rounded-2xl",draggable:!1}),o.jsx("span",{className:"relative text-3xl font-bold text-gray-800 tracking-tight",children:"Lukid AI"})]})}),o.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl p-10 border border-gray-100 relative overflow-hidden",children:[o.jsx("div",{className:"absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-indigo-600 via-purple-600 to-orange-500"}),o.jsxs("div",{className:"absolute top-6 right-6 z-10 flex gap-2",children:[o.jsx("button",{onClick:()=>Q("tr"),className:`px-2 py-1 rounded-md text-xs font-bold transition-all ${l==="tr"?"bg-indigo-50 text-indigo-700 ring-1 ring-indigo-200":"bg-gray-50 text-gray-400 hover:bg-gray-100"}`,children:"TR"}),o.jsx("button",{onClick:()=>Q("en"),className:`px-2 py-1 rounded-md text-xs font-bold transition-all ${l==="en"?"bg-indigo-50 text-indigo-700 ring-1 ring-indigo-200":"bg-gray-50 text-gray-400 hover:bg-gray-100"}`,children:"EN"})]}),o.jsxs("div",{className:"mb-10",children:[o.jsx("h2",{className:"text-3xl font-bold text-slate-800 mb-2",children:v(s?"createAccountTitle":"welcomeTitle")}),o.jsx("p",{className:"text-gray-600 text-lg",children:v(s?"createAccountDesc":"signInDesc")})]}),o.jsxs("form",{onSubmit:P,className:"space-y-6",children:[s&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{className:"relative group",children:[o.jsxs("label",{htmlFor:"teacher-first-name",className:"block text-sm font-semibold text-gray-700 mb-2 flex items-center gap-2",children:[o.jsx("span",{className:"text-indigo-600",children:""})," ",v("yourName")]}),o.jsx("input",{id:"teacher-first-name",name:"teacher-first-name",type:"text",autoComplete:"given-name",required:s,className:"w-full px-4 py-3.5 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all text-gray-900 placeholder-gray-400 hover:border-blue-200 hover:shadow-md",placeholder:v("yourName"),value:C,onChange:F=>R(F.target.value)})]}),o.jsxs("div",{className:"relative group",children:[o.jsxs("label",{htmlFor:"teacher-last-name",className:"block text-sm font-semibold text-gray-700 mb-2 flex items-center gap-2",children:[o.jsx("span",{className:"text-indigo-600",children:""})," ",v("yourSurname")]}),o.jsx("input",{id:"teacher-last-name",name:"teacher-last-name",type:"text",autoComplete:"family-name",required:s,className:"w-full px-4 py-3.5 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all text-gray-900 placeholder-gray-400 hover:border-blue-200 hover:shadow-md",placeholder:v("yourSurname"),value:k,onChange:F=>$(F.target.value)})]})]}),o.jsxs("div",{className:"relative group",children:[o.jsxs("label",{htmlFor:"school-name",className:"block text-sm font-semibold text-gray-700 mb-2 flex items-center gap-2",children:[o.jsx("span",{className:"text-indigo-600",children:""})," ",v("schoolName")]}),o.jsx("input",{id:"school-name",name:"school-name",type:"text",autoComplete:"organization",required:s,className:"w-full px-4 py-3.5 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all text-gray-900 placeholder-gray-400 hover:border-indigo-300 hover:shadow-md",placeholder:v("schoolName"),value:B,onChange:F=>q(F.target.value)})]})]}),o.jsxs("div",{className:"relative group",children:[o.jsxs("label",{htmlFor:"email-address",className:"block text-sm font-semibold text-gray-700 mb-2 flex items-center gap-2",children:[o.jsx("span",{className:"text-blue-500",children:""})," ",v("emailLabel")]}),o.jsx("input",{id:"email-address",name:"email",type:"email",autoComplete:"email",required:!0,className:"w-full px-4 py-3.5 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all text-gray-900 placeholder-gray-400 hover:border-indigo-300 hover:shadow-md",placeholder:"ornek@email.com",value:f,onChange:F=>m(F.target.value)})]}),o.jsxs("div",{className:"relative group",children:[o.jsxs("label",{htmlFor:"password",className:"block text-sm font-semibold text-gray-700 mb-2 flex items-center gap-2",children:[o.jsx("span",{className:"text-blue-500",children:""})," ",v("passwordLabel")]}),o.jsx("input",{id:"password",name:"password",type:"password",autoComplete:s?"new-password":"current-password",required:!0,className:"w-full px-4 py-3.5 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all text-gray-900 placeholder-gray-400 hover:border-indigo-300 hover:shadow-md",placeholder:"",value:y,onChange:F=>p(F.target.value)})]}),b&&o.jsxs("div",{className:"p-4 bg-gradient-to-r from-emerald-50 to-green-50 border-2 border-emerald-300 text-emerald-700 rounded-xl text-sm font-semibold flex items-center gap-3 animate-bounce-once shadow-lg",children:[o.jsx("span",{className:"text-2xl",children:""}),o.jsx("span",{children:b})]}),S&&o.jsxs("div",{className:"p-4 bg-gradient-to-r from-red-50 to-pink-50 border-2 border-red-300 text-red-700 rounded-xl text-sm font-semibold flex items-center gap-3 animate-shake shadow-lg",children:[o.jsx("span",{className:"text-2xl",children:""}),o.jsx("span",{children:S})]}),o.jsxs("button",{type:"submit",disabled:u,className:"group relative w-full py-4 px-4 bg-gradient-to-r from-indigo-600 via-blue-600 to-indigo-600 hover:from-indigo-700 hover:via-blue-700 hover:to-indigo-700 text-white font-bold rounded-xl shadow-xl hover:shadow-2xl transform hover:-translate-y-0.5 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none overflow-hidden",children:[o.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-white/0 via-white/20 to-white/0 transform -skew-x-12 -translate-x-full group-hover:translate-x-full transition-transform duration-1000"}),o.jsx("span",{className:"relative flex items-center justify-center gap-2 text-lg",children:u?o.jsxs(o.Fragment,{children:[o.jsxs("svg",{className:"animate-spin h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[o.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),o.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),v("loading")]}):o.jsxs(o.Fragment,{children:[o.jsx("span",{children:v(s?"createAccountTitle":"signInAction")}),o.jsx("span",{className:"text-xl group-hover:translate-x-1 transition-transform",children:""})]})})]})]}),o.jsx("div",{className:"mt-8 text-center",children:o.jsx("button",{onClick:()=>{r(!s),w(""),j("")},className:"text-indigo-600 hover:text-indigo-700 font-semibold text-base transition-all hover:underline decoration-2 underline-offset-4",children:v(s?"haveAccountBtn":"noAccountBtn")})}),o.jsx("div",{className:"mt-8 pt-6 border-t border-gray-100",children:o.jsxs("div",{className:"flex items-center justify-center gap-6 text-xs text-gray-500",children:[o.jsxs("div",{className:"flex items-center gap-1.5",children:[o.jsx("span",{className:"text-green-500 text-base",children:""}),o.jsx("span",{className:"font-medium",children:v("secureSSL")})]}),o.jsxs("div",{className:"flex items-center gap-1.5",children:[o.jsx("span",{className:"text-blue-500 text-base",children:""}),o.jsx("span",{className:"font-medium",children:v("secureBadge")})]}),o.jsxs("div",{className:"flex items-center gap-1.5",children:[o.jsx("span",{className:"text-purple-500 text-base",children:""}),o.jsx("span",{className:"font-medium",children:v("fastBadge")})]})]})})]}),o.jsx("div",{className:"mt-8 text-center text-sm text-gray-500",children:o.jsx("p",{children:v("footerRights")})})]})})]})},Ju=l=>n=>o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",...n,children:l}),_w=Ju(o.jsx("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"})),Sw=Ju(o.jsx("path",{d:"M16.5 13c-1.2 0-3.07.34-4.5 1-1.43-.66-3.3-1-4.5-1C5.33 13 1 14.08 1 16.25V19h22v-2.75c0-2.17-4.33-3.25-6.5-3.25zm-4-4c1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3 1.34 3 3 3zm-6 0c1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3 1.34 3 3 3zm12-3c0 1.66-1.34 3-3 3s-3-1.34-3-3 1.34-3 3-3 3 1.34 3 3z"})),J0=Ju(o.jsx("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"})),gt=()=>window.dispatchEvent(new Event("datachanged")),X0="offlineObservations",Ll="offlineQueue",Du="cachedChildren",Bg="cachedClasses",$g="cachedAttendance",qg="cachedGoals",Bl=(l,n)=>{try{localStorage.setItem(l,JSON.stringify({data:n,timestamp:Date.now()}))}catch(s){console.error("Cache yazma hatas:",s)}},er=(l,n=1440*60*1e3)=>{try{const s=localStorage.getItem(l);if(!s)return null;const{data:r,timestamp:u}=JSON.parse(s);return Date.now()-u>n?(localStorage.removeItem(l),null):r}catch(s){return console.error("Cache okuma hatas:",s),null}},Z0=l=>{try{const n=tr(),s={...l,id:`${Date.now()}_${Math.random().toString(36).substr(2,9)}`,timestamp:Date.now(),retryCount:0};n.push(s),localStorage.setItem(Ll,JSON.stringify(n))}catch(n){console.error("Offline queue'ya ekleme hatas:",n)}},tr=()=>{try{const l=localStorage.getItem(Ll);return l?JSON.parse(l):[]}catch(l){return console.error("Offline queue okuma hatas:",l),[]}},Hg=l=>{try{const n=tr().filter(s=>s.id!==l);localStorage.setItem(Ll,JSON.stringify(n))}catch(n){console.error("Offline queue'dan silme hatas:",n)}},jw=l=>{try{const n=tr(),s=n.find(r=>r.id===l);s&&(s.retryCount++,localStorage.setItem(Ll,JSON.stringify(n)))}catch(n){console.error("Queue retry count gncelleme hatas:",n)}},Ks=()=>navigator.onLine,kw=l=>(l||"").trim().replace(/\s+/g," ").toLocaleLowerCase("tr-TR"),Nw=l=>(l||"").trim().replace(/\s+/g," ").replace(/(^|\s)\S/g,n=>n.toLocaleUpperCase("tr-TR")),Ru=async l=>{var n,s;try{const{data:r,error:u}=await ae.from("classes").select("*").eq("user_id",l).order("name",{ascending:!0});if(u)throw(n=u.message)!=null&&n.includes("relation")&&((s=u.message)!=null&&s.includes("does not exist"))?new Error("'classes' tablosu bulunamad. Ltfen Supabase'de snflar iin tabloyu oluturun."):u;const d=r||[];return Bl(`${Bg}:${l}`,d),d}catch(r){console.log("evrimd mod - cache'den snflar getiriliyor");const u=er(`${Bg}:${l}`);return u||(console.warn("Cache bulunamad, bo liste dndrlyor:",r),[])}},F0=async(l,n)=>{const s=Nw(n),r=kw(s);let{data:u,error:d}=await ae.from("classes").upsert({user_id:l,name:s,slug:r},{onConflict:"user_id,slug"}).select().single();if(d){const{data:f}=await ae.from("classes").select("*").eq("user_id",l).eq("slug",r).single();if(f)return f;const m=await ae.from("classes").insert({user_id:l,name:s,slug:r}).select().single();if(m.error)throw m.error;u=m.data}return gt(),u},ar=async l=>{try{const{data:n,error:s}=await ae.from("children").select("*").eq("user_id",l).order("created_at",{ascending:!1});if(s)throw s;const r=n;return Bl(`${Du}:${l}`,r),r}catch(n){console.log("evrimd mod - cache'den ocuklar getiriliyor");const s=er(`${Du}:${l}`);return s||(console.warn("Cache bulunamad, bo liste dndrlyor:",n),[])}},Ew=async(l,n)=>{try{const{data:s,error:r}=await ae.from("children").select("id, first_name, last_name, classroom, photo_url, dob").eq("user_id",l).eq("classroom",n).order("created_at",{ascending:!1});if(r)throw r;return s||[]}catch{console.log("evrimd mod - snf ocuklar cache'den getiriliyor");const r=er(`${Du}:${l}`);return r?r.filter(u=>u.classroom===n):(console.warn("Cache bulunamad, bo liste dndrlyor"),[])}},W0=async(l,n)=>{const{data:s,error:r}=await ae.from("children").insert({...l,user_id:n}).select();if(r)throw r;return gt(),s[0]},zu=async(l,n)=>{const{data:s,error:r}=await ae.from("children").update(n).eq("id",l).select().single();if(r)throw r;return gt(),s},Xu=async l=>{const{data:n,error:s}=await ae.from("media").select("storage_path").eq("child_id",l);s&&console.error("Silinecek medya alnrken hata olutu:",s);const{data:r,error:u}=await ae.from("children").select("photo_url").eq("id",l).single();if(u&&console.error("Fotoraf silmek iin ocuk verisi alnrken hata olutu:",u),n&&n.length>0){const f=n.map(y=>y.storage_path),{error:m}=await ae.storage.from("child-media").remove(f);m&&console.error("Medya depolama alanndan silinirken hata:",m)}if(r!=null&&r.photo_url)try{const m=new URL(r.photo_url).pathname.split("/avatars/")[1];if(m){const{error:y}=await ae.storage.from("avatars").remove([m]);y&&console.error("Avatar depolama alanndan silinirken hata:",y)}}catch(f){console.error("Depolama alanndan silmek iin fotoraf URL'si ayrtrlamad",f)}const{error:d}=await ae.from("children").delete().eq("id",l);if(d)throw console.error("ocuk veritabanndan silinirken hata:",d),d;gt()},Aw=async(l,n,s)=>{const{data:r,error:u}=await ae.from("children").select("id, first_name, last_name").eq("user_id",l).eq("classroom",n);if(u)throw console.error("Snftaki ocuklar alnrken hata:",u),u;const d=r||[];s==null||s(`${d.length} ocuk siliniyor...`);for(let f=0;f<d.length;f++){const m=d[f];s==null||s(`Siliniyor: ${m.first_name} ${m.last_name} (${f+1}/${d.length})`);try{await Xu(m.id)}catch(y){console.error(`ocuk silinemedi: ${m.id}`,y)}}try{await ae.from("classes").delete().eq("user_id",l).eq("name",n)}catch(f){console.warn("classes tablosundan snf silinemedi (muhtemelen yoktu):",f)}try{const f=localStorage.getItem(`classMeta:${l}`);if(f){const m=JSON.parse(f);delete m[n],localStorage.setItem(`classMeta:${l}`,JSON.stringify(m))}}catch{}s==null||s("Snf silindi."),gt()},Cw=async(l,n,s)=>{const{processImage:r}=await $a(async()=>{const{processImage:b}=await Promise.resolve().then(()=>rp);return{processImage:b}},void 0),u=await r(s),{v4:d}=await $a(async()=>{const{v4:b}=await Promise.resolve().then(()=>Mw);return{v4:b}},void 0),f=`${l}/${n}/${d()}`,{data:m,error:y}=await ae.storage.from("avatars").upload(f,u,{cacheControl:"3600",upsert:!0});if(y)throw y;const{data:p}=ae.storage.from("avatars").getPublicUrl(m.path);return p.publicUrl},_t=[];for(let l=0;l<256;++l)_t.push((l+256).toString(16).slice(1));function Tw(l,n=0){return(_t[l[n+0]]+_t[l[n+1]]+_t[l[n+2]]+_t[l[n+3]]+"-"+_t[l[n+4]]+_t[l[n+5]]+"-"+_t[l[n+6]]+_t[l[n+7]]+"-"+_t[l[n+8]]+_t[l[n+9]]+"-"+_t[l[n+10]]+_t[l[n+11]]+_t[l[n+12]]+_t[l[n+13]]+_t[l[n+14]]+_t[l[n+15]]).toLowerCase()}let mu;const Ow=new Uint8Array(16);function Dw(){if(!mu){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");mu=crypto.getRandomValues.bind(crypto)}return mu(Ow)}const Rw=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Gg={randomUUID:Rw};function zw(l,n,s){var u;l=l||{};const r=l.random??((u=l.rng)==null?void 0:u.call(l))??Dw();if(r.length<16)throw new Error("Random bytes length must be >= 16");if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,n){if(s=s||0,s<0||s+16>n.length)throw new RangeError(`UUID byte range ${s}:${s+15} is out of buffer bounds`);for(let d=0;d<16;++d)n[s+d]=r[d];return n}return Tw(r)}function Vs(l,n,s){return Gg.randomUUID&&!n&&!l?Gg.randomUUID():zw(l,n,s)}const Mw=Object.freeze(Object.defineProperty({__proto__:null,v4:Vs},Symbol.toStringTag,{value:"Module"})),Zu=()=>{try{const l=localStorage.getItem(X0);return l?JSON.parse(l):[]}catch{return[]}},ep=l=>{localStorage.setItem(X0,JSON.stringify(l))},Uw=async(l,n)=>{const s=Zu(),r={...l,id:Vs(),created_at:new Date().toISOString(),dirty:!0,media_files:n};return ep([...s,r]),gt(),alert(v("observationSavedOffline")),r},Al=async l=>{const{data:n,error:s}=await ae.from("observations").select("*, assessments(*)").eq("child_id",l).order("created_at",{ascending:!1});if(s)throw s;const r=(n||[]).map(d=>{let f=d.assessments;if(Array.isArray(f)&&f.length>0){const m=[...f].sort((y,p)=>new Date(p.created_at).getTime()-new Date(y.created_at).getTime())[0];return{...d,assessments:m}}return{...d,assessments:null}});return[...Zu().filter(d=>d.child_id===l),...r]},tp=async(l,n,s)=>{if(!navigator.onLine)return Uw(l,s);const{data:r,error:u}=await ae.from("observations").insert({...l,user_id:n}).select();if(u)throw u;return gt(),r[0]},Yg=async(l,n)=>{const{data:s,error:r}=await ae.from("observations").update(n).eq("id",l).select();if(r)throw r;return gt(),s[0]},Lw=async l=>{const{error:n}=await ae.from("assessments").delete().eq("observation_id",l);if(n)throw console.error("Assessment silme hatas:",n),n;const{error:s}=await ae.from("observations").delete().eq("id",l);if(s)throw console.error("Gzlem silme hatas:",s),s;gt()},Bw=async()=>{var d;const l=Zu();if(l.length===0)return;const n=await ae.auth.getSession(),s=(d=n==null?void 0:n.data.session)==null?void 0:d.user.id;if(!s){console.error("Kullanc giri yapmam, senkronize edilemiyor.");return}let r=0;const u=[];for(const f of l)try{const{media_files:m,dirty:y,id:p,...b}=f;await ae.from("observations").insert({...b,user_id:s}),r++}catch(m){console.error("Gzlem senkronize edilemedi:",f.id,m),u.push(f)}ep(u),r>0&&(alert(`${r} ${v("observationsSynced")}`),window.dispatchEvent(new Event("datachanged")))},Fu=async(l,n)=>{const s=Ke(),{data:r,error:u}=await ae.functions.invoke("ai_evaluate",{body:{observationNote:l,domains:n,language:s}});if(u)throw u;return r.assessment},$l=async(l,n,s)=>{const r={observation_id:l,user_id:n,summary:s.summary,risk:s.risk,suggestions:s.suggestions,domain_scores:s.domain_scores};let{data:u,error:d}=await ae.from("assessments").upsert(r,{onConflict:"observation_id"}).select().single();if(d){await ae.from("assessments").delete().eq("observation_id",l);const f=await ae.from("assessments").insert(r).select().single();if(f.error)throw f.error;u=f.data}return gt(),u},$w=async(l,n={})=>{var y;const s=p=>{var b;return(b=n.onProgress)==null?void 0:b.call(n,p)},r=n.limit??60,{data:u,error:d}=await ae.from("observations").select("id, child_id, note, domains, assessments(summary)").eq("user_id",l).order("created_at",{ascending:!1}).limit(r);if(d)throw d;const f=u||[];let m=0;for(const p of f){const b=Array.isArray(p.assessments)&&p.assessments.length>0,w=b&&String(((y=p.assessments[0])==null?void 0:y.summary)||"").startsWith("Bu, yapay zeka servisi");if(!b||w)try{s==null||s(`Analiz ediliyor: ${++m}/${f.length}`);const S=await Fu(p.note,p.domains||[]);await $l(p.id,l,{summary:S.summary,risk:S.risk,suggestions:S.suggestions||[],domain_scores:S.domain_scores})}catch(S){console.warn("Yeniden analiz baarsz:",p.id,S)}}s==null||s("Tamamland")},qw=async(l,n={})=>{var Q,P;const s=n.days??30,r=n.maxObservations??40,u=new Date;u.setDate(u.getDate()-s);const d=u.toISOString();let f=ae.from("observations").select("child_id, note, domains, created_at, assessments(risk, suggestions, domain_scores)").eq("user_id",l).gte("created_at",d).order("created_at",{ascending:!1}).limit(r);n.childIds&&n.childIds.length>0&&(f=f.in("child_id",n.childIds));const{data:m,error:y}=await f;if(y)throw y;let p=m||[];if(n.domains&&n.domains.length>0){const F=new Set(n.domains);p=p.filter(O=>Array.isArray(O==null?void 0:O.domains)&&O.domains.some(G=>F.has(G)))}if(n.risks&&n.risks.length>0){const F=new Set(n.risks);p=p.filter(O=>{const G=Array.isArray(O==null?void 0:O.assessments)&&O.assessments.length>0?O.assessments[0]:void 0;return G!=null&&G.risk?F.has(G.risk):!1})}const b=new Set,w={};let S=0,j=0,C=0;const R=[];for(const F of p){const O=Array.isArray(F==null?void 0:F.domains)?F.domains:[];for(const se of O)b.add(se),w[se]=(w[se]||0)+1;const G=Array.isArray(F==null?void 0:F.assessments)&&F.assessments.length>0?F.assessments[0]:void 0,ie=G==null?void 0:G.risk;ie==="high"?C++:ie==="medium"?j++:ie==="low"&&S++;const ne=Array.isArray(G==null?void 0:G.suggestions)?G.suggestions:[];for(const se of ne)typeof se=="string"&&se.trim()&&R.push(se.trim())}const k=Ke(),$=Array.from(b),B=Object.entries(w).sort((F,O)=>O[1]-F[1]).map(([F,O])=>`- ${F}: ${O}`).join(`
`),q=`Low:${S}, Medium:${j}, High:${C}`,T=R.map(F=>`- ${F}`).join(`
`),Z=k==="en"?[`Class Summary (last ${s} days):`,`Risk Distribution: ${q}`,`Area Distribution:
${B||"-"}`,"","Individual Student Suggestions List (AI should SUMMARIZE this to class level):",T||"- No data","","Instruction: Analyze these individual student suggestions, remove duplicates, merge themes and create a list of 6-10 actionable suggestions applicable at the class level. Write short, actionable sentences. Speak only at the class level, do not mention individuals. OUTPUT should be JSON (summary, suggestions)."].join(`
`):[`Snf zeti (son ${s} gn):`,`Risk Dalm: ${q}`,`Alan Dalm:
${B||"-"}`,"","Bireysel renci nerileri Listesi (AI bunu ZETLEYP snf dzeyine karsn):",T||"- Veri yok","","Talimat: Bu tek tek renci nerilerini analiz et, tekrarlar kaldr, temalar birletir ve snf genelinde uygulanabilir 610 maddelik bir neri listesi kar. Ksa, eyleme geirilebilir cmleler yaz. Yalnzca snf dzeyinde konu, bireylerden bahsetme. IKTI JSON olsun (summary, suggestions)."].join(`
`);try{const{data:F,error:O}=await ae.functions.invoke("ai_evaluate",{body:{observationNote:Z,domains:$,language:k}});if(O)throw O;const G=F==null?void 0:F.assessment;return{suggestions:Array.isArray(G==null?void 0:G.suggestions)?G.suggestions:[],summary:G==null?void 0:G.summary}}catch{const O=new Set;for(const G of p){const ie=Array.isArray((P=(Q=G==null?void 0:G.assessments)==null?void 0:Q[0])==null?void 0:P.suggestions)?G.assessments[0].suggestions:[];for(const ne of ie||[])typeof ne=="string"&&ne.trim()&&O.add(ne.trim());if(O.size>=10)break}return{suggestions:Array.from(O).slice(0,10)}}},zl=async l=>{const{data:n,error:s}=await ae.from("media").select("*").eq("child_id",l).order("created_at",{ascending:!1});if(s)throw s;return n},Hw=async(l,n)=>{const{data:s,error:r}=await ae.from("media").insert({...l,user_id:n}).select();if(r)throw r;return gt(),s[0]},Gw=async l=>{const{error:n}=await ae.storage.from("child-media").remove([l.storage_path]);n&&console.error(`Storage silme baarsz: "${l.storage_path}", veritaban kayd silinmeye devam ediliyor.Hata: `,n.message);const{error:s}=await ae.from("media").delete().eq("id",l.id);if(s)throw s;gt()},Wu=async(l,n=3600)=>{const{data:s,error:r}=await ae.storage.from("child-media").createSignedUrl(l,n);if(r)throw r;return s.signedUrl},Yw=async(l,n,s)=>{var w;const{processImage:r}=await $a(async()=>{const{processImage:S}=await Promise.resolve().then(()=>rp);return{processImage:S}},void 0),u=await r(s),d=((w=u.type)==null?void 0:w.split("/")[1])||"",f=u.name.includes(".")?u.name.split(".").pop():"",m=(d||f||"jpg").toLowerCase(),y=`${l} /${n}/${Vs()}.${m} `,{data:p,error:b}=await ae.storage.from("child-media").upload(y,u,{cacheControl:"3600",upsert:!0,contentType:u.type||"image/jpeg"});if(b)throw b;return p.path},ap=async(l,n,s)=>{var m;const r=await new Promise((y,p)=>{const b=new FileReader;b.onload=()=>y(b.result),b.onerror=p,b.readAsDataURL(n)}),u={childId:l,name:s.name,description:s.description,domain:s.domain,fileName:n.name,fileType:n.type,data:r},{data:d,error:f}=await ae.functions.invoke("media_upload",{body:u});if(f)throw new Error(f.message||"Upload failed");return{path:d==null?void 0:d.path,mediaId:(m=d==null?void 0:d.media)==null?void 0:m.id}},Vw=async(l,n,s)=>{let r,u,d;s.file&&(r=await new Promise((p,b)=>{const w=new FileReader;w.onload=()=>p(w.result),w.onerror=b,w.readAsDataURL(s.file)}),u=s.file.type,d=s.file.name);const f={mediaId:l,childId:n,name:s.name,description:s.description,domain:s.domain};r&&Object.assign(f,{data:r,fileType:u,fileName:d});const{data:m,error:y}=await ae.functions.invoke("media_update",{body:f});if(y)throw new Error(y.message||"Update failed");return{path:m==null?void 0:m.path}},Pw=async l=>{const{data:n,error:s}=await ae.from("chat_threads").select("*").eq("user_id",l).order("updated_at",{ascending:!1});if(s)throw s;return n||[]},Iw=async l=>{const{data:n,error:s}=await ae.from("chat_threads").insert({user_id:l.userId,title:l.title,mode:l.mode,classroom:l.classroom,child_id:l.childId}).select().single();if(s)throw s;return n},Kw=async(l,n)=>{const{error:s}=await ae.from("chat_threads").update({title:n,updated_at:new Date().toISOString()}).eq("id",l);if(s)throw s},Qw=async l=>{const{error:n}=await ae.from("chat_messages").delete().eq("thread_id",l);n&&console.error("Mesajlar silinirken hata:",n);const{error:s}=await ae.from("chat_threads").delete().eq("id",l);if(s)throw s},Jw=async l=>{const{data:n,error:s}=await ae.from("chat_messages").select("*").eq("thread_id",l).order("created_at",{ascending:!0});if(s)throw s;return n||[]},Vg=async l=>{const{data:n,error:s}=await ae.from("chat_messages").insert({thread_id:l.threadId,user_id:l.userId,role:l.role,content:l.content}).select().single();if(s)throw s;return await ae.from("chat_threads").update({updated_at:new Date().toISOString()}).eq("id",l.threadId),n},Xw=async l=>{const{data:n,error:s}=await ae.functions.invoke("teacher_chat",{body:l});if(s)throw s;return n},Zw=async l=>{try{const{data:n,error:s}=await ae.from("goals").select("*").eq("child_id",l).order("created_at",{ascending:!1});if(s)throw s;const r=n||[];return Bl(`${qg}_${l}`,r),r}catch(n){if(!Ks()){const s=er(`${qg}_${l}`);return s||[]}throw n}},Fw=async(l,n,s,r,u)=>{const d={child_id:l,user_id:n,title:s,domain:r,description:u==null?void 0:u.description,priority:(u==null?void 0:u.priority)||"medium",target_date:u==null?void 0:u.target_date,notes:u==null?void 0:u.notes,status:"not_started",progress:0};if(!Ks()){Z0({type:"goal",action:"create",data:d});const y={id:`temp_${Date.now()}`,...d,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};return gt(),y}const{data:f,error:m}=await ae.from("goals").insert(d).select().single();if(m)throw m;return gt(),f},Ww=async(l,n)=>{const s={...n};if(n.status==="completed"&&(s.completed_at=new Date().toISOString(),s.progress=100),!Ks())return Z0({type:"goal_update",action:"update",data:{id:l,...s}}),gt(),{id:l,...s};const{data:r,error:u}=await ae.from("goals").update(s).eq("id",l).select().single();if(u)throw u;return gt(),r},e1=async l=>{const{error:n}=await ae.from("goals").delete().eq("id",l);if(n)throw n},t1=async(l,n)=>{try{const{data:s,error:r}=await ae.from("attendance").select("*").eq("user_id",l).eq("date",n).order("created_at",{ascending:!1});if(r)throw r;const u=s||[];return Bl(`${$g}_${n}`,u),u}catch(s){if(!Ks()){const r=er(`${$g}_${n}`);if(r)return r}throw s}},a1=async l=>{const n=l.map(u=>({child_id:u.childId,user_id:u.userId,date:u.date,status:u.status,notes:u.notes,checked_in_at:u.status==="present"||u.status==="late"?new Date().toISOString():void 0})),{data:s,error:r}=await ae.from("attendance").upsert(n,{onConflict:"child_id,date"}).select();if(r)throw r;return s||[]},n1=async(l,n,s)=>{let r=ae.from("attendance").select("*").eq("user_id",l);n&&(r=r.gte("date",n)),s&&(r=r.lte("date",s));const{data:u,error:d}=await r;if(d)throw d;const f=u||[],m=f.length,y=f.filter(j=>j.status==="present").length,p=f.filter(j=>j.status==="absent").length,b=f.filter(j=>j.status==="late").length,w=f.filter(j=>j.status==="excused").length,S=m>0?Math.round(y/m*100):0;return{total:m,present:y,absent:p,late:b,excused:w,attendanceRate:S}},mt=(l,n)=>Math.floor(Math.random()*(n-l+1))+l,Pt=l=>l[Math.floor(Math.random()*l.length)],Hs=(l,n)=>{const s=[...l],r=[];for(;s.length&&r.length<n;)r.push(s.splice(Math.floor(Math.random()*s.length),1)[0]);return r},s1=["Emir","Ali","Eymen","Mert","Kerem","Aras","Deniz","Atlas","Can","Yiit","Eyll","Zeynep","Elif","Defne","Asel","Naz","Mira","Ada","Ecrin","Lina"],i1=["Ylmaz","Demir","ahin","elik","Yldz","Yldrm","ztrk","Aydn","Arslan","Doan","Kaya","Ko","Polat","Ik","Uzun"],r1=["Aye","Fatma","Zehra","Merve","Seda","Derya","Gizem","Tuba","Esra","Pelin","Ahmet","Mehmet","Mustafa","Emre","Hakan","Cem","Caner","Serkan","Murat","Burak"],l1=["Kara","Yaln","Korkmaz","imek","zkan","Aksoy","Ta","Yurt","Trkmen","Duman","zdemir","Tademir"],o1=["Anne","Baba","Veli","Teyze","Amca"],c1=["Yumurta","Fstk","St","Gluten","Polen","Ar","Domates","Kivi"],u1=["lego","resim","mzik","hikaye","bahe","drama","dans","bilmece","yapboz","matematik oyunlar"],d1=["paylamc","sabrl","yaratc","iletiimi kuvvetli","detayc","sebatl","merakl"],h1=["Emma","Liam","Olivia","Noah","Ava","Oliver","Sophia","Elijah","Isabella","James","Mia","William","Charlotte","Benjamin","Amelia","Lucas","Harper","Henry","Evelyn","Alexander"],f1=["Smith","Johnson","Williams","Brown","Jones","Garcia","Miller","Davis","Rodriguez","Martinez","Anderson","Taylor","Thomas","Moore","Jackson"],m1=["Sarah","Michael","Jennifer","David","Emily","Robert","Jessica","John","Ashley","Christopher","Amanda","Daniel","Stephanie","Matthew","Nicole","Andrew","Elizabeth","Joshua","Megan","Ryan"],g1=["Wilson","White","Harris","Martin","Thompson","Clark","Lewis","Lee","Walker","Hall","Allen","Young"],p1=["Mother","Father","Guardian","Aunt","Uncle"],y1=["Eggs","Peanuts","Milk","Gluten","Pollen","Bee","Tomato","Kiwi"],v1=["lego","drawing","music","stories","gardening","drama","dance","puzzles","jigsaw","math games"],b1=["sharing","patient","creative","good communicator","detail-oriented","persistent","curious"],x1=()=>Ke()==="en"?h1:s1,w1=()=>Ke()==="en"?f1:i1,_1=()=>Ke()==="en"?m1:r1,S1=()=>Ke()==="en"?g1:l1,j1=()=>Ke()==="en"?p1:o1,k1=()=>Ke()==="en"?y1:c1,N1=()=>Ke()==="en"?v1:u1,E1=()=>Ke()==="en"?b1:d1,A1={classroom:"snf iinde",outdoor:"bahede",home:"ev ortamnda",other:"etkinlik srasnda"},C1={classroom:"in classroom",outdoor:"in the garden",home:"at home",other:"during activity"},T1=()=>Ke()==="en"?C1:A1,O1={turkish:["hikyedeki olaylar kendi szleriyle zetledi","grsellerden karm yaparak sorular yantlad","yeni kelimeleri cmle iinde kullanmay denedi","akranyla sohbeti balatp srdrd","tekerlemeli arklar ritmik olarak syledi","hikyeyi zetlerken snrl kelime kulland","sorulara tek kelimelik cevaplar verdi","iletiim kurmakta ekingen davrand","kendini ifade etmede zorland"],math:["eletirme oyununda doru balantlar kurdu","say sralamasn doru bir ekilde yapt","geometrik ekilleri tand ve snflandrd","basit rntleri tamamlad","lme ve tartma kavramlarn anlad","saylar kartrd, yeniden almas gerekti","ekil snflama grevinde zorland","rnt tamamlamada tereddt etti","lme kavramlarn anlamakta glk ekti"],science:["doa gzleminde merak sorularn ifade etti","basit deneyi admlaryla takip etti","bitki bymesi srecini izledi ve kayt etti","hava durumu deiikliklerini fark etti","canl-cansz ayrmn doru yapt","deney admlarn takip etmede zorland","gzlem yapmakta dikkatini verme zorluu yaad","neden-sonu ilikilerini kurmakta glk ekti","sorulara ilgisiz kald"],social:["sra beklerken sabrl davrand","arkadana materyal uzatarak i birlii yapt","duygusunu szel olarak ifade etti","oyunda basit atmay konuarak zd","kurallara uyma konusunda olumlu tutum gsterdi","sra beklerken huzursuz oldu","paylam konusunda isteksiz davrand","arkadayla anlamazlk yaad","duygusal olarak tepkili davrand","oyuncak paylamnda glk ekti"],motor_health:["topu hedefe doru gnderdi ve yakalad","denge tahtasnda kontroll yrd","makasla izgi boyunca dikkatle kesti","boncuklar ipe geirirken iki el koordinasyonu kulland","ellerini adm adm doru ykad","giyinme srasnda fermuarn kapatmay denedi","top yakalamada koordinasyon eksiklii gsterdi","denge tutmakta zorland","makasla kesmede el koordinasyonu zayf","el ykamay hatrlatmaya ihtiya duydu"],art:["resim almasnda renkleri zgrce kulland","hamur ile  boyutlu ekiller oluturdu","kolaj almasn tamamlad","izimlerinde detay ve ifade artt","yeni malzemeleri denemekten keyif ald","sanat etkinliine katlmda isteksiz davrand","malzemeleri kullanmakta zorland","izimde zgven eksiklii gsterdi","renk seiminde kararsz kald"],music:["arklarn ritimle ve enerjik syledi","ritim aletlerini doru kulland","mzik eliinde hareket etti","melodileri tand ve taklit etti","dans ederken ritme uyum salad","ritim tutmakta zorland","ark sylemekten kand","mzik etkinliine katlmakta ekingen davrand","ritim aletlerini kullanmada glk ekti"]},D1={turkish:["summarized story events in their own words","answered questions by making inferences from visuals","tried using new words in sentences","initiated and maintained conversation with peers","sang rhyming songs rhythmically","used limited vocabulary when summarizing the story","gave single-word answers to questions","was hesitant in communication","had difficulty expressing themselves"],math:["made correct connections in matching games","correctly sequenced numbers","recognized and classified geometric shapes","completed simple patterns","understood measuring and weighing concepts","confused numbers, needed more practice","struggled with shape classification task","hesitated in pattern completion","had difficulty understanding measurement concepts"],science:["expressed curiosity questions during nature observation","followed experiment steps correctly","observed and recorded plant growth process","noticed weather changes","correctly distinguished living and non-living things","struggled to follow experiment steps","had difficulty paying attention during observation","struggled to establish cause-effect relationships","showed disinterest in questions"],social:["showed patience while waiting in line","cooperated by passing materials to friends","expressed emotions verbally","resolved simple conflicts through discussion","showed positive attitude towards following rules","became restless while waiting in line","was reluctant to share","had disagreement with friend","reacted emotionally","had difficulty sharing toys"],motor_health:["threw and caught ball towards target","walked on balance beam with control","cut along lines carefully with scissors","used two-hand coordination while threading beads","washed hands correctly step by step","tried to close zipper while dressing","showed coordination deficiency in catching ball","struggled to maintain balance","weak hand coordination when cutting with scissors","needed reminders for hand washing"],art:["used colors freely in painting activity","created three-dimensional shapes with playdough","completed collage work","increased detail and expression in drawings","enjoyed trying new materials","was reluctant to participate in art activity","struggled to use materials","showed lack of confidence in drawing","was indecisive about color selection"],music:["sang songs rhythmically and energetically","used rhythm instruments correctly","moved along with music","recognized and imitated melodies","synchronized with rhythm while dancing","struggled to keep rhythm","avoided singing","was hesitant to participate in music activity","had difficulty using rhythm instruments"]},R1=()=>Ke()==="en"?D1:O1,z1=["dikkatle","hevesle","sakin bir ekilde","ksa hatrlatma ile","bamsz","tereddtle","ekinerek","zorlanarak","yardmla"],M1=["carefully","eagerly","calmly","with a brief reminder","independently","hesitantly","shyly","with difficulty","with help"],U1=()=>Ke()==="en"?M1:z1,L1=["Sre boyunca odan korudu.","Modelleme sonrasnda denemeye devam etti.","Akran desteiyle grevi tamamlad.","nceki haftaya gre daha uzun sre katlm salad.","Dikkati dalarak sk sk ara verdi.","Grev yarda kald.","Destee ihtiya duydu.","Mdahale gerekti."],B1=["Maintained focus throughout.","Continued to try after modeling.","Completed task with peer support.","Participated longer compared to last week.","Took frequent breaks due to distraction.","Task was left incomplete.","Needed support.","Intervention was required."],$1=()=>Ke()==="en"?B1:L1,q1={turkish:["Gnlk rutinde ak ulu sorular sorun ve yantlar geniletin.","Gnlk bir kitap okuma saati belirleyin ve resimlerden karm yaptrn.","Yeni kelimeleri gn iinde cmle iinde kullanmasn tevik edin."],math:["Eletirme ve snflama oyunlarna ksa gnlk oturumlar ekleyin.","Say sayma ve sralama etkinlikleri yapn.","Geometrik ekilleri gnlk hayatta gstermeye aln."],science:["Doa yrylerinde gzlem sorular sorun.","Basit deneyler yaparak merakn destekleyin.","Bitki yetitirme projesi balatn."],social:["Sra bekleme ve paylam ieren ibirlikli oyunlar planlayn.",'Duygularn ifade edebilecei "duygu kartlar" kullann.',"Rol oyunu ile atmalar konuarak zme pratikleri yapn."],motor_health:["Denge tahtas, sek sek ve hedefe atma oyunlarna zaman ayrn.","El ykama admlarn posterle hatrlatn ve pekitirin.","Makasla izgi boyunca kesme ve ince motor almalar yapn."],art:["Farkl sanat malzemeleriyle deneyler yapmasna frsat verin.","zgr resim almalar iin zaman ayrn."," boyutlu almalar (hamur, kil) ile yaratcl destekleyin."],music:["Gnlk ritim ve ark aktiviteleri ekleyin.","Basit ritim aletleri kullanarak mzik yapmasn tevik edin.","Dans ve hareket etkinlikleriyle mzii birletirin."]},H1={turkish:["Ask open-ended questions in daily routine and expand responses.","Set a daily reading time and encourage inferences from pictures.","Encourage using new words in sentences throughout the day."],math:["Add short daily sessions of matching and classification games.","Do counting and sequencing activities.","Try to show geometric shapes in daily life."],science:["Ask observation questions during nature walks.","Support curiosity by doing simple experiments.","Start a plant growing project."],social:["Plan cooperative games involving waiting in line and sharing.",'Use "emotion cards" to help express feelings.',"Practice resolving conflicts through role play."],motor_health:["Dedicate time to balance beam, hopscotch and target games.","Remind and reinforce hand washing steps with posters.","Do cutting along lines and fine motor activities with scissors."],art:["Give opportunities to experiment with different art materials.","Allow time for free drawing activities.","Support creativity with 3D work (playdough, clay)."],music:["Add daily rhythm and song activities.","Encourage making music using simple rhythm instruments.","Combine music with dance and movement activities."]},Pg=()=>Ke()==="en"?H1:q1,Ig=["turkish","math","science","social","motor_health","art","music"],G1=["classroom","outdoor","home","other"],Y1=(l,n,s,r)=>{const u=[],d=T1()[s]||(Ke()==="en"?"during activity":"etkinlikte"),f=Pt(n),m=R1()[f];let y;if(r==="high"){const w=m.slice(Math.ceil(m.length/2));y=Pt(w)}else if(r==="medium")y=Pt(m);else{const w=m.slice(0,Math.ceil(m.length/2));y=Pt(w)}const p=Pt(U1());u.push(`${d} ${y} (${p}).`),Math.random()<.6&&u.push(Pt($1()));const b=Ke()==="en"?`${l} was observed today.`:`${l} bugn gzlemlendi.`;return Math.random()<.4&&u.unshift(b),u.join(" ")},V1=(l,n)=>{const s=(l||"").toLocaleLowerCase("tr-TR"),r=["baar","heves","bamsz","doru","katlm","katld","srdr","ilerle","artt","payla","ibirlii","sakin","dikkatle","dzenli"],u=["zorlan","yardm","hatrlatma","az","snrl","kan","tereddt","uyar","destee","zorluk","mdahale","huzursuz","odaklanamad","dikkati dald","kurala uymad"],d=["kavga","vur","sr","frlatt","kendine zarar","iddet","yaral"],f=r.filter(k=>s.includes(k)).length,m=u.filter(k=>s.includes(k)).length,y=d.some(k=>s.includes(k));let p;y&&f===0?p="high":m>=2&&f===0||m>=3?p="medium":p="low";const b={};for(const k of n)p==="high"?b[k]=mt(1,2):p==="medium"?b[k]=mt(2,3):b[k]=mt(3,5);const w=[];for(const k of n)w.push(...Pg()[k]);w.length<3&&w.push(...Object.values(Pg()).flat());const S=Hs(w,3),j=p==="low"?"dk":p==="medium"?"orta":"yksek";return{summary:`Durum deerlendirmesi: Son gzlemde ${n.map(k=>k==="turkish"?"Trke":k==="math"?"Matematik":k==="science"?"Fen":k==="social"?"Sosyal":k==="motor_health"?"Hareket ve Salk":k==="art"?"Sanat":"Mzik").join(", ")} alanlarnda katlm deerlendirildi. Genel risk: ${j}.`,domain_scores:b,risk:p,suggestions:S}},P1=()=>{const n=new Date().getFullYear()-mt(3,6),s=mt(1,12),r=mt(1,28);return`${n}-${String(s).padStart(2,"0")}-${String(r).padStart(2,"0")}`},I1=()=>`+90 5${mt(0,9)}${mt(0,9)} ${mt(100,999)} ${mt(10,99)} ${mt(10,99)}`,K1=(l,n)=>`${l}.${n}${mt(1,99)}@ornekmail.com`.toLowerCase().replace(//g,"g").replace(//g,"u").replace(//g,"s").replace(//g,"i").replace(//g,"o").replace(//g,"c"),Q1=()=>({f:Pt(_1()),l:Pt(S1())}),J1=()=>{const l=mt(1,2),n=Array.from({length:l}).map(()=>{const f=Q1();return{id:Vs(),name:`${f.f} ${f.l}`,relation:Pt(j1()),phone:I1(),email:K1(f.f,f.l)}}),s=Math.random()<.6?Hs(k1(),mt(0,2)):[],r=Math.random()<.4?"Dzenli kontrol nerildi.":"",u=Hs(N1(),mt(2,4)),d=Hs(E1(),mt(1,3));return{guardians:n,health:{allergies:s,notes:r},interests:u,strengths:d}},X1=async(l,n="#e0f2fe",s="#1e293b")=>{const r=document.createElement("canvas"),u=640,d=420;r.width=u,r.height=d;const f=r.getContext("2d");return f.fillStyle=n,f.fillRect(0,0,u,d),f.fillStyle="#10b981",f.globalAlpha=.15,f.beginPath(),f.arc(u-80,80,60,0,Math.PI*2),f.fill(),f.globalAlpha=1,f.fillStyle=s,f.font="bold 36px system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial",f.fillText(l,32,120),f.font="20px system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial",f.fillText("PortfoAI  Demo",32,160),new Promise((m,y)=>{r.toBlob(p=>{if(!p)return y(new Error("blob failed"));m(new File([p],"demo.jpg",{type:"image/jpeg",lastModified:Date.now()}))},"image/jpeg",.9)})},Z1=async(l,n={})=>{const s=y=>{var p;console.log("[seed]",y),(p=n.onProgress)==null||p.call(n,y)},r=n.classNames&&n.classNames.length>0?n.classNames:Array.from({length:n.classes??2},(y,p)=>Ke()==="en"?p===0?"Class A":p===1?"Class B":`Class ${p+1}`:p===0?"Snf A":p===1?"Snf B":`Snf ${p+1}`),u=n.childrenPerClass??15,d=n.observationsPerChild??7,f=n.mediaPerChild??2,m={time:new Date().toISOString(),classes:[],children:[],observations:[],media:[]};s(`Snflar: ${r.join(", ")}`);for(const y of r)try{const p=await F0(l,y);m.classes.push(p.id)}catch{}for(const y of r){s(`${y} iin ${u} ocuk oluturuluyor...`);for(let p=0;p<u;p++){const b=Pt(x1()),w=Pt(w1()),S=J1(),j={first_name:b,last_name:w,dob:P1(),photo_url:void 0,classroom:y,consent_obtained:!0,guardians:S.guardians,health:S.health,interests:S.interests,strengths:S.strengths};let C;try{C=await W0(j,l),m.children.push(C.id);try{await zu(C.id,{guardians:j.guardians,health:j.health,interests:j.interests,strengths:j.strengths})}catch(R){console.warn("child meta update warn",R)}}catch(R){console.error("Child insert failed",R);continue}for(let R=0;R<f;R++)try{const k=await X1(`${b} ${w}  rn ${R+1}`),$=await Yw(l,C.id,k),B=await Hw({child_id:C.id,type:"image",storage_path:$,name:`rn ${R+1}`,description:"Demo rn",domain:Pt(Ig)},l);m.media.push(B.id)}catch(k){console.warn("Media upload skipped:",k)}for(let R=0;R<d;R++){const k=mt(1,3),$=Hs(Ig,k),B=Pt(G1),q=Math.random(),T=q<.5?"low":q<.85?"medium":"high",Z=Y1(`${b} ${w}`,$,B,T),Q=["oyun","kitap","bahe","mzik","sanat","ritim","paylam","ince-motor","kaba-motor"],P=mt(2,3),F=["demo",...Hs(Q,P)];try{const O=await tp({child_id:C.id,note:Z,context:B,domains:$,tags:F},l);if(O&&O.id){m.observations.push(O.id);try{const G=V1(Z,$);await $l(O.id,l,{summary:G.summary,risk:G.risk,suggestions:G.suggestions,domain_scores:G.domain_scores})}catch(G){console.warn("Seed assessment failed:",G)}}}catch(O){console.warn("Observation insert skipped:",O)}}}}s("Demo verisi oluturma tamamland.");try{localStorage.setItem("lastSeedRecord",JSON.stringify(m))}catch{}},F1=async(l,n={})=>{const s=d=>{var f;console.log("[seed:revert]",d),(f=n.onProgress)==null||f.call(n,d)},r=(()=>{try{return localStorage.getItem("lastSeedRecord")}catch{return null}})(),u=r?JSON.parse(r):null;try{let d=(u==null?void 0:u.observations)||[];if(d.length===0){const{data:f}=await ae.from("observations").select("id").eq("user_id",l).contains("tags",["demo"]);d=(f||[]).map(m=>m.id)}d.length>0&&(s(`Gzlemler siliniyor (${d.length})...`),await ae.from("assessments").delete().in("observation_id",d),await ae.from("observations").delete().in("id",d))}catch(d){console.warn("Obs revert warn:",d)}try{let d=(u==null?void 0:u.media)||[];if(d.length===0){const{data:f}=await ae.from("media").select("id").eq("user_id",l).eq("description","Demo rn");d=(f||[]).map(m=>m.id)}if(d.length>0){s(`Medya siliniyor (${d.length})...`);const{data:f}=await ae.from("media").select("id, storage_path").in("id",d),m=(f||[]).map(y=>y.storage_path).filter(Boolean);m.length&&await ae.storage.from("child-media").remove(m),await ae.from("media").delete().in("id",d)}}catch(d){console.warn("Media revert warn:",d)}try{let d=(u==null?void 0:u.children)||[];if(d.length===0){const f=n.days??14,m=new Date;m.setDate(m.getDate()-f);const{data:y}=await ae.from("children").select("id, created_at, classroom").eq("user_id",l).gte("created_at",m.toISOString()),p=y||[];if(p.length>0){const b=new Set(["Snf A","Snf B"]);for(const w of p)b.has(w.classroom)&&d.push(w.id)}}if(d.length>0){s(`ocuklar siliniyor (${d.length})...`);for(const f of d)try{await Xu(f)}catch(m){console.warn("child delete warn",m)}}}catch(d){console.warn("Children revert warn:",d)}try{let d=(u==null?void 0:u.classes)||[];if(d.length===0){const{data:f}=await ae.from("classes").select("id, name").eq("user_id",l);d=(f||[]).filter(y=>y.name==="Snf A"||y.name==="Snf B").map(y=>y.id)}d.length>0&&(s("Snflar siliniyor..."),await ae.from("classes").delete().in("id",d))}catch(d){console.warn("Classes revert warn:",d)}try{localStorage.removeItem("lastSeedRecord")}catch{}gt(),s("Demo verisi geri alnd.")},W1=()=>{const[l,n]=_.useState(()=>localStorage.getItem("theme")||"light");return _.useEffect(()=>{const s=()=>n(localStorage.getItem("theme")||"light");window.addEventListener("storage",s);const r=new MutationObserver(()=>{n(document.documentElement.getAttribute("data-theme")||"light")});return r.observe(document.documentElement,{attributes:!0,attributeFilter:["data-theme"]}),()=>{window.removeEventListener("storage",s),r.disconnect()}},[]),l},e_=Et(),gu=({navigate:l})=>{var q;const{user:n}=Qt(),s=W1(),[r,u]=_.useState([]),[d,f]=_.useState([]),[m,y]=_.useState(!0),[p,b]=_.useState(0),[w,S]=_.useState(0),[j,C]=_.useState([]),[R,k]=_.useState([]),$=_.useMemo(()=>{var Q;const T=(n==null?void 0:n.user_metadata)||{};return[T.first_name,T.last_name].filter(Boolean).join(" ").trim()||((Q=n==null?void 0:n.email)==null?void 0:Q.split("@")[0])||""},[n]);_.useEffect(()=>{(async()=>{if(n)try{y(!0);const T=await ar(n.id);u(T);const{data:Z}=await ae.from("observations").select("id, child_id, note, domains, created_at, assessments(risk)").eq("user_id",n.id).order("created_at",{ascending:!1}).limit(5),Q=(Z||[]).map(ce=>{var I;return{id:ce.id,child_id:ce.child_id,note:ce.note,domains:ce.domains||[],created_at:ce.created_at,assessment_risk:Array.isArray(ce.assessments)&&ce.assessments.length>0?(I=ce.assessments[0])==null?void 0:I.risk:null}});f(Q);const P=new Date;P.setDate(P.getDate()-7);const F=P.toISOString(),O=await ae.from("observations").select("id",{count:"exact",head:!0}).eq("user_id",n.id).gte("created_at",F);b(O.count||0);const G=await ae.from("media").select("id",{count:"exact",head:!0}).eq("user_id",n.id).gte("created_at",F);S(G.count||0);const{data:ie}=await ae.from("observations").select("id, created_at").eq("user_id",n.id).gte("created_at",F),{data:ne}=await ae.from("media").select("id, created_at").eq("user_id",n.id).gte("created_at",F),se=[];for(let ce=6;ce>=0;ce--){const I=new Date;I.setHours(0,0,0,0),I.setDate(I.getDate()-ce);const M=I.toISOString().slice(0,10),z=new Intl.DateTimeFormat("tr-TR",{day:"2-digit",month:"short"}).format(I),re=(ie||[]).filter(me=>(me.created_at||"").slice(0,10)===M).length,X=(ne||[]).filter(me=>(me.created_at||"").slice(0,10)===M).length;se.push({label:z,obs:re,media:X})}C(se)}finally{y(!1)}})()},[n]),_.useEffect(()=>{if(n)try{const T=localStorage.getItem(`pinned:${n.id}`);k(T?JSON.parse(T):[])}catch{k([])}},[n]);const B=(q=n==null?void 0:n.user_metadata)!=null&&q.school_name?`  ${n.user_metadata.school_name}`:"";return o.jsxs("div",{children:[o.jsxs("h1",{className:`text-3xl font-bold ${s==="dark"?"text-white":"text-stone-700"}`,children:[v("welcome"),", ",$,B]}),o.jsx("div",{className:"mt-2 w-28 h-1 rounded-full bg-gradient-to-r from-stone-300 via-amber-200 to-stone-300"}),o.jsxs("div",{className:"mt-6",children:[o.jsx("h2",{className:`text-lg font-medium ${s==="dark"?"text-gray-200":"text-stone-900"}`,children:v("quickAccess")}),o.jsxs("div",{className:"mt-4 grid grid-cols-1 gap-4 sm:grid-cols-2",children:[o.jsxs("button",{onClick:()=>l("children",{screen:"add-child"}),className:"flex items-center justify-center p-6 rounded-lg shadow-md bg-gradient-to-r from-orange-500 to-orange-600 hover:from-orange-600 hover:to-orange-700 text-white transition-all transform active:scale-95",children:[o.jsx(_w,{className:"w-8 h-8 text-orange-100"}),o.jsx("span",{className:"ml-4 text-xl font-semibold text-orange-50",children:v("addChild")})]}),o.jsxs("button",{onClick:()=>l("children"),className:"flex items-center justify-center p-6 rounded-lg shadow-md bg-gradient-to-r from-indigo-600 to-indigo-700 hover:from-indigo-700 hover:to-indigo-800 text-white transition-all transform active:scale-95",children:[o.jsx(Sw,{className:"w-8 h-8 text-indigo-100"}),o.jsx("span",{className:"ml-4 text-xl font-semibold text-indigo-50",children:v("childList")})]})]})]}),o.jsxs("div",{className:"mt-6 bg-white rounded-lg shadow p-4 card-colorful card-colorful-blue",children:[o.jsx("div",{className:"flex items-center justify-between mb-2",children:o.jsxs("h2",{className:"text-lg font-semibold text-gray-900",children:[" ",v("activity7days")]})}),o.jsx("div",{className:"grid grid-cols-7 gap-2 items-end h-28",children:j.map((T,Z)=>{const Q=Math.max(1,...j.map(G=>G.obs+G.media)),P=T.obs+T.media,F=Math.round(P/Q*88)+8,O=["#8b5cf6","#ec4899","#3b82f6","#10b981","#f59e0b","#6366f1","#14b8a6"];return o.jsxs("div",{className:"flex flex-col items-center",children:[o.jsx("div",{className:"w-6 rounded-t transition-all hover:scale-110",style:{height:`${F}px`,backgroundColor:O[Z%O.length]},title:`${T.label}: ${T.obs} gzlem, ${T.media} rn`}),o.jsx("div",{className:"mt-1 text-xs text-gray-500 font-medium",children:T.label})]},Z)})})]}),R.length>0&&o.jsxs("div",{className:"mt-6",children:[o.jsxs("h2",{className:"text-lg font-semibold text-gray-900",children:[" ",v("pinnedChildren")]}),o.jsx("div",{className:"mt-3 grid grid-cols-1 sm:grid-cols-3 lg:grid-cols-4 gap-3",children:r.filter(T=>R.includes(T.id)).slice(0,8).map((T,Z)=>{const Q=`${(T.first_name||"")[0]||""}${(T.last_name||"")[0]||""}`.toUpperCase(),P=["card-colorful-purple","card-colorful-blue","card-colorful-green","card-colorful-pink","card-colorful-orange"],F=["bg-purple-200 text-purple-700","bg-blue-200 text-blue-700","bg-green-200 text-green-700","bg-pink-200 text-pink-700","bg-orange-200 text-orange-700"];return o.jsxs("div",{className:`bg-white rounded-lg shadow p-4 flex items-center gap-3 card-colorful ${P[Z%P.length]}`,children:[o.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center font-bold ${F[Z%F.length]}`,children:Q}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"font-medium text-gray-900 truncate",children:[T.first_name," ",T.last_name]}),o.jsx("div",{className:"text-xs text-gray-500 truncate",children:T.classroom||""})]}),o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("button",{className:"text-primary text-sm hover:underline font-medium",onClick:()=>l("child-detail",{id:T.id}),children:v("profile")}),o.jsx("button",{className:"text-secondary text-sm hover:underline font-medium",onClick:()=>l("add-observation",{childId:T.id}),children:v("observations")})]})]},T.id)})})]}),o.jsxs("div",{className:"mt-8",children:[o.jsxs("h2",{className:"text-lg font-semibold text-gray-900",children:[" ",v("recentObservations")]}),o.jsx("div",{className:"mt-4 bg-white rounded-lg shadow-md p-6 card-colorful card-colorful-purple",children:m?o.jsx("p",{className:"text-gray-500",children:v("loading")}):d.length===0?o.jsx("p",{className:"text-gray-500",children:v("noRecentObservations")}):o.jsx("ul",{className:"space-y-3",children:d.map((T,Z)=>{var P,F;const Q=["border-l-purple-500","border-l-blue-500","border-l-green-500","border-l-pink-500","border-l-orange-500"];return o.jsxs("li",{className:`border-l-4 ${Q[Z%Q.length]} border rounded-lg p-4 bg-gradient-to-r from-gray-50 to-white hover:shadow-md transition-shadow`,children:[o.jsx("div",{className:"flex items-center justify-between text-sm text-gray-600",children:o.jsxs("div",{className:"font-medium",children:[new Date(T.created_at).toLocaleString(yn())," - ",o.jsxs("span",{className:"text-gray-900",children:[(P=r.find(O=>O.id===T.child_id))==null?void 0:P.first_name," ",(F=r.find(O=>O.id===T.child_id))==null?void 0:F.last_name]})]})}),o.jsx("div",{className:"mt-2 text-gray-800 line-clamp-3 whitespace-pre-wrap",children:T.note}),T.domains&&T.domains.length>0&&o.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:T.domains.map((O,G)=>o.jsx("span",{className:"text-xs bg-gradient-to-r from-blue-50 to-indigo-50 text-blue-700 border border-blue-200 rounded-full px-3 py-1 font-medium",children:e_[O]||O},G))}),o.jsx("div",{className:"mt-3",children:o.jsxs("button",{className:"px-3 py-1 bg-primary text-white rounded-md hover:bg-opacity-90 text-sm font-medium",onClick:()=>l("child-detail",{id:T.child_id}),children:[v("viewChild")," "]})})]},T.id)})})})]})]})};function t_({title:l,titleId:n,...s},r){return _.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":n},s),l?_.createElement("title",{id:n},l):null,_.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99"}))}const Kg=_.forwardRef(t_);function a_({title:l,titleId:n,...s},r){return _.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":n},s),l?_.createElement("title",{id:n},l):null,_.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 9V5.25A2.25 2.25 0 0 0 13.5 3h-6a2.25 2.25 0 0 0-2.25 2.25v13.5A2.25 2.25 0 0 0 7.5 21h6a2.25 2.25 0 0 0 2.25-2.25V15m3 0 3-3m0 0-3-3m3 3H9"}))}const n_=_.forwardRef(a_);function s_({title:l,titleId:n,...s},r){return _.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":n},s),l?_.createElement("title",{id:n},l):null,_.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"}))}const i_=_.forwardRef(s_);function r_({title:l,titleId:n,...s},r){return _.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":n},s),l?_.createElement("title",{id:n},l):null,_.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 21v-8.25M15.75 21v-8.25M8.25 21v-8.25M3 9l9-6 9 6m-1.5 12V10.332A48.36 48.36 0 0 0 12 9.75c-2.551 0-5.056.2-7.5.582V21M3 21h18M12 6.75h.008v.008H12V6.75Z"}))}const l_=_.forwardRef(r_);function o_({title:l,titleId:n,...s},r){return _.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":n},s),l?_.createElement("title",{id:n},l):null,_.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.827 6.175A2.31 2.31 0 0 1 5.186 7.23c-.38.054-.757.112-1.134.175C2.999 7.58 2.25 8.507 2.25 9.574V18a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18V9.574c0-1.067-.75-1.994-1.802-2.169a47.865 47.865 0 0 0-1.134-.175 2.31 2.31 0 0 1-1.64-1.055l-.822-1.316a2.192 2.192 0 0 0-1.736-1.039 48.774 48.774 0 0 0-5.232 0 2.192 2.192 0 0 0-1.736 1.039l-.821 1.316Z"}),_.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 12.75a4.5 4.5 0 1 1-9 0 4.5 4.5 0 0 1 9 0ZM18.75 10.5h.008v.008h-.008V10.5Z"}))}const Ji=_.forwardRef(o_);function c_({title:l,titleId:n,...s},r){return _.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":n},s),l?_.createElement("title",{id:n},l):null,_.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M20.25 8.511c.884.284 1.5 1.128 1.5 2.097v4.286c0 1.136-.847 2.1-1.98 2.193-.34.027-.68.052-1.02.072v3.091l-3-3c-1.354 0-2.694-.055-4.02-.163a2.115 2.115 0 0 1-.825-.242m9.345-8.334a2.126 2.126 0 0 0-.476-.095 48.64 48.64 0 0 0-8.048 0c-1.131.094-1.976 1.057-1.976 2.192v4.286c0 .837.46 1.58 1.155 1.951m9.345-8.334V6.637c0-1.621-1.152-3.026-2.76-3.235A48.455 48.455 0 0 0 11.25 3c-2.115 0-4.198.137-6.24.402-1.608.209-2.76 1.614-2.76 3.235v6.226c0 1.621 1.152 3.026 2.76 3.235.577.075 1.157.14 1.74.194V21l4.155-4.155"}))}const u_=_.forwardRef(c_);function d_({title:l,titleId:n,...s},r){return _.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":n},s),l?_.createElement("title",{id:n},l):null,_.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m4.5 12.75 6 6 9-13.5"}))}const h_=_.forwardRef(d_);function f_({title:l,titleId:n,...s},r){return _.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":n},s),l?_.createElement("title",{id:n},l):null,_.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.35 3.836c-.065.21-.1.433-.1.664 0 .414.336.75.75.75h4.5a.75.75 0 0 0 .75-.75 2.25 2.25 0 0 0-.1-.664m-5.8 0A2.251 2.251 0 0 1 13.5 2.25H15c1.012 0 1.867.668 2.15 1.586m-5.8 0c-.376.023-.75.05-1.124.08C9.095 4.01 8.25 4.973 8.25 6.108V8.25m8.9-4.414c.376.023.75.05 1.124.08 1.131.094 1.976 1.057 1.976 2.192V16.5A2.25 2.25 0 0 1 18 18.75h-2.25m-7.5-10.5H4.875c-.621 0-1.125.504-1.125 1.125v11.25c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125V18.75m-7.5-10.5h6.375c.621 0 1.125.504 1.125 1.125v9.375m-8.25-3 1.5 1.5 3-3.75"}))}const m_=_.forwardRef(f_);function g_({title:l,titleId:n,...s},r){return _.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":n},s),l?_.createElement("title",{id:n},l):null,_.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 0 1 1.37.49l1.296 2.247a1.125 1.125 0 0 1-.26 1.431l-1.003.827c-.293.241-.438.613-.43.992a7.723 7.723 0 0 1 0 .255c-.008.378.137.75.43.991l1.004.827c.424.35.534.955.26 1.43l-1.298 2.247a1.125 1.125 0 0 1-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.47 6.47 0 0 1-.22.128c-.331.183-.581.495-.644.869l-.213 1.281c-.09.543-.56.94-1.11.94h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 0 1-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 0 1-1.369-.49l-1.297-2.247a1.125 1.125 0 0 1 .26-1.431l1.004-.827c.292-.24.437-.613.43-.991a6.932 6.932 0 0 1 0-.255c.007-.38-.138-.751-.43-.992l-1.004-.827a1.125 1.125 0 0 1-.26-1.43l1.297-2.247a1.125 1.125 0 0 1 1.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.086.22-.128.332-.183.582-.495.644-.869l.214-1.28Z"}),_.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))}const p_=_.forwardRef(g_);function y_({title:l,titleId:n,...s},r){return _.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":n},s),l?_.createElement("title",{id:n},l):null,_.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"}))}const Qg=_.forwardRef(y_);function v_({title:l,titleId:n,...s},r){return _.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":n},s),l?_.createElement("title",{id:n},l):null,_.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m2.25 12 8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25"}))}const b_=_.forwardRef(v_);function x_({title:l,titleId:n,...s},r){return _.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":n},s),l?_.createElement("title",{id:n},l):null,_.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21.752 15.002A9.72 9.72 0 0 1 18 15.75c-5.385 0-9.75-4.365-9.75-9.75 0-1.33.266-2.597.748-3.752A9.753 9.753 0 0 0 3 11.25C3 16.635 7.365 21 12.75 21a9.753 9.753 0 0 0 9.002-5.998Z"}))}const w_=_.forwardRef(x_);function __({title:l,titleId:n,...s},r){return _.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":n},s),l?_.createElement("title",{id:n},l):null,_.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m2.25 15.75 5.159-5.159a2.25 2.25 0 0 1 3.182 0l5.159 5.159m-1.5-1.5 1.409-1.409a2.25 2.25 0 0 1 3.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 0 0 1.5-1.5V6a1.5 1.5 0 0 0-1.5-1.5H3.75A1.5 1.5 0 0 0 2.25 6v12a1.5 1.5 0 0 0 1.5 1.5Zm10.5-11.25h.008v.008h-.008V8.25Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"}))}const np=_.forwardRef(__);function S_({title:l,titleId:n,...s},r){return _.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":n},s),l?_.createElement("title",{id:n},l):null,_.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3v2.25m6.364.386-1.591 1.591M21 12h-2.25m-.386 6.364-1.591-1.591M12 18.75V21m-4.773-4.227-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0Z"}))}const j_=_.forwardRef(S_);function k_({title:l,titleId:n,...s},r){return _.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":n},s),l?_.createElement("title",{id:n},l):null,_.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"}))}const N_=_.forwardRef(k_);function E_({title:l,titleId:n,...s},r){return _.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":n},s),l?_.createElement("title",{id:n},l):null,_.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19.128a9.38 9.38 0 0 0 2.625.372 9.337 9.337 0 0 0 4.121-.952 4.125 4.125 0 0 0-7.533-2.493M15 19.128v-.003c0-1.113-.285-2.16-.786-3.07M15 19.128v.106A12.318 12.318 0 0 1 8.624 21c-2.331 0-4.512-.645-6.374-1.766l-.001-.109a6.375 6.375 0 0 1 11.964-3.07M12 6.375a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0Zm8.25 2.25a2.625 2.625 0 1 1-5.25 0 2.625 2.625 0 0 1 5.25 0Z"}))}const A_=_.forwardRef(E_);function C_({title:l,titleId:n,...s},r){return _.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":n},s),l?_.createElement("title",{id:n},l):null,_.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"}))}const sp=_.forwardRef(C_),T_=({children:l,navigate:n})=>{var j,C,R;const{user:s}=Qt(),u=(k=>(k||"").replace(/[^A-Za-z0-9 .,'-]/g," ").replace(/\s+/g," ").trim())(s!=null&&s.user_metadata&&(s.user_metadata.first_name||s.user_metadata.last_name)?`${((j=s==null?void 0:s.user_metadata)==null?void 0:j.first_name)??""} ${((C=s==null?void 0:s.user_metadata)==null?void 0:C.last_name)??""}`:((R=s==null?void 0:s.email)==null?void 0:R.split("@")[0])||""),[d,f]=_.useState(!1),[m,y]=_.useState(()=>{const k=localStorage.getItem("theme");return k==="kids"?"light":k||"light"});_.useEffect(()=>{localStorage.setItem("theme",m),document.documentElement.setAttribute("data-theme",m)},[m]),_.useEffect(()=>{const k="dark-theme-overrides";if(document.getElementById(k))return;const $=document.createElement("style");$.id=k,$.textContent=`
      /* Dark mode text colors */
      html[data-theme='dark'] body { 
        color: #e5e7eb; 
      }
      
      html[data-theme='dark'] .text-gray-900,
      html[data-theme='dark'] .text-gray-800,
      html[data-theme='dark'] .text-gray-700 { 
        color: #e5e7eb !important; 
      }
      
      html[data-theme='dark'] .text-gray-600 { 
        color: #9ca3af !important; 
      }
      
      html[data-theme='dark'] .text-gray-500 { 
        color: #6b7280 !important; 
      }
      
      html[data-theme='dark'] .text-gray-400 { 
        color: #4b5563 !important; 
      }
      
      /* Dark mode - Colorful card borders stay vibrant */
      html[data-theme='dark'] .card-colorful {
        background-color: #1a1a2e !important;
        border-width: 2px;
      }
      
      /* Dark mode - Gradient text remains visible */
      html[data-theme='dark'] .text-gradient-purple {
        background: linear-gradient(to right, #a78bfa, #c084fc);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
      }
      
      /* Dark mode - Buttons remain vibrant */
      html[data-theme='dark'] .btn-gradient-primary,
      html[data-theme='dark'] .btn-gradient-success,
      html[data-theme='dark'] .btn-gradient-info {
        filter: brightness(1.1);
      }
    `,document.head.appendChild($)},[]);const p=[{name:v("dashboard"),icon:b_,page:"dashboard",color:"blue"},{name:v("children"),icon:A_,page:"children",color:"green"},{name:v("classes"),icon:l_,page:"classes",color:"purple"},{name:v("attendance"),icon:m_,page:"attendance",color:"red"},{name:v("aiAssistant"),icon:u_,page:"teacher-chat",color:"pink"},{name:v("settings"),icon:p_,page:"settings",color:"orange"}],b=_.useMemo(()=>{const k=m==="dark";return{sidebarBg:k?"bg-[#1a1a2e] border-r border-[#2a3f5f]":"bg-white/95 backdrop-blur-sm border-r border-gray-200",headerBorder:k?"border-[#2a3f5f]":"border-gray-200",headerTitle:k?"text-gray-100":"text-gray-900",headerSub:k?"text-gray-400":"text-gray-500",navItem:k?"text-gray-300 hover:bg-[#1e2a47] hover:text-white":"text-gray-700 hover:bg-gray-100 hover:text-gray-900",signOut:k?"text-gray-300 hover:bg-[#1e2a47] hover:text-white":"text-gray-700 hover:bg-gray-100 hover:text-gray-900",footerBorder:k?"border-[#2a3f5f]":"border-gray-200",appBg:"bg-transparent"}},[m]),w=async()=>{try{await ae.auth.signOut()}catch{}try{sessionStorage.clear();const k=[];for(let $=0;$<localStorage.length;$++){const B=localStorage.key($);B&&(B.startsWith("sb-")||B.includes("supabase"))&&k.push(B)}k.forEach($=>localStorage.removeItem($))}catch{}try{window.location.hash=""}catch{}window.location.reload()},S=o.jsxs("div",{className:"flex flex-col h-full",children:[o.jsx("div",{className:`p-4 border-b ${b.headerBorder} ${m==="dark"?"bg-gradient-to-r from-[#1e2a47] via-[#1a1a2e] to-[#1e2a47]":"bg-gradient-to-r from-purple-50 via-pink-50 to-blue-50"}`,children:o.jsxs("div",{className:"flex items-center justify-center gap-3",children:[o.jsxs("div",{className:"relative group",children:[o.jsx("div",{className:"absolute -inset-1 bg-gradient-to-r from-purple-600 via-pink-600 to-blue-600 rounded-lg blur opacity-25 group-hover:opacity-50 transition duration-300"}),o.jsx("img",{src:"/logo.png",alt:"Lukid AI",className:"relative h-14 w-14 object-contain select-none drop-shadow-md group-hover:scale-105 transition-transform duration-300",draggable:!1})]}),o.jsx("span",{className:`text-lg font-bold tracking-tight ${m==="dark"?"text-gray-100":"text-gray-800"}`,children:"Lukid AI"})]})}),o.jsxs("nav",{className:"flex-1 px-2 py-4 space-y-2",children:[o.jsxs("a",{href:"#",onClick:k=>{k.preventDefault(),n("getting-started"),f(!1)},className:`group flex items-center px-4 py-3 rounded-xl ${m==="dark"?"text-gray-300 hover:bg-[#1e2a47]":"text-gray-700 hover:bg-gradient-to-r hover:from-yellow-50 hover:to-yellow-100"} hover:shadow-md transition-all duration-200 relative overflow-hidden`,children:[o.jsx("div",{className:"absolute left-0 top-0 bottom-0 w-1 bg-yellow-500 transform -translate-x-full group-hover:translate-x-0 transition-transform duration-200"}),o.jsx(Qg,{className:"w-6 h-6 mr-3 group-hover:scale-110 transition-transform duration-200"}),o.jsx("span",{className:"font-medium group-hover:translate-x-1 transition-transform duration-200",children:v("gettingStarted")||"Balarken"})]}),p.map(k=>{const $=m==="dark"?"hover:bg-[#1e2a47]":{blue:"hover:from-blue-50 hover:to-blue-100 group-hover:border-blue-500",green:"hover:from-green-50 hover:to-green-100 group-hover:border-green-500",purple:"hover:from-purple-50 hover:to-purple-100 group-hover:border-purple-500",pink:"hover:from-pink-50 hover:to-pink-100 group-hover:border-pink-500",orange:"hover:from-orange-50 hover:to-orange-100 group-hover:border-orange-500",red:"hover:from-red-50 hover:to-red-100 group-hover:border-red-500"}[k.color]||"hover:from-gray-50 hover:to-gray-100 group-hover:border-gray-500",B={blue:"text-blue-600",green:"text-green-600",purple:"text-purple-600",pink:"text-pink-600",orange:"text-orange-600",red:"text-red-600"}[k.color]||"text-gray-600";return o.jsxs("a",{href:"#",onClick:q=>{q.preventDefault(),n(k.page),f(!1)},className:`group flex items-center px-4 py-3 rounded-xl ${m==="dark"?"text-gray-300":"text-gray-700"} ${m==="dark"?$:`hover:bg-gradient-to-r ${$}`} hover:shadow-md transition-all duration-200 relative overflow-hidden`,children:[o.jsx("div",{className:`absolute left-0 top-0 bottom-0 w-1 transform -translate-x-full group-hover:translate-x-0 transition-transform duration-200 ${B.replace("text-","bg-")}`}),o.jsx(k.icon,{className:`w-6 h-6 mr-3 group-hover:scale-110 transition-transform duration-200 ${m!=="dark"?B:""}`}),o.jsx("span",{className:"font-medium group-hover:translate-x-1 transition-transform duration-200",children:k.name})]},k.name)})]}),o.jsxs("div",{className:`p-4 border-t ${b.footerBorder}`,children:[o.jsxs("div",{className:"mb-3",children:[o.jsxs("div",{className:`text-xs mb-2 font-semibold ${m==="dark"?"text-gray-300":"text-gray-600"}`,children:[" ",v("theme")]}),o.jsxs("div",{className:"flex gap-3",children:[o.jsxs("button",{className:`flex-1 px-4 py-2.5 rounded-lg text-sm font-medium transition-all duration-200 flex items-center justify-center gap-2 ${m==="light"?"bg-gradient-to-r from-blue-500 to-blue-600 text-white shadow-lg scale-105":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,onClick:()=>y("light"),children:[o.jsx(j_,{className:"w-5 h-5"}),o.jsx("span",{className:"text-xs font-semibold",children:v("lightTheme")})]}),o.jsxs("button",{className:`flex-1 px-4 py-2.5 rounded-lg text-sm font-medium transition-all duration-200 flex items-center justify-center gap-2 ${m==="dark"?"bg-gradient-to-r from-gray-700 to-gray-900 text-white shadow-lg scale-105":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,onClick:()=>y("dark"),children:[o.jsx(w_,{className:"w-5 h-5"}),o.jsx("span",{className:"text-xs font-semibold",children:v("darkTheme")})]})]})]}),o.jsxs("button",{onClick:w,className:"group w-full text-left flex items-center px-4 py-3 rounded-xl text-gray-700 hover:bg-gradient-to-r hover:from-red-50 hover:to-red-100 hover:shadow-md transition-all duration-200 relative overflow-hidden",children:[o.jsx("div",{className:"absolute left-0 top-0 bottom-0 w-1 bg-red-500 transform -translate-x-full group-hover:translate-x-0 transition-transform duration-200"}),o.jsx(n_,{className:"w-6 h-6 mr-3 group-hover:scale-110 transition-transform duration-200"}),o.jsx("span",{className:"font-medium group-hover:translate-x-1 transition-transform duration-200",children:v("signOut")})]})]})]});return o.jsxs("div",{className:`flex h-screen ${b.appBg}`,children:[o.jsxs("div",{className:`fixed inset-0 z-40 flex md:hidden ${d?"":"hidden"}`,children:[o.jsx("div",{className:"fixed inset-0 bg-black/60",onClick:()=>f(!1)}),o.jsxs("div",{className:`relative flex-1 flex flex-col max-w-xs w-full ${b.sidebarBg}`,children:[o.jsx("div",{className:"absolute top-0 right-0 -mr-12 pt-2",children:o.jsx("button",{onClick:()=>f(!1),className:"ml-1 flex items-center justify-center h-10 w-10 rounded-full focus:outline-none focus:ring-2 focus:ring-inset focus:ring-white",children:o.jsx(sp,{className:"h-6 w-6 text-white"})})}),S]})]}),o.jsx("div",{className:"hidden md:flex md:flex-shrink-0",children:o.jsx("div",{className:"flex flex-col w-64",children:o.jsx("div",{className:`flex flex-col h-0 flex-1 ${b.sidebarBg}`,children:S})})}),o.jsx("div",{className:"flex flex-col w-0 flex-1 overflow-hidden",children:o.jsxs("main",{className:"flex-1 relative z-0 overflow-y-auto focus:outline-none",children:[o.jsx("div",{className:`${m==="dark"?"bg-gradient-to-r from-[#0c0f1d] via-[#161b33] to-[#0c0f1d]":"bg-gradient-to-r from-[#161b33] via-[#1e2a47] to-[#161b33]"} shadow-lg pt-safe transition-colors duration-300`,children:o.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("button",{onClick:()=>f(!0),className:"md:hidden p-2 -ml-2 rounded-lg focus:outline-none transition-colors text-white/80 hover:bg-white/10",children:o.jsx(i_,{className:"h-7 w-7"})}),o.jsx("div",{className:"backdrop-blur-sm rounded-xl p-3 shadow-sm hidden sm:block bg-indigo-500/20 border border-indigo-500/30",children:o.jsx(Qg,{className:"w-8 h-8 text-indigo-100"})}),o.jsxs("div",{children:[o.jsxs("h1",{className:"text-xl sm:text-2xl font-bold flex items-center gap-2 text-white",children:[o.jsx("span",{className:"hidden sm:inline",children:v("earlyChildhoodSystem")}),o.jsx("span",{className:"sm:hidden",children:"Lukid AI"}),o.jsx("span",{className:"text-xs font-normal px-2 py-1 rounded-lg bg-orange-500/30 text-orange-100",children:"Beta"})]}),o.jsxs("p",{className:"text-sm mt-1 text-slate-300",children:[v("welcomeBack"),", ",o.jsx("span",{className:"font-semibold text-white",children:u})," "]})]})]}),o.jsx("div",{className:"hidden lg:flex items-center gap-3",children:o.jsxs("div",{className:"backdrop-blur-sm rounded-lg px-4 py-2 text-sm bg-white/5 text-slate-200 border border-indigo-500/20",children:[o.jsxs("span",{className:"opacity-70",children:[v("today"),":"]})," ",o.jsx("span",{className:"font-bold text-white",children:new Date().toLocaleDateString(yn(),{day:"numeric",month:"long",year:"numeric"})})]})})]})})}),o.jsx("div",{className:"py-6 px-4 sm:px-6 lg:px-8 max-w-7xl mx-auto",children:o.jsx("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl shadow-2xl p-6 min-h-[calc(100vh-6rem)]",children:l})})]})})]})},O_=({navigate:l})=>{const n=({title:s,children:r})=>o.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:s}),o.jsx("div",{className:"mt-3 text-gray-700 text-sm leading-relaxed",children:r})]});return o.jsxs("div",{className:"max-w-5xl mx-auto",children:[o.jsxs("div",{className:"mb-6",children:[o.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:v("gettingStarted")}),o.jsx("p",{className:"text-gray-600 mt-1",children:v("gettingStartedDesc")})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs(n,{title:v("step1Title"),children:[o.jsx("p",{children:v("step1Desc")}),o.jsxs("div",{className:"mt-3 flex gap-2",children:[o.jsx("button",{className:"px-3 py-1.5 rounded bg-primary text-white",onClick:()=>l("classes"),children:v("classes")}),o.jsx("button",{className:"px-3 py-1.5 rounded bg-gray-200",onClick:()=>l("children"),children:v("children")})]})]}),o.jsx(n,{title:v("step2Title"),children:o.jsx("p",{children:v("step2Desc")})}),o.jsx(n,{title:v("step3Title"),children:o.jsx("p",{children:v("step3Desc")})}),o.jsx(n,{title:v("step4Title"),children:o.jsx("p",{children:v("step4Desc")})}),o.jsxs(n,{title:v("demoDataTip"),children:[o.jsx("p",{children:v("demoDataDesc")}),o.jsx("div",{className:"mt-3",children:o.jsx("button",{className:"px-3 py-1.5 rounded bg-gray-200",onClick:()=>l("settings"),children:v("goToSettings")})})]}),o.jsx(n,{title:v("frequentActions"),children:o.jsxs("ul",{className:"list-disc pl-5 space-y-1",children:[o.jsx("li",{children:v("searchChildTip")}),o.jsx("li",{children:v("exportDataTip")}),o.jsx("li",{children:v("themeTip")})]})})]})]})},ip=l=>{const n=new Date(l),s=new Date;let r=s.getFullYear()-n.getFullYear(),u=s.getMonth()-n.getMonth();return(u<0||u===0&&s.getDate()<n.getDate())&&(r--,u=12+u),`${r} yl, ${u} ay`},D_=l=>new Promise((n,s)=>{const r=new FileReader;r.readAsDataURL(l),r.onload=u=>{var f;const d=new Image;d.src=(f=u.target)==null?void 0:f.result,d.onload=()=>{const m=document.createElement("canvas"),y=800,p=800;let b=d.width,w=d.height;b>w?b>y&&(w*=y/b,b=y):w>p&&(b*=p/w,w=p),m.width=b,m.height=w;const S=m.getContext("2d");if(!S)return s(new Error("Canvas context couldn't be created."));S.drawImage(d,0,0,b,w),m.toBlob(j=>{if(j){const C=new File([j],l.name,{type:"image/jpeg",lastModified:Date.now()});n(C)}else s(new Error("Canvas to Blob conversion failed."))},"image/jpeg",.9)},d.onerror=m=>s(m)},r.onerror=u=>s(u)}),rp=Object.freeze(Object.defineProperty({__proto__:null,calculateAge:ip,processImage:D_},Symbol.toStringTag,{value:"Module"})),R_=({onCapture:l,onClose:n})=>{const s=_.useRef(null),r=_.useRef(null),u=_.useRef(null),[d,f]=_.useState(null),[m,y]=_.useState(null),[p,b]=_.useState(null),[w,S]=_.useState(null),[j,C]=_.useState("user");_.useEffect(()=>(R(),()=>k()),[j]);const R=async()=>{try{b(null),d&&d.getTracks().forEach(P=>P.stop());const Q=await navigator.mediaDevices.getUserMedia({video:{facingMode:j,width:{ideal:1920},height:{ideal:1080}},audio:!1});f(Q),S(!0),s.current&&(s.current.srcObject=Q)}catch(Q){console.error("Kamera eriim hatas:",Q),S(!1),Q.name==="NotAllowedError"?b("Kamera izni verilmedi. Ltfen tarayc ayarlarndan kamera iznini etkinletirin."):Q.name==="NotFoundError"?b("Kamera bulunamad. Ltfen cihaznza kamera balayn."):b("Kamera balatlamad. Ltfen dosyadan ykleme seeneini kullann.")}},k=()=>{d&&(d.getTracks().forEach(Q=>Q.stop()),f(null))},$=()=>{if(!s.current||!r.current)return;const Q=s.current,P=r.current,F=P.getContext("2d");if(!F)return;P.width=Q.videoWidth,P.height=Q.videoHeight,F.drawImage(Q,0,0,P.width,P.height);const O=P.toDataURL("image/jpeg",.9);y(O),k()},B=()=>{y(null),R()},q=()=>{m&&(l(m),n())},T=()=>{C(Q=>Q==="user"?"environment":"user")},Z=Q=>{var O;const P=(O=Q.target.files)==null?void 0:O[0];if(!P)return;if(!P.type.startsWith("image/")){b("Ltfen geerli bir resim dosyas sein.");return}if(P.size>10*1024*1024){b("Dosya boyutu ok byk. Maksimum 10MB olmaldr.");return}const F=new FileReader;F.onload=G=>{var ne;const ie=(ne=G.target)==null?void 0:ne.result;y(ie),k()},F.readAsDataURL(P)};return o.jsx("div",{className:"fixed inset-0 bg-black/90 z-50 flex items-center justify-center p-4",children:o.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full overflow-hidden",children:[o.jsxs("div",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 px-6 py-4 flex items-center justify-between",children:[o.jsxs("h3",{className:"text-xl font-bold text-white flex items-center gap-2",children:[o.jsx(Ji,{className:"h-6 w-6"}),"Fotoraf ek"]}),o.jsx("button",{onClick:n,className:"text-white hover:bg-white/20 p-2 rounded-lg transition-all",children:o.jsx(sp,{className:"h-6 w-6"})})]}),o.jsxs("div",{className:"p-6",children:[p&&o.jsx("div",{className:"mb-4 p-4 bg-red-50 border-2 border-red-200 rounded-lg text-red-700",children:o.jsxs("p",{className:"font-medium",children:[" ",p]})}),o.jsx("div",{className:"relative bg-gray-900 rounded-xl overflow-hidden",style:{aspectRatio:"16/9"},children:m?o.jsx("img",{src:m,alt:"Captured",className:"w-full h-full object-contain"}):o.jsxs(o.Fragment,{children:[o.jsx("video",{ref:s,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-full object-cover"}),o.jsx("canvas",{ref:r,className:"hidden"}),w===!1&&o.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-800",children:o.jsxs("div",{className:"text-center text-white p-6",children:[o.jsx(Ji,{className:"h-16 w-16 mx-auto mb-4 opacity-50"}),o.jsx("p",{className:"text-lg font-medium mb-2",children:"Kamera Eriimi Gerekli"}),o.jsx("p",{className:"text-sm opacity-75",children:"Ltfen dosyadan ykleme yapn"})]})})]})}),o.jsx("div",{className:"mt-6 flex items-center justify-center gap-4",children:m?o.jsxs(o.Fragment,{children:[o.jsxs("button",{onClick:B,className:"flex items-center gap-2 px-6 py-3 bg-gray-200 hover:bg-gray-300 text-gray-800 rounded-lg font-medium transition-all",children:[o.jsx(Kg,{className:"h-5 w-5"}),"Yeniden ek"]}),o.jsxs("button",{onClick:q,className:"flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white rounded-lg font-medium shadow-lg transition-all",children:[o.jsx(h_,{className:"h-5 w-5"}),"Kullan"]})]}):o.jsxs(o.Fragment,{children:[o.jsx("input",{ref:u,type:"file",accept:"image/*",onChange:Z,className:"hidden"}),o.jsxs("button",{onClick:()=>{var Q;return(Q=u.current)==null?void 0:Q.click()},className:"flex items-center gap-2 px-6 py-3 bg-blue-50 hover:bg-blue-100 text-blue-700 border-2 border-blue-200 rounded-lg font-medium transition-all",children:[o.jsx(np,{className:"h-5 w-5"}),"Dosyadan Ykle"]}),w&&o.jsxs(o.Fragment,{children:[o.jsxs("button",{onClick:$,className:"flex items-center gap-2 px-8 py-3 bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 text-white rounded-lg font-medium shadow-lg transition-all transform hover:scale-105",children:[o.jsx(Ji,{className:"h-6 w-6"}),"Fotoraf ek"]}),o.jsx("button",{onClick:T,className:"p-3 bg-gray-200 hover:bg-gray-300 text-gray-800 rounded-lg transition-all",title:"Kameray Deitir",children:o.jsx(Kg,{className:"h-5 w-5"})})]})]})}),o.jsx("div",{className:"mt-6 p-4 bg-gradient-to-r from-blue-50 to-purple-50 border-2 border-blue-200 rounded-lg",children:o.jsxs("p",{className:"text-sm text-gray-700 text-center",children:[" ",o.jsx("strong",{children:"pucu:"}),' Kameranz yoksa veya izin vermediyseniz, "Dosyadan Ykle" butonunu kullanabilirsiniz.']})})]})]})})},lp=({onSave:l,onCancel:n,isSaving:s,initialData:r,formTitle:u})=>{const{user:d}=Qt(),[f,m]=_.useState("basic"),[y,p]=_.useState(""),[b,w]=_.useState(""),[S,j]=_.useState(""),[C,R]=_.useState(""),[k,$]=_.useState([]),[B,q]=_.useState(!1),[T,Z]=_.useState(!1),[Q,P]=_.useState([]),[F,O]=_.useState(""),[G,ie]=_.useState(""),[ne,se]=_.useState(""),[ce,I]=_.useState(""),[M,z]=_.useState(null),[re,X]=_.useState(!1);_.useEffect(()=>{var ue,be,de,oe,Ee;r&&(p(r.first_name||""),w(r.last_name||""),j(r.dob||""),R(r.classroom||""),Z(r.consent_obtained||!1),P(r.guardians||[]),O(((be=(ue=r.health)==null?void 0:ue.allergies)==null?void 0:be.join(", "))||""),ie(((de=r.health)==null?void 0:de.notes)||""),se(((oe=r.interests)==null?void 0:oe.join(", "))||""),I(((Ee=r.strengths)==null?void 0:Ee.join(", "))||""),z(r.photo_url||null))},[r]),_.useEffect(()=>{(async()=>{if(d)try{q(!0);const be=(await Ru(d.id)||[]).map(de=>({name:de.name}));r!=null&&r.classroom&&!be.find(de=>de.name===r.classroom)&&be.push({name:r.classroom}),$(be)}catch{$([])}finally{q(!1)}})()},[d,r]);const me=(ue,be,de)=>{const oe=[...Q],Ee={...oe[ue],[be]:de};Ee.id||(Ee.id=Vs()),oe[ue]=Ee,P(oe)},N=()=>{P([...Q,{id:Vs(),name:"",relation:"",phone:"",email:""}])},K=ue=>{P(Q.filter((be,de)=>de!==ue))},Y=ue=>{var oe;const be=(oe=ue.target.files)==null?void 0:oe[0];if(!be)return;if(!be.type.startsWith("image/")){alert(v("selectValidImage"));return}if(be.size>10*1024*1024){alert(v("fileTooLarge"));return}const de=new FileReader;de.onload=Ee=>{var Be;const De=(Be=Ee.target)==null?void 0:Be.result;z(De)},de.readAsDataURL(be)},te=ue=>{z(ue)},le=()=>{z(null)},xe=ue=>{ue.preventDefault();const be={allergies:F.split(",").map(de=>de.trim()).filter(Boolean),notes:G};if(!C){alert(v("selectClassFirst"));return}l({first_name:y,last_name:b,dob:S,classroom:C,consent_obtained:T,guardians:Q.filter(de=>de.name&&de.relation),health:be,interests:ne.split(",").map(de=>de.trim()).filter(Boolean),strengths:ce.split(",").map(de=>de.trim()).filter(Boolean),photo_url:M||void 0})},je=[{id:"basic",label:v("basicInfo")},{id:"guardians",label:v("guardians")},{id:"health",label:v("healthInfo")},{id:"other",label:v("otherInfo")}];return o.jsxs("div",{className:"p-6 bg-white rounded-lg shadow-lg",children:[o.jsx("h3",{className:"text-xl font-semibold mb-4",children:u}),o.jsx("div",{className:"border-b border-gray-200",children:o.jsx("nav",{className:"-mb-px flex space-x-6 overflow-x-auto",children:je.map(ue=>o.jsx("button",{type:"button",onClick:()=>m(ue.id),className:`whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm ${f===ue.id?"border-primary text-primary":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:ue.label},ue.id))})}),o.jsxs("form",{onSubmit:xe,className:"space-y-6 mt-6",children:[f==="basic"&&o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 border-2 border-blue-200 rounded-xl p-4",children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:[" ",v("profilePhoto")]}),M?o.jsxs("div",{className:"flex items-start gap-4",children:[o.jsx("img",{src:M,alt:"Profil",className:"w-32 h-32 rounded-full object-cover border-4 border-white shadow-lg"}),o.jsxs("div",{className:"flex-1 flex flex-col gap-2",children:[o.jsxs("button",{type:"button",onClick:()=>X(!0),className:"flex items-center justify-center gap-2 px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg font-medium transition-all",children:[o.jsx(Ji,{className:"h-5 w-5"}),v("retakePhoto")]}),o.jsxs("button",{type:"button",onClick:le,className:"flex items-center justify-center gap-2 px-4 py-2 bg-red-500 hover:bg-red-600 text-white rounded-lg font-medium transition-all",children:[o.jsx(N_,{className:"h-5 w-5"}),v("deletePhoto")]})]})]}):o.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[o.jsxs("button",{type:"button",onClick:()=>X(!0),className:"flex items-center justify-center gap-2 px-6 py-3 bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 text-white rounded-lg font-medium shadow-lg transition-all",children:[o.jsx(Ji,{className:"h-5 w-5"}),v("takeWithCamera")]}),o.jsxs("label",{className:"flex items-center justify-center gap-2 px-6 py-3 bg-blue-50 hover:bg-blue-100 text-blue-700 border-2 border-blue-200 rounded-lg font-medium cursor-pointer transition-all",children:[o.jsx(np,{className:"h-5 w-5"}),v("uploadFromFile"),o.jsx("input",{type:"file",accept:"image/*",onChange:Y,className:"hidden"})]})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsx("input",{type:"text",placeholder:v("firstName"),value:y,onChange:ue=>p(ue.target.value),required:!0,className:"p-2 border rounded w-full"}),o.jsx("input",{type:"text",placeholder:v("lastName"),value:b,onChange:ue=>w(ue.target.value),required:!0,className:"p-2 border rounded w-full"})]}),o.jsx("input",{type:"date",placeholder:v("dob"),value:S,onChange:ue=>j(ue.target.value),required:!0,className:"p-2 border rounded w-full"}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:v("classroom")}),o.jsxs("select",{value:C,onChange:ue=>R(ue.target.value),className:"p-2 border rounded w-full",required:!0,children:[o.jsxs("option",{value:"",children:[" ",v("selectClass")," "]}),k.map((ue,be)=>o.jsx("option",{value:ue.name,children:ue.name},be))]}),!B&&k.length===0&&o.jsx("p",{className:"text-xs text-amber-700 mt-1",children:v("createClassFirst")})]}),o.jsxs("div",{className:"flex items-center",children:[o.jsx("input",{type:"checkbox",id:"consent",checked:T,onChange:ue=>Z(ue.target.checked),className:"h-4 w-4 text-primary border-gray-300 rounded"}),o.jsx("label",{htmlFor:"consent",className:"ml-2 block text-sm text-gray-900",children:v("parentalConsent")})]})]}),f==="guardians"&&o.jsxs("div",{className:"space-y-4",children:[Q.map((ue,be)=>o.jsxs("div",{className:"p-3 border rounded-md space-y-2 relative",children:[o.jsx("button",{type:"button",onClick:()=>K(be),className:"absolute top-2 right-2 text-red-500 hover:text-red-700 text-2xl font-bold leading-none",children:""}),o.jsx("input",{type:"text",placeholder:v("guardianName"),value:ue.name,onChange:de=>me(be,"name",de.target.value),className:"p-2 border rounded w-full",required:!0}),o.jsx("input",{type:"text",placeholder:v("guardianRelation"),value:ue.relation,onChange:de=>me(be,"relation",de.target.value),className:"p-2 border rounded w-full",required:!0}),o.jsx("input",{type:"tel",placeholder:v("guardianPhone"),value:ue.phone||"",onChange:de=>me(be,"phone",de.target.value),className:"p-2 border rounded w-full"}),o.jsx("input",{type:"email",placeholder:v("guardianEmail"),value:ue.email||"",onChange:de=>me(be,"email",de.target.value),className:"p-2 border rounded w-full"})]},ue.id)),o.jsx("button",{type:"button",onClick:N,className:"px-4 py-2 text-sm bg-gray-100 rounded hover:bg-gray-200",children:v("addGuardian")})]}),f==="health"&&o.jsxs("div",{className:"space-y-4",children:[o.jsx("textarea",{placeholder:v("allergies"),value:F,onChange:ue=>O(ue.target.value),className:"p-2 border rounded w-full",rows:3}),o.jsx("textarea",{placeholder:v("healthNotes"),value:G,onChange:ue=>ie(ue.target.value),className:"p-2 border rounded w-full",rows:4})]}),f==="other"&&o.jsxs("div",{className:"space-y-4",children:[o.jsx("textarea",{placeholder:v("interests"),value:ne,onChange:ue=>se(ue.target.value),className:"p-2 border rounded w-full",rows:3}),o.jsx("textarea",{placeholder:v("strengths"),value:ce,onChange:ue=>I(ue.target.value),className:"p-2 border rounded w-full",rows:3})]}),o.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[o.jsx("button",{type:"button",onClick:n,disabled:s,className:"px-4 py-2 bg-gray-200 rounded disabled:opacity-50",children:v("cancel")}),o.jsx("button",{type:"submit",disabled:s,className:"px-4 py-2 bg-primary text-white rounded disabled:bg-gray-400",children:v(s?"loading":"save")})]})]}),re&&o.jsx(R_,{onCapture:te,onClose:()=>X(!1)})]})},z_=({navigate:l})=>{const{user:n}=Qt(),[s,r]=_.useState([]),[u,d]=_.useState(!0),[f,m]=_.useState(null),[y,p]=_.useState(!1),[b,w]=_.useState(""),[S,j]=_.useState(!1),[C,R]=_.useState(!1),[k,$]=_.useState(null),[B,q]=_.useState(()=>{try{const G=new URLSearchParams(window.location.hash.split("?")[1]).get("classroom")||void 0;return G===""?void 0:G}catch{return}}),T=_.useCallback(async()=>{if(n)try{d(!0),m(null);const O=await ar(n.id);r(O)}catch(O){O.message.includes('relation "public.children" does not exist')||m(O.message)}finally{d(!1)}},[n]);_.useEffect(()=>(T(),window.addEventListener("datachanged",T),()=>{window.removeEventListener("datachanged",T)}),[T]);const Z=async O=>{if(n){j(!0),m(null);try{const G={first_name:O.first_name||"",last_name:O.last_name||"",dob:O.dob||"",consent_obtained:O.consent_obtained||!1,classroom:O.classroom,guardians:O.guardians,health:O.health,interests:O.interests,strengths:O.strengths,photo_url:O.photo_url};await W0(G,n.id),p(!1)}catch(G){const ne=(se=>se instanceof Error||typeof se=="object"&&se!==null&&"message"in se&&typeof se.message=="string"?se.message:"Bilinmeyen bir hata olutu.")(G);ne.includes("violates row-level security policy")?m("Kaydetme ilemi baarsz. Veritaban gvenlik kurallarnz (RLS) bu ileme izin vermiyor olabilir. Ltfen Supabase projenizdeki 'children' tablosu iin INSERT politikasn doru ekilde ayarladnzdan emin olun."):ne.includes('relation "public.children" does not exist')?m("Kaydetme ilemi baarsz: Veritabannda 'children' tablosu bulunamad. Ltfen size sunulan en son SQL Kurulum Kodunu Supabase SQL Editor'de altrn."):m(`ocuk kaydedilemedi. Hata: ${ne}`)}finally{j(!1)}}},Q=O=>{$(O),R(!0)},P=async()=>{if(k){j(!0),m(null);try{await Xu(k.id),alert(v("childDeleteSuccess"))}catch(O){m(O.message)}finally{j(!1),$(null),R(!1)}}},F=s.filter(O=>{const G=`${O.first_name} ${O.last_name}`.toLowerCase().includes(b.toLowerCase()),ie=B?(O.classroom||"")===B:!0;return G&&ie});return o.jsxs("div",{children:[o.jsxs("div",{className:"flex justify-between items-center mb-6",children:[o.jsx("h1",{className:"text-3xl font-bold text-gradient-purple",children:v("childList")}),o.jsx("button",{onClick:()=>p(!y),className:"px-4 py-2 rounded-lg shadow btn-gradient-primary",children:v(y?"cancel":"addChild")})]}),y&&o.jsx("div",{className:"mb-6",children:o.jsx(lp,{formTitle:v("addChild"),onSave:Z,onCancel:()=>p(!1),isSaving:S})}),f&&o.jsx("p",{className:"text-red-500 my-4 bg-red-100 p-3 rounded-md",children:f}),o.jsxs("div",{className:"mb-4 flex flex-col gap-2",children:[B&&o.jsxs("div",{className:"flex items-center justify-between bg-blue-50 border border-blue-100 text-blue-900 rounded px-3 py-2",children:[o.jsxs("div",{children:["Filtre: Snf = ",o.jsx("strong",{children:B||""})]}),o.jsx("button",{className:"text-sm underline",onClick:()=>{q(void 0),l("children")},children:"Temizle"})]}),o.jsx("input",{type:"text",placeholder:v("searchChild"),value:b,onChange:O=>w(O.target.value),className:"w-full p-2 border border-gray-300 rounded-lg"})]}),u&&o.jsx("p",{children:v("loading")}),!u&&!f&&F.length===0&&o.jsx("div",{className:"text-center py-10 bg-white rounded-lg shadow",children:o.jsx("p",{children:v("noChildrenFound")})}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:F.map((O,G)=>{const ie=["card-colorful-purple","card-colorful-blue","card-colorful-green","card-colorful-pink","card-colorful-orange"],ne=["bg-purple-200 text-purple-700","bg-blue-200 text-blue-700","bg-green-200 text-green-700","bg-pink-200 text-pink-700","bg-orange-200 text-orange-700"];return o.jsxs("div",{className:`bg-white rounded-lg shadow-md p-5 transition-all relative group hover:shadow-xl card-colorful ${ie[G%ie.length]}`,children:[o.jsx("button",{onClick:se=>{se.stopPropagation(),Q(O)},className:"absolute top-2 right-2 p-2 rounded-full bg-gray-100 text-gray-500 opacity-0 group-hover:opacity-100 hover:bg-red-100 hover:text-red-600 transition-opacity z-10","aria-label":`Delete ${O.first_name}`,children:o.jsx(J0,{className:"w-5 h-5"})}),o.jsx("div",{onClick:()=>l("child-detail",{id:O.id}),className:"cursor-pointer",children:o.jsxs("div",{className:"flex items-center space-x-4",children:[O.photo_url?o.jsx("img",{src:O.photo_url,alt:`${O.first_name}`,className:"w-16 h-16 rounded-full object-cover border-2 border-white shadow-md"}):o.jsxs("div",{className:`w-16 h-16 rounded-full flex items-center justify-center text-2xl font-bold shadow-md ${ne[G%ne.length]}`,children:[O.first_name.charAt(0),O.last_name.charAt(0)]}),o.jsxs("div",{children:[o.jsxs("h3",{className:"text-lg font-bold text-gray-900",children:[O.first_name," ",O.last_name]}),o.jsxs("p",{className:"text-sm text-gray-600 font-medium",children:[v("age"),": ",ip(O.dob)]}),O.classroom&&o.jsxs("p",{className:"text-sm text-gray-600 font-medium",children:[v("classroom"),": ",O.classroom]})]})]})})]},O.id)})}),C&&k&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-6 max-w-sm w-full",children:[o.jsx("h3",{className:"text-lg font-bold",children:v("confirmDeleteChildTitle")}),o.jsx("p",{className:"mt-2 text-sm text-gray-600",dangerouslySetInnerHTML:{__html:v("confirmDeleteChildMessage").replace("{childName}",`<strong>${k.first_name} ${k.last_name}</strong>`)}}),o.jsxs("div",{className:"mt-6 flex justify-end space-x-3",children:[o.jsx("button",{onClick:()=>R(!1),disabled:S,className:"px-4 py-2 bg-gray-200 rounded-md",children:v("cancel")}),o.jsx("button",{onClick:P,disabled:S,className:"px-4 py-2 bg-red-600 text-white rounded-md",children:v(S?"deleting":"delete")})]})]})})]})},M_=({navigate:l})=>{const{user:n}=Qt(),[s,r]=_.useState([]),[u,d]=_.useState(!0),[f,m]=_.useState(null),[y,p]=_.useState([]),[b,w]=_.useState(""),[S,j]=_.useState(!1);_.useEffect(()=>{(async()=>{if(n)try{d(!0);const k=await ar(n.id);r(k);try{const $=await Ru(n.id);p($)}catch($){String(($==null?void 0:$.message)||"").includes("'classes'")||m(($==null?void 0:$.message)||v("errorOccurred"))}}catch(k){m((k==null?void 0:k.message)||v("errorOccurred"))}finally{d(!1)}})()},[n]);const C=_.useMemo(()=>{if(y.length>0){const $=new Map;for(const B of s||[]){const q=B.classroom||"";$.set(q,($.get(q)||0)+1)}return y.map(B=>[B.name,$.get(B.name)||0])}const k=new Map;for(const $ of s||[]){const B=$.classroom||"";k.set(B,(k.get(B)||0)+1)}return Array.from(k.entries()).sort(($,B)=>$[0].localeCompare(B[0]))},[s,y]),R=async()=>{if(!(!n||!b.trim()))try{j(!0),await F0(n.id,b.trim()),w("");const k=await Ru(n.id);p(k)}catch(k){m((k==null?void 0:k.message)||v("classAddError"))}finally{j(!1)}};return o.jsxs("div",{className:"max-w-4xl mx-auto px-4",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 mb-6",children:[o.jsxs("h1",{className:"text-2xl font-bold text-gradient-purple",children:[" ",v("classes")]}),o.jsxs("div",{className:"flex flex-wrap items-center gap-2 w-full sm:w-auto",children:[o.jsx("input",{className:"border border-gray-300 rounded-lg px-3 py-2 flex-1 min-w-0 w-full sm:w-64 focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:v("className"),value:b,onChange:k=>w(k.target.value)}),o.jsx("button",{className:"px-4 py-2 rounded-lg disabled:bg-gray-400 whitespace-nowrap btn-gradient-success",onClick:R,disabled:S||!b.trim(),children:v("createClass")}),o.jsx("button",{className:"px-4 py-2 bg-gray-200 hover:bg-gray-300 rounded-lg whitespace-nowrap transition",onClick:()=>l("children"),children:v("allChildren")})]})]}),u&&o.jsx("p",{className:"text-gray-600 font-medium",children:v("loading")}),f&&o.jsx("p",{className:"text-red-600 bg-red-50 p-3 rounded-lg border border-red-200",children:f}),!u&&C.length===0&&o.jsx("p",{className:"text-gray-500 bg-gray-50 p-4 rounded-lg",children:v("noClassFound")}),o.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:C.map(([k,$],B)=>{const q=["card-colorful-purple","card-colorful-blue","card-colorful-green","card-colorful-pink","card-colorful-orange"],T=["text-purple-600","text-blue-600","text-green-600","text-pink-600","text-orange-600"];return o.jsxs("button",{onClick:()=>l("class-detail",{classroom:k===""?"":k}),className:`bg-white rounded-lg shadow p-5 text-left hover:shadow-xl transition-all card-colorful ${q[B%q.length]}`,children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("div",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide",children:v("classroom")}),o.jsx("div",{className:`text-2xl ${T[B%T.length]}`,children:""})]}),o.jsx("div",{className:"text-2xl font-bold text-gray-900 mt-2 truncate",title:k,children:k}),o.jsxs("div",{className:"mt-2 flex items-center gap-1",children:[o.jsx("span",{className:"text-lg font-semibold text-gray-700",children:$}),o.jsx("span",{className:"text-sm text-gray-500",children:v("children").toLowerCase()})]})]},k)})})]})},U_=["turkish","math","science","social","motor_health","art","music"],L_={low:"Dk",medium:"Orta",high:"Yksek"},B_={low:"Low",medium:"Medium",high:"High"},Jg=()=>Ke()==="en"?B_:L_,$_=({classroom:l})=>{const{user:n}=Qt(),[s,r]=_.useState([]),[u,d]=_.useState({turkish:[],math:[],science:[],social:[],motor_health:[],art:[],music:[]}),[f,m]=_.useState({low:[],medium:[],high:[]}),[y,p]=_.useState(null);return _.useEffect(()=>{(async()=>{var b;if(n)try{p(null);const{data:w,error:S}=await ae.from("children").select("id").eq("user_id",n.id).eq("classroom",l);if(S)throw S;const j=(w||[]).map(Z=>Z.id);if(j.length===0){r([]),d({turkish:[],math:[],science:[],social:[],motor_health:[],art:[],music:[]}),m({low:[],medium:[],high:[]});return}const C=new Date;C.setDate(C.getDate()-56);const{data:R}=await ae.from("observations").select("id, created_at, domains, assessments(risk)").eq("user_id",n.id).in("child_id",j).gte("created_at",C.toISOString()),k=[],$=yn();for(let Z=7;Z>=0;Z--){const Q=new Date;Q.setDate(Q.getDate()-Z*7),k.push(new Intl.DateTimeFormat($,{day:"2-digit",month:"short"}).format(Q))}const B=()=>Array(8).fill(0),q={turkish:B(),math:B(),science:B(),social:B(),motor_health:B(),art:B(),music:B()},T={low:B(),medium:B(),high:B()};for(const Z of R||[]){const Q=new Date(Z.created_at),P=Math.floor((Date.now()-Q.getTime())/(1e3*60*60*24)),O=7-Math.min(7,Math.max(0,Math.floor(P/7))),G=Array.isArray(Z.domains)?Z.domains:[];for(const ne of G)q[ne]&&q[ne][O]++;const ie=Array.isArray(Z.assessments)&&((b=Z.assessments[0])!=null&&b.risk)?Z.assessments[0].risk:null;ie&&T[ie]&&T[ie][O]++}r(k),d(q),m(T)}catch(w){p((w==null?void 0:w.message)||"Hata")}})()},[n,l]),n?o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"mt-4 bg-white rounded-lg shadow p-4",children:[o.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-2",children:v("developmentTrend")}),y&&o.jsx("p",{className:"text-red-600 text-sm",children:y}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:U_.map(b=>{const w=u[b]||[],S=Math.max(1,...w);return o.jsxs("div",{className:"border rounded p-2",children:[o.jsx("div",{className:"text-sm text-gray-700 mb-1",children:Et()[b]||b}),o.jsx("div",{className:"flex items-end gap-1 h-16",children:w.map((j,C)=>o.jsx("div",{style:{height:`${Math.max(6,Math.round(j/S*100))}%`},className:"w-3 bg-blue-400 rounded"},C))}),o.jsx("div",{className:"mt-1 flex justify-between text-[10px] text-gray-500",children:s.map((j,C)=>o.jsx("span",{children:j},C))})]},b)})})]}),o.jsxs("div",{className:"mt-4 bg-white rounded-lg shadow p-4",children:[o.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-2",children:"Risk Is Haritas (8 Hafta)"}),o.jsxs("div",{className:"grid grid-cols-9 gap-2 text-xs",children:[o.jsx("div",{className:"text-gray-600"}),s.map((b,w)=>o.jsx("div",{className:"text-gray-500 text-center",children:b},w)),["low","medium","high"].map(b=>{const w=f[b],S=Math.max(1,...w),j=b==="high"?"#ef4444":b==="medium"?"#f59e0b":"#10b981";return o.jsxs($u.Fragment,{children:[o.jsx("div",{className:"text-gray-700",children:Jg()[b]}),w.map((C,R)=>o.jsx("div",{className:"w-6 h-6 rounded-sm",style:{opacity:Math.max(.15,C/S),backgroundColor:j},title:`${Jg()[b]}: ${C}`},R))]},b)})]})]})]}):null};async function q_(l){const{className:n,children:s,obs7d:r,media7d:u,activity:d,aiSummary:f,aiSuggestions:m=[]}=l,y=Math.max(1,...d.map(j=>j.obs+j.media)),p=d.map((j,C)=>{const R=j.obs+j.media,k=Math.round(R/y*88)+8,$=C*20+10,B=100-k;return`<rect x="${$}" y="${B}" width="12" height="${k}" rx="3" fill="#3b82f6"></rect>`}).join(""),b=d.map((j,C)=>`<text x="${C*20+16}" y="112" font-size="8" text-anchor="middle" fill="#64748b">${mn(j.label)}</text>`).join(""),w=`<!DOCTYPE html>
  <html lang="tr"><head><meta charset="utf-8" />
  <title>${mn(n)} - Snf Raporu</title>
  <style>
    body{font-family:Arial,Helvetica,sans-serif;line-height:1.5;color:#0f172a;padding:16px}
    h1{margin:0 0 6px 0}
    .badge{display:inline-block;padding:2px 8px;border-radius:999px;background:#3b82f6;color:#fff;font-size:12px}
    .grid{display:grid;grid-template-columns:repeat(3,1fr);gap:8px}
    .card{border:1px solid #e2e8f0;border-radius:10px;padding:12px;margin:10px 0}
    .muted{color:#64748b}
    table{border-collapse:collapse;width:100%}
    th,td{border:1px solid #e2e8f0;padding:6px;text-align:left}
    .ul{margin:0;padding-left:18px}
  </style></head>
  <body>
    <h1>Snf Raporu <span class="badge">${mn(n)}</span></h1>
    <div class="muted">Oluturma: ${new Date().toLocaleString("tr-TR")}</div>
    <div class="card">
      <div class="grid">
        <div><div class="muted">ocuk</div><div style="font-size:22px;font-weight:700">${s.length}</div></div>
        <div><div class="muted">Son 7 Gn Gzlem</div><div style="font-size:22px;font-weight:700">${r}</div></div>
        <div><div class="muted">Son 7 Gn rn</div><div style="font-size:22px;font-weight:700">${u}</div></div>
      </div>
    </div>
    <div class="card">
      <div class="muted" style="margin-bottom:6px">Aktivite (7 gn)</div>
      <svg width="${d.length*20+20}" height="120" viewBox="0 0 ${d.length*20+20} 120">${p}${b}</svg>
    </div>
    ${f||m.length?`<div class="card"><div style="font-weight:700;margin-bottom:6px">Snf iin Yapay Zek nerileri</div>${f?`<p>${mn(f)}</p>`:""}${m.length?`<ul class="ul">${m.map(j=>`<li>${mn(j)}</li>`).join("")}</ul>`:""}</div>`:""}
    <div class="card">
      <div style="font-weight:700;margin-bottom:6px">ocuklar</div>
      <table><thead><tr><th>Ad Soyad</th><th>Snf</th></tr></thead><tbody>
      ${s.map(j=>`<tr><td>${mn(j.first_name)} ${mn(j.last_name)}</td><td>${mn(j.classroom||"")}</td></tr>`).join("")}
      </tbody></table>
    </div>
    <script>window.addEventListener('load',()=>{setTimeout(()=>{window.print()},300)});<\/script>
  </body></html>`,S=window.open("","_blank");S&&(S.document.open(),S.document.write(w),S.document.close())}function mn(l){return l?l.replace(/[&<>"']/g,n=>({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"})[n]||n):""}const H_=({classroom:l,navigate:n})=>{const{user:s}=Qt(),[r,u]=_.useState([]),[d,f]=_.useState(!0),[m,y]=_.useState(!0),[p,b]=_.useState(null),[w,S]=_.useState(0),[j,C]=_.useState(0),[R,k]=_.useState([]),[$,B]=_.useState([]),[q,T]=_.useState(void 0),[Z,Q]=_.useState(""),[P,F]=_.useState(new Set),[O,G]=_.useState("#3b82f6"),[ie,ne]=_.useState(!1),[se,ce]=_.useState(!1),[I,M]=_.useState(l||""),[z,re]=_.useState(new Map),[X,me]=_.useState(!1),[N,K]=_.useState(""),Y=l||"";_.useEffect(()=>{if(s)try{const oe=localStorage.getItem(`classMeta:${s.id}`),De=(oe?JSON.parse(oe):{})[l]||{};De.color&&G(De.color),typeof De.pinned=="boolean"&&ne(De.pinned)}catch{}},[s,l]);const te=(oe,Ee)=>{if(!s)return;const De=localStorage.getItem(`classMeta:${s.id}`),Be=De?JSON.parse(De):{};Be[oe]={...Be[oe]||{},...Ee},localStorage.setItem(`classMeta:${s.id}`,JSON.stringify(Be))};_.useEffect(()=>{(async()=>{var oe,Ee;if(s)try{f(!0),y(!0);const De=await Ew(s.id,l);u(De),y(!1);const Be=(De||[]).map(qa=>qa.id),Mt=new Date;Mt.setDate(Mt.getDate()-7);const Jt=Mt.toISOString();if(Be.length>0){const[qa,vn,he]=await Promise.all([ae.from("observations").select("id, created_at, child_id, assessments(risk)").eq("user_id",s.id).in("child_id",Be).gte("created_at",Jt),ae.from("media").select("id, created_at, child_id").eq("user_id",s.id).in("child_id",Be).gte("created_at",Jt),ae.from("observations").select("child_id, assessments(risk)").eq("user_id",s.id).in("child_id",Be).order("created_at",{ascending:!1}).limit(100)]),Pe=new Map,pt=he.data||[];for(const Xe of Be){const We=pt.filter(Ue=>Ue.child_id===Xe);if(We.length>0){const Ue=(oe=We[0])==null?void 0:oe.assessments,Xt=Array.isArray(Ue)&&((Ee=Ue[0])==null?void 0:Ee.risk);Pe.set(Xe,Xt||null)}else Pe.set(Xe,null)}re(Pe);const bn=(qa.data||[]).filter(Xe=>{var Xt;const We=Array.isArray(Xe.assessments)&&((Xt=Xe.assessments[0])==null?void 0:Xt.risk);return P.size===0||We&&P.has(We)});S(bn.length);const dt=vn.data||[];C(dt.length||0);const Qs=[];for(let Xe=6;Xe>=0;Xe--){const We=new Date;We.setHours(0,0,0,0),We.setDate(We.getDate()-Xe);const Ue=We.toISOString().slice(0,10),Xt=new Intl.DateTimeFormat("tr-TR",{day:"2-digit",month:"short"}).format(We),xn=(bn||[]).filter(Js=>(Js.created_at||"").slice(0,10)===Ue).length,Kn=(dt||[]).filter(Js=>(Js.created_at||"").slice(0,10)===Ue).length;Qs.push({label:Xt,obs:xn,media:Kn})}k(Qs),qw(s.id,{days:30,maxObservations:60,childIds:Be,risks:Array.from(P)}).then(Xe=>{var We;(We=Xe==null?void 0:Xe.suggestions)!=null&&We.length&&B(Xe.suggestions),Xe!=null&&Xe.summary&&T(Xe.summary)}).catch(()=>{})}else S(0),C(0),k([]),B([]),T(void 0)}catch(De){b((De==null?void 0:De.message)||"Hata")}finally{f(!1)}})()},[s,l,Array.from(P).join(",")]);const le=["#3b82f6","#10b981","#f59e0b","#ef4444","#8b5cf6","#14b8a6","#f97316","#84cc16"],xe=_.useMemo(()=>{const oe=Z.trim().toLocaleLowerCase("tr-TR");return r.filter(Ee=>{const De=`${Ee.first_name} ${Ee.last_name}`.toLocaleLowerCase("tr-TR").includes(oe);if(P.size===0)return De;const Be=z.get(Ee.id),Mt=Be&&P.has(Be);return De&&Mt})},[r,Z,P,z]),je=async()=>{if(!s)return;const oe=I.trim();if(!oe||oe===l){ce(!1);return}await ae.from("children").update({classroom:oe}).eq("user_id",s.id).eq("classroom",l),te(oe,{color:O,pinned:ie}),ce(!1),n("class-detail",{classroom:oe})},ue=()=>{ne(oe=>{const Ee=!oe;return te(l,{pinned:Ee}),Ee})},be=oe=>{G(oe),te(l,{color:oe})},de=async()=>{if(!s)return;const oe=r.length,Ee=oe>0?v("deleteClassConfirmWithChildren").replace("{classroom}",l).replace("{childCount}",oe.toString()):v("deleteClassConfirm").replace("{classroom}",l);if(confirm(Ee)){me(!0),K(v("classDeleting"));try{await Aw(s.id,l,De=>K(De)),ce(!1),n("classes")}catch(De){K("Hata: "+((De==null?void 0:De.message)||"Bilinmeyen hata")),me(!1)}}};return o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("span",{className:"inline-block w-3 h-3 rounded-full",style:{backgroundColor:O}}),o.jsxs("h1",{className:"text-2xl font-bold text-gray-900",children:[v("classLabel")," ",Y]}),ie&&o.jsxs("span",{className:"text-xs text-gray-500",children:["(",v("pinned"),")"]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{className:"px-3 py-2 bg-gray-200 rounded",onClick:()=>ce(!0),children:v("edit")}),o.jsx("button",{className:"px-3 py-2 bg-gray-200 rounded",onClick:()=>q_({className:Y,children:r,obs7d:w,media7d:j,activity:R,aiSummary:q,aiSuggestions:$}),children:v("pdfDownload")}),o.jsx("button",{className:"px-3 py-2 bg-gray-200 rounded",onClick:()=>n("classes"),children:v("backToClasses")})]})]}),p&&o.jsx("p",{className:"text-red-600",children:p}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 mb-6",children:[o.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[o.jsx("div",{className:"text-sm text-gray-500",children:v("childrenList")}),o.jsx("div",{className:"text-3xl font-bold text-gray-900 mt-1",children:r.length})]}),o.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[o.jsx("div",{className:"text-sm text-gray-500",children:v("last7daysObs")}),o.jsx("div",{className:"text-3xl font-bold text-gray-900 mt-1",children:w})]}),o.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[o.jsx("div",{className:"text-sm text-gray-500",children:v("last7daysProducts")}),o.jsx("div",{className:"text-3xl font-bold text-gray-900 mt-1",children:j})]})]}),o.jsx("div",{className:"bg-white rounded-lg shadow p-4 mb-4",children:o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:v("searchChild")}),o.jsx("input",{className:"w-full border rounded px-2 py-1.5",value:Z,onChange:oe=>Q(oe.target.value),placeholder:v("nameSurnamePlaceholder")})]})}),o.jsxs("div",{className:"mt-4",children:[o.jsx("h2",{className:"text-lg font-medium text-gray-900",children:v("childrenList")}),m?o.jsx("p",{children:v("loading")}):xe.length===0?o.jsx("p",{className:"text-gray-500",children:v("noChildInClass")}):o.jsx("div",{className:"mt-3 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:xe.map(oe=>o.jsxs("button",{onClick:()=>n("child-detail",{id:oe.id}),className:"bg-white rounded-lg shadow p-4 text-left hover:shadow-md transition",children:[o.jsxs("div",{className:"font-semibold text-gray-900 truncate",children:[oe.first_name," ",oe.last_name]}),o.jsx("div",{className:"text-xs text-gray-500 truncate",children:oe.classroom||""})]},oe.id))})]}),o.jsx($_,{classroom:l}),o.jsxs("div",{className:"mt-2 bg-white rounded-lg shadow p-4",children:[o.jsx("div",{className:"flex items-center justify-between mb-2",children:o.jsx("h2",{className:"text-lg font-medium text-gray-900",children:v("activity7days")})}),R.length===0?o.jsx("p",{className:"text-gray-500",children:"Veri yok."}):o.jsx("div",{className:"grid grid-cols-7 gap-2 items-end h-28",children:R.map((oe,Ee)=>{const De=Math.max(1,...R.map(Jt=>Jt.obs+Jt.media)),Be=oe.obs+oe.media,Mt=Math.round(Be/De*88)+8;return o.jsxs("div",{className:"flex flex-col items-center",children:[o.jsx("div",{className:"w-6 bg-blue-200 rounded-t",style:{height:`${Mt}px`},title:`${oe.label}: ${oe.obs} gozlem, ${oe.media} urun`}),o.jsx("div",{className:"mt-1 text-xs text-gray-500",children:oe.label})]},Ee)})})]}),o.jsxs("div",{className:"mt-6",children:[o.jsx("h2",{className:"text-lg font-medium text-gray-900",children:v("aiSuggestionsForClass")}),o.jsxs("div",{className:"mt-2 bg-white rounded-lg shadow p-4",children:[q&&o.jsx("p",{className:"text-gray-800 mb-2 whitespace-pre-wrap",children:q}),$.length===0?o.jsx("p",{className:"text-gray-500",children:v("noSuggestionsYet")}):o.jsx("ul",{className:"list-disc list-inside space-y-1 text-gray-800",children:$.map((oe,Ee)=>o.jsx("li",{children:oe},Ee))})]})]}),se&&o.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 flex items-center justify-center p-4",onClick:()=>ce(!1),children:o.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-6 w-full max-w-lg",onClick:oe=>oe.stopPropagation(),children:[o.jsx("h3",{className:"text-lg font-semibold mb-3",children:v("editClassTitle")}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:v("className")}),o.jsx("input",{className:"w-full border rounded px-2 py-1.5",value:I,onChange:oe=>M(oe.target.value)})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-sm text-gray-700 mb-1",children:v("color")}),o.jsx("div",{className:"flex flex-wrap gap-2",children:le.map(oe=>o.jsx("button",{className:`w-6 h-6 rounded-full ring-2 ${O===oe?"ring-black":"ring-transparent"}`,style:{backgroundColor:oe},onClick:()=>be(oe),"aria-label":oe},oe))})]}),o.jsxs("label",{className:"inline-flex items-center gap-2 text-sm",children:[o.jsx("input",{type:"checkbox",checked:ie,onChange:ue}),v("pinClass")]})]}),o.jsxs("div",{className:"mt-5 flex justify-between",children:[o.jsx("button",{className:"px-3 py-2 bg-red-600 text-white rounded hover:bg-red-700 disabled:opacity-50",onClick:de,disabled:X,children:v(X?"deleting":"deleteClass")}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{className:"px-3 py-2 bg-gray-200 rounded",onClick:()=>ce(!1),disabled:X,children:v("cancel")}),o.jsx("button",{className:"px-3 py-2 bg-primary text-white rounded",onClick:je,disabled:X,children:v("save")})]})]}),N&&o.jsx("p",{className:"mt-3 text-sm text-gray-600",children:N})]})})]})};function la(l){return l?String(l).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;"):""}function Xg(l){const n=yn();try{return new Intl.DateTimeFormat(n,{day:"2-digit",month:"long",year:"numeric"}).format(new Date(l))}catch{return""}}function G_(l){const n=yn();try{return new Intl.DateTimeFormat(n,{day:"2-digit",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(new Date(l))}catch{return""}}function Y_(l){if(!l)return"";const n=new Date(l),s=new Date;let r=s.getFullYear()-n.getFullYear(),u=s.getMonth()-n.getMonth();return s.getDate()<n.getDate()&&u--,u<0&&(r--,u+=12),`${r} ${v("pdfYears")}, ${u} ${v("pdfMonths")}`}function V_(l){if(!l)return'<span class="badge muted"></span>';const n=l==="low"?v("priorityLow").replace(/\s*/,""):l==="medium"?v("priorityMedium").replace(/\s*/,""):v("priorityHigh").replace(/\s*/,"");return`<span class="badge ${l}">${n}</span>`}function P_(l){const{child:n,observations:s,media:r=[],teacherName:u,schoolName:d}=l,f=Ke(),m=n.first_name??n.firstName??"",y=n.last_name??n.lastName??"",p=n.dob,b=n.classroom??n.classRoom??"",w=n.photo_url??n.photoUrl,S=[u?`${v("pdfTeacher")}: ${la(u)}`:null,d?`${v("pdfSchool")}: ${la(d)}`:null,`${v("pdfReport")}: ${Xg(new Date().toISOString())}`].filter(Boolean).join("    "),j=w?`<img class="avatar-img" src="${la(w)}" alt="Photo"/>`:`<div class="avatar-fallback">${la(((m==null?void 0:m[0])||"").toUpperCase()+((y==null?void 0:y[0])||"").toUpperCase())}</div>`,C=r.length?`<section class="card">
        <h2 class="sec-title">${v("pdfProductMedia")}</h2>
        <div class="media-grid">
          ${r.map(k=>k!=null&&k.url?`
            <figure class="media-item">
              <img src="${la(k.url)}" alt="media"/>
              ${k.name?`<figcaption>${la(String(k.name))}</figcaption>`:""}
            </figure>
          `:"").join("")}
        </div>
      </section>`:"",R=(s||[]).map(k=>{var Q;const $=k.assessments,B=k.note??"",q=k.created_at,T=(Q=$==null?void 0:$.suggestions)!=null&&Q.length?`<ul class="ul">${$.suggestions.map(P=>`<li>${la(P)}</li>`).join("")}</ul>`:'<div class="muted"></div>',Z=$!=null&&$.summary?`<p>${la($.summary)}</p>`:'<div class="muted"></div>';return`
      <section class="card obs-card">
        <div class="obs-head">
          <div class="obs-title">${v("pdfObservation")}</div>
          <div class="obs-meta">
            <span class="obs-date">${G_(q)}</span>
            ${V_($==null?void 0:$.risk)}
          </div>
        </div>

        <div class="field">
          <div class="field-title">${v("pdfObservationNote")}</div>
          <div class="field-body">${la(B)||""}</div>
        </div>

        <div class="split">
          <div class="split-col">
            <div class="field">
              <div class="field-title">${v("pdfAiSummary")}</div>
              <div class="field-body">${Z}</div>
            </div>
          </div>
          <div class="split-col">
            <div class="field">
              <div class="field-title">${v("pdfSuggestions")}</div>
              <div class="field-body">${T}</div>
            </div>
          </div>
        </div>
      </section>
    `}).join(`
`);return`<!DOCTYPE html>
<html lang="${f}">
<head>
  <meta charset="utf-8" />
  <title>${v("pdfTitle")}</title>
  <style>
    @page { size: A4; margin: 16mm 14mm; }
    :root{
      --text:#0f172a; --muted:#64748b; --border:#e2e8f0; --bg:#ffffff;
      --primary:#2563eb; --chip:#eff6ff; --chipText:#1d4ed8;
      --low:#10b981; --med:#f59e0b; --high:#ef4444;
    }
    html,body{ padding:0; margin:0; background:#fff; }
    body{
      font-family: "Inter","Segoe UI", Roboto, Arial, Helvetica, sans-serif;
      color:var(--text); -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
      line-height:1.5;
    }
    .header{ background:linear-gradient(90deg, var(--primary), #3b82f6); color:#fff; padding:14px 18px; border-radius:10px; margin-bottom:14px; }
    .title{ margin:0; font-size:20px; font-weight:800; letter-spacing:.2px; }
    .subtitle{ margin:4px 0 0 0; font-size:12px; opacity:.95; }

    .card{ background:#fff; border:1px solid var(--border); border-radius:12px; padding:14px 16px; margin:12px 0; }
    .sec-title{ font-size:14px; font-weight:700; margin:0 0 8px 0; }

    .child{ display:flex; gap:14px; align-items:center; }
    .avatar-img,.avatar-fallback{ width:72px;height:72px;border-radius:50%;border:1px solid var(--border);object-fit:cover; display:flex;align-items:center;justify-content:center; }
    .avatar-fallback{ background:#e2e8f0; color:#475569; font-weight:800; font-size:22px; }
    .child-name{ font-size:18px; font-weight:800; margin:0 0 4px 0; }
    .meta{ display:grid; grid-template-columns:auto 1fr; gap:4px 8px; font-size:12px; }
    .label{ color:var(--muted); }
    .chip{ display:inline-block; background:var(--chip); color:var(--chipText); border:1px solid #dbeafe; border-radius:999px; padding:2px 8px; font-size:11px; font-weight:600; }

    .obs-card{ page-break-inside: avoid; }
    .obs-head{ display:flex; justify-content:space-between; align-items:center; border-bottom:1px solid var(--border); padding-bottom:8px; margin-bottom:8px; }
    .obs-title{ font-weight:800; font-size:13px; }
    .obs-meta{ display:flex; gap:8px; align-items:center; }
    .obs-date{ font-size:12px; color:var(--muted); }

    .field{ margin-top:8px; }
    .field-title{ font-size:12px; font-weight:700; margin-bottom:2px; color:#0b1220; }
    .field-body{ font-size:12px; }

    .split{ display:grid; grid-template-columns:1fr 1fr; gap:12px; }
    .split-col{ min-width:0; }

    .ul{ margin:0; padding-left:18px; font-size:12px; }
    .ul li{ margin:2px 0; }

    .badge{ display:inline-block; padding:3px 10px; border-radius:999px; font-size:11px; color:#fff; font-weight:700; }
    .badge.low{ background:var(--low); }
    .badge.medium{ background:var(--med); }
    .badge.high{ background:var(--high); }
    .badge.muted{ background:#94a3b8; }

    .media-grid{ display:grid; grid-template-columns:repeat(3,1fr); gap:10px; }
    .media-item img{ width:100%; height:auto; border:1px solid var(--border); border-radius:8px; }
    .media-item figcaption{ font-size:11px; color:var(--muted); margin-top:3px; }

    @media print { .header{ -webkit-print-color-adjust:exact; print-color-adjust:exact; } }
  </style>
</head>
<body>
  <header class="header">
    <h1 class="title">${v("pdfTitle")}</h1>
    <p class="subtitle">${S}</p>
  </header>

  <section class="card">
    <div class="child">
      ${j}
      <div>
        <div class="child-name">${la(m)} ${la(y)}</div>
        <div class="meta">
          <div class="label">${v("pdfBirth")}:</div><div>${p?Xg(p):""} <span class="chip">${v("pdfAge")}: ${Y_(p)}</span></div>
          <div class="label">${v("pdfClass")}:</div><div>${b?la(b):""}</div>
        </div>
      </div>
    </div>
  </section>

  ${R||`<section class="card"><div class="field-body muted">${v("pdfNoObservations")}</div></section>`}

  ${C}

  <script>
    window.addEventListener('load', () => { setTimeout(() => { try { window.print(); } catch(e){} }, 300); });
    window.addEventListener('afterprint', () => { try { window.close(); } catch(e){} });
  <\/script>
</body>
</html>`}const I_=async(l,n,s=[],r,u)=>{const d=P_({child:l,observations:n,media:s,teacherName:r,schoolName:u}),f=window.open("","_blank");f&&(f.document.open(),f.document.write(d),f.document.close())},K_=({childId:l,userId:n})=>{const[s,r]=_.useState([]),[u,d]=_.useState(!0),[f,m]=_.useState(""),[y,p]=_.useState(!1),[b,w]=_.useState(null),[S,j]=_.useState(""),[C,R]=_.useState(""),[k,$]=_.useState("cognitive"),[B,q]=_.useState("medium"),[T,Z]=_.useState(""),[Q,P]=_.useState("");_.useEffect(()=>{F()},[l]);const F=async()=>{d(!0),m("");try{const z=await Zw(l);r(z)}catch(z){m((z==null?void 0:z.message)||v("goalsLoadError"))}finally{d(!1)}},O=()=>{j(""),R(""),$("cognitive"),q("medium"),Z(""),P(""),w(null),p(!1)},G=async()=>{if(!S.trim()){alert("Ltfen hedef bal girin");return}try{await Fw(l,n,S,k,{description:C,priority:B,target_date:T||void 0,notes:Q}),await F(),O()}catch(z){alert("Hata: "+((z==null?void 0:z.message)||"Hedef eklenemedi"))}},ie=async(z,re)=>{try{const X=re===100?"completed":re>0?"in_progress":"not_started";await Ww(z,{progress:re,status:X}),await F()}catch(X){alert("Hata: "+((X==null?void 0:X.message)||"Hedef gncellenemedi"))}},ne=async z=>{if(confirm("Bu hedefi silmek istediinizden emin misiniz?"))try{await e1(z),await F()}catch(re){alert("Hata: "+((re==null?void 0:re.message)||"Hedef silinemedi"))}},se=z=>{switch(z){case"completed":return"bg-green-100 text-green-800 border-green-300";case"in_progress":return"bg-blue-100 text-blue-800 border-blue-300";case"not_started":return"bg-gray-100 text-gray-800 border-gray-300";case"cancelled":return"bg-red-100 text-red-800 border-red-300"}},ce=z=>{switch(z){case"completed":return` ${v("statusCompleted")}`;case"in_progress":return` ${v("statusInProgress")}`;case"not_started":return` ${v("statusNotStarted")}`;case"cancelled":return` ${v("statusCancelled")}`}},I=z=>{switch(z){case"high":return"bg-red-100 text-red-800";case"medium":return"bg-yellow-100 text-yellow-800";case"low":return"bg-green-100 text-green-800"}},M=z=>{switch(z){case"high":return` ${v("priorityHigh")}`;case"medium":return` ${v("priorityMedium")}`;case"low":return` ${v("priorityLow")}`}};return u?o.jsx("p",{className:"text-gray-600",children:v("goalsLoading")}):f?o.jsx("p",{className:"text-red-600 bg-red-50 p-3 rounded-lg",children:f}):o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("h3",{className:"text-xl font-bold text-gray-900 flex items-center gap-2",children:[" ",v("developmentGoals"),o.jsxs("span",{className:"text-sm font-normal text-gray-500",children:["(",s.length,")"]})]}),o.jsx("button",{onClick:()=>p(!y),className:"px-4 py-2 bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-lg hover:shadow-lg transition-all text-sm font-medium",children:y?` ${v("cancel")}`:` ${v("addGoal")}`})]}),y&&o.jsxs("div",{className:"bg-gradient-to-r from-indigo-50 to-purple-50 p-6 rounded-xl border-2 border-indigo-200 space-y-4 goal-add-form-container",children:[o.jsx("h4",{className:"font-bold text-indigo-900",children:v("addNewGoal")}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:[v("goalTitle")," *"]}),o.jsx("input",{type:"text",value:S,onChange:z=>j(z.target.value),placeholder:v("goalTitlePlaceholder"),className:"w-full px-4 py-2 border-2 border-indigo-200 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 bg-white text-gray-900"})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:[v("developmentArea")," *"]}),o.jsx("select",{value:k,onChange:z=>$(z.target.value),className:"w-full px-4 py-2 border-2 border-indigo-200 rounded-lg focus:ring-2 focus:ring-indigo-500 bg-white text-gray-900",children:Object.entries(Et()).map(([z,re])=>o.jsx("option",{value:z,children:re},z))})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:[v("priority")," *"]}),o.jsxs("select",{value:B,onChange:z=>q(z.target.value),className:"w-full px-4 py-2 border-2 border-indigo-200 rounded-lg focus:ring-2 focus:ring-indigo-500 bg-white text-gray-900",children:[o.jsxs("option",{value:"low",children:[" ",v("priorityLow")]}),o.jsxs("option",{value:"medium",children:[" ",v("priorityMedium")]}),o.jsxs("option",{value:"high",children:[" ",v("priorityHigh")]})]})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:v("targetDate")}),o.jsx("input",{type:"date",value:T,onChange:z=>Z(z.target.value),className:"w-full px-4 py-2 border-2 border-indigo-200 rounded-lg focus:ring-2 focus:ring-indigo-500 bg-white text-gray-900"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:v("descriptionLabel")}),o.jsx("textarea",{value:C,onChange:z=>R(z.target.value),placeholder:v("descriptionPlaceholder"),rows:3,className:"w-full px-4 py-2 border-2 border-indigo-200 rounded-lg focus:ring-2 focus:ring-indigo-500 bg-white text-gray-900"})]}),o.jsxs("div",{className:"flex gap-3",children:[o.jsxs("button",{onClick:G,className:"flex-1 px-4 py-2 bg-gradient-to-r from-green-600 to-emerald-600 text-white rounded-lg hover:shadow-lg transition-all font-medium",children:[" ",v("save")]}),o.jsx("button",{onClick:O,className:"px-4 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 transition-all",children:v("cancel")})]})]}),s.length===0?o.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-xl border-2 border-dashed border-gray-300",children:[o.jsx("span",{className:"text-6xl mb-4 block",children:""}),o.jsx("p",{className:"text-gray-600 font-medium",children:v("noGoalsYet")}),o.jsx("p",{className:"text-sm text-gray-500 mt-1",children:v("addGoalHint")})]}):o.jsx("div",{className:"grid grid-cols-1 gap-4",children:s.map(z=>o.jsxs("div",{className:"bg-white rounded-xl shadow-md border-2 border-gray-200 p-5 hover:shadow-xl transition-all goal-item-card",children:[o.jsxs("div",{className:"flex items-start justify-between mb-3",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("h4",{className:"text-lg font-bold text-gray-900 mb-1",children:z.title}),z.description&&o.jsx("p",{className:"text-sm text-gray-600 mb-2",children:z.description}),o.jsxs("div",{className:"flex flex-wrap gap-2 mb-3",children:[o.jsx("span",{className:`text-xs px-3 py-1 rounded-full font-semibold border ${se(z.status)}`,children:ce(z.status)}),o.jsx("span",{className:`text-xs px-3 py-1 rounded-full font-semibold ${I(z.priority)}`,children:M(z.priority)}),o.jsxs("span",{className:"text-xs px-3 py-1 rounded-full font-semibold bg-purple-100 text-purple-800",children:[" ",Et()[z.domain]]}),z.target_date&&o.jsxs("span",{className:"text-xs px-3 py-1 rounded-full font-semibold bg-blue-100 text-blue-800",children:[" ",new Date(z.target_date).toLocaleDateString(yn())]})]})]}),o.jsx("button",{onClick:()=>ne(z.id),className:"text-red-600 hover:text-red-800 hover:bg-red-50 rounded-lg p-2 transition-all",title:"Sil",children:""})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex items-center justify-between text-sm",children:[o.jsx("span",{className:"font-semibold text-gray-700",children:"lerleme:"}),o.jsxs("span",{className:"font-bold text-indigo-600",children:[z.progress,"%"]})]}),o.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3 overflow-hidden",children:o.jsx("div",{className:"h-full bg-gradient-to-r from-indigo-600 to-purple-600 transition-all duration-300",style:{width:`${z.progress}%`}})}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:()=>ie(z.id,Math.max(0,z.progress-10)),className:"flex-1 px-3 py-1 bg-gray-200 hover:bg-gray-300 rounded-lg text-sm font-medium transition-all text-gray-800",children:"-10%"}),o.jsx("button",{onClick:()=>ie(z.id,Math.min(100,z.progress+10)),className:"flex-1 px-3 py-1 bg-indigo-100 hover:bg-indigo-200 text-indigo-700 rounded-lg text-sm font-medium transition-all",children:"+10%"}),o.jsx("button",{onClick:()=>ie(z.id,100),className:"flex-1 px-3 py-1 bg-green-600 hover:bg-green-700 text-white rounded-lg text-sm font-medium transition-all",children:" Tamamla"})]})]}),z.notes&&o.jsx("div",{className:"mt-3 pt-3 border-t border-gray-200",children:o.jsxs("p",{className:"text-xs text-gray-600",children:[o.jsx("span",{className:"font-semibold",children:"Not:"})," ",z.notes]})})]},z.id))})]})},Q_=(l,n)=>{if(l)try{const s=((n||"")+" "+((l==null?void 0:l.summary)||"")).toLowerCase(),r=["basar","heves","bagimsiz","dogru","katilim","katildi","surdur","ilerle","artti","uzun sure","dengede","yerine yerlestirdi","sakin","tamamladi"],u=["kavga","vur","isir","firlat","kendine zarar","siddet","yaral"],d=["zorlan","yardim","hatirlatma","sinirli","kacin","tereddut","uyari","desteg","zorluk","mudahale","huzursuz","odaklanamad","dikkati dagild","kurala uymadi"];if(u.some(p=>s.includes(p)))return"high";if(r.some(p=>s.includes(p)))return"low";if(d.filter(p=>s.includes(p)).length>=3)return"medium";const m=(l==null?void 0:l.domain_scores)||{},y=Object.keys(m||{});if(y.length){const p=y.map(b=>Number(m[b])||0).reduce((b,w)=>b+w,0)/y.length;return p>=2.7?"low":p>=2.2?"medium":"high"}return(l==null?void 0:l.risk)||"low"}catch{return(l==null?void 0:l.risk)||void 0}},op=l=>{if(!l)return"";const n=new Date(l),s=new Date;let r=s.getFullYear()-n.getFullYear(),u=s.getMonth()-n.getMonth();return s.getDate()<n.getDate()&&u--,u<0&&(r--,u+=12),Ke()==="tr"?`${r} yl, ${u} ay`:`${r} yr, ${u} mo`},Mu=l=>{if(!l)return"";try{return new Intl.DateTimeFormat(yn(),{day:"2-digit",month:"long",year:"numeric"}).format(new Date(l))}catch{return""}},J_=l=>o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",...l,children:o.jsx("path",{d:"M12 5a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H6a1 1 0 110-2h5V6a1 1 0 011-1z"})}),X_=l=>o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",...l,children:o.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm.75-11.25a.75.75 0 00-1.5 0v4.59L7.3 9.7a.75.75 0 00-1.1 1.02l3.25 3.5a.75.75 0 001.1 0l3.25-3.5a.75.75 0 10-1.1-1.02l-1.95 2.1V6.75z",clipRule:"evenodd"})}),Z_=l=>o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",...l,children:[o.jsx("path",{d:"M17.414 2.586a2 2 0 00-2.828 0L7 10.172V13h2.828l7.586-7.586a2 2 0 000-2.828z"}),o.jsx("path",{fillRule:"evenodd",d:"M2 6a2 2 0 012-2h4a1 1 0 010 2H4v10h10v-4a1 1 0 112 0v4a2 2 0 01-2 2H4a2 2 0 01-2-2V6z",clipRule:"evenodd"})]}),F_=({photoUrl:l,firstName:n,lastName:s,className:r="w-24 h-24"})=>{const u=`${(n==null?void 0:n.charAt(0))??""}${(s==null?void 0:s.charAt(0))??""}`.toUpperCase();return o.jsx("div",{className:`flex-shrink-0 rounded-full bg-gray-200 flex items-center justify-center overflow-hidden ${r}`,children:l?o.jsx("img",{src:l,alt:`${n} ${s}`,className:"w-full h-full object-cover"}):o.jsx("span",{className:"text-4xl font-bold text-gray-600",children:u})})},pu=({children:l,className:n})=>o.jsx("span",{className:`inline-flex items-center rounded-md px-2.5 py-1 text-xs font-semibold ring-1 ring-inset ${n}`,children:l}),yu=({label:l,value:n,onClick:s})=>o.jsxs("div",{role:s?"button":void 0,tabIndex:s?0:void 0,onClick:s,onKeyDown:r=>{s&&(r.key==="Enter"||r.key===" ")&&(r.preventDefault(),s())},className:`flex-1 rounded-lg bg-gray-50 px-4 py-3 text-center ${s?"cursor-pointer hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-primary/60 ring-1 ring-transparent transition":""}`,children:[o.jsx("p",{className:"text-sm font-medium text-gray-500",children:l}),o.jsx("p",{className:"mt-1 text-2xl font-semibold text-gray-900",children:n})]}),Ls=({title:l,children:n,className:s,onEdit:r})=>o.jsxs("div",{className:`bg-white rounded-lg shadow p-6 group ${s}`,children:[o.jsxs("div",{className:"flex justify-between items-center border-b pb-3 mb-4",children:[o.jsx("h3",{className:"text-lg font-bold text-gray-900",children:l}),r&&o.jsx("button",{onClick:r,"aria-label":`${l} blmn {t('edit')}`,className:"text-gray-400 hover:text-primary p-1 rounded-full opacity-0 group-hover:opacity-100 transition-opacity",children:o.jsx(Z_,{className:"w-5 h-5"})})]}),n]}),Vi=({label:l,value:n})=>o.jsxs("div",{className:"flex justify-between py-2 border-b border-gray-100",children:[o.jsx("dt",{className:"text-sm font-medium text-gray-500",children:l}),o.jsx("dd",{className:"text-sm text-gray-900 text-right",children:n||""})]}),vu=({tags:l})=>!l||l.length===0?o.jsx("p",{className:"text-sm text-gray-500 italic",children:v("notAddedYet")}):o.jsx("div",{className:"flex flex-wrap gap-2",children:l.map((n,s)=>o.jsx("span",{className:"rounded-full bg-primary/10 px-3 py-1 text-sm font-medium text-primary",children:n},s))}),W_=({guardian:l})=>o.jsxs("div",{className:"rounded-md border p-3",children:[o.jsxs("p",{className:"font-semibold text-gray-800",children:[l.name," ",o.jsxs("span",{className:"text-sm font-normal text-gray-500",children:["(",l.relation,")"]})]}),l.phone&&o.jsx("a",{href:`tel:${l.phone}`,className:"text-sm text-primary hover:underline block mt-1",children:l.phone}),l.email&&o.jsx("a",{href:`mailto:${l.email}`,className:"text-sm text-primary hover:underline block",children:l.email})]}),eS=({data:l,onAddObservation:n,onExportPdf:s,onEdit:r,onChangePhoto:u,onRefreshInsights:d,onOpenMedia:f,onOpenObservations:m})=>{var y,p;return o.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[o.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:o.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-6",children:[o.jsxs("div",{className:"relative",children:[o.jsx(F_,{photoUrl:l.photoUrl,firstName:l.firstName,lastName:l.lastName}),o.jsxs("label",{className:"absolute -bottom-2 right-0 bg-gray-900 border border-gray-700 rounded-md px-2 py-1 text-xs shadow cursor-pointer hover:bg-gray-800 text-white transition-colors",children:[v("changePhoto"),o.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:b=>{b.target.files&&b.target.files[0]&&u(b.target.files[0])}})]})]}),o.jsxs("div",{className:"flex-grow text-center sm:text-left",children:[o.jsxs("h1",{className:"text-3xl md:text-4xl font-bold text-gray-900",children:[l.firstName," ",l.lastName]}),o.jsxs("div",{className:"mt-3 flex flex-wrap justify-center sm:justify-start gap-2",children:[o.jsx(pu,{className:"bg-gray-100 text-gray-700 ring-gray-600/20",children:op(l.dob)}),l.classroom&&o.jsxs(pu,{className:"bg-gray-100 text-gray-700 ring-gray-600/20",children:[v("classroom"),": ",l.classroom]}),o.jsxs(pu,{className:"bg-gray-100 text-gray-700 ring-gray-600/20",children:[v("parentalConsent"),": ",l.consentObtained?v("consentYes"):v("consentPending")]})]})]}),o.jsxs("div",{className:"flex-shrink-0 flex flex-col sm:items-end gap-2 w-full sm:w-auto",children:[o.jsxs("div",{className:"flex gap-2 w-full sm:w-auto",children:[o.jsxs("button",{onClick:()=>n(l.id),className:"w-full sm:w-auto flex items-center justify-center gap-2 px-4 py-2 bg-primary text-white rounded-md shadow-sm hover:bg-primary/90 transition-colors",children:[o.jsx(J_,{className:"w-5 h-5"})," ",v("addObservation")]}),o.jsx("button",{onClick:()=>f&&f(),className:"w-full sm:w-auto flex items-center justify-center gap-2 px-4 py-2 bg-primary text-white rounded-md shadow-sm hover:bg-primary/90 transition-colors",children:v("products")})]}),o.jsxs("div",{className:"flex gap-2 w-full sm:w-auto",children:[o.jsx("button",{onClick:()=>s(l.id),title:"PDF indir","aria-label":"Raporu PDF olarak da aktar",className:"flex-1 sm:flex-auto px-3 py-2 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300 transition-colors",children:o.jsx(X_,{className:"w-5 h-5 mx-auto"})}),o.jsx("button",{onClick:r,"aria-label":"ocuk profilini {t('edit')}",className:"flex-1 sm:flex-auto px-3 py-2 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300 transition-colors",children:v("edit")}),o.jsx("button",{onClick:d,"aria-label":"Yapay Zeka analizini yenile",className:"flex-1 sm:flex-auto px-3 py-2 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300 transition-colors",children:v("refresh")})]})]})]})}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 mb-2 px-4 sm:px-0",children:[o.jsx(yu,{label:v("totalObservations"),value:((y=l.stats)==null?void 0:y.observations)??"",onClick:()=>m&&m()}),o.jsx(yu,{label:v("mediaCount"),value:((p=l.stats)==null?void 0:p.products)??"",onClick:()=>f&&f()}),o.jsx(yu,{label:v("lastObservation"),value:Mu(l.lastObservationAt)})]}),o.jsx("div",{className:"h-4 bg-gradient-to-b from-gray-100 to-transparent rounded-b-lg mb-6"})]})},tS=({childId:l,navigate:n})=>{var P,F;const{user:s}=Qt(),[r,u]=_.useState(null),[d,f]=_.useState(null),[m,y]=_.useState(!0),[p,b]=_.useState(null),[w,S]=_.useState(!1),[j,C]=_.useState(!1),[R,k]=_.useState(!1),$=O=>O instanceof Error?O.message:"Bilinmeyen bir hata olutu.",B=_.useCallback(async()=>{if(s)try{y(!0),b(null);const{data:O,error:G}=await ae.from("children").select("*").eq("id",l).single();if(G||!O)throw G||new Error(v("childNotFound"));f(O);const ie=await Al(l),ne=await zl(l),se=ie.map(de=>({a:de.assessments,note:de.note})).filter(de=>de.a),ce=se.map(de=>Q_(de.a,de.note)||"low"),I={low:0,medium:0,high:0};ce.forEach(de=>{I[de]=(I[de]||0)+1});let M="low";I.medium>=I.low&&I.medium>=I.high?M="medium":I.low>=I.medium&&I.low>=I.high?M="low":M="high";const z=ie.length>0?ie[0]:null,re=Array.from(new Set((se||[]).flatMap(de=>{var oe;return Array.isArray((oe=de==null?void 0:de.a)==null?void 0:oe.suggestions)?de.a.suggestions.filter(Ee=>typeof Ee=="string"&&Ee.trim()):[]}))).slice(0,8),X=ie.length,me={cognitive:"math",language:"turkish",social_emotional:"social",fine_motor:"motor_health",gross_motor:"motor_health",self_care:"motor_health",turkish:"turkish",math:"math",science:"science",social:"social",motor_health:"motor_health",art:"art",music:"music"},N={};for(const de of ie){const oe=Array.isArray(de==null?void 0:de.domains)?de.domains:[];for(const Ee of oe){const De=me[Ee]||Ee;N[De]=(N[De]||0)+1}}const K=Object.entries(N).sort((de,oe)=>oe[1]-de[1]).slice(0,2).map(([de])=>Et()[de]||de),Y=I.low,te=I.medium,le=I.high,xe=Ke()==="en"?le>0?"signals indicate additional support needed in certain skill areas":te>0?"there are areas to monitor during development":"skill acquisition is progressing as expected":le>0?"belirli beceri alanlarnda ek destek ihtiyac sinyalleri mevcut":te>0?"geliim srecinde izlenmesi gereken alanlar var":"beceri edinimi beklenen seyrinde ilerliyor",je=Ke()==="en"?K.length>0?`observations are primarily focused on **${K.join("** and **")}**`:"observation areas show a balanced distribution":K.length>0?`yaplan gzlemler arlkl olarak **${K.join("** ve **")}** zerine younlamtr`:"gzlem alanlar dengeli bir dalm gstermektedir",ue=Ke()==="en"?`GENERAL STATUS: Based on the last ${X} observation data, ${je}. PROGRESS ANALYSIS: ${xe}.`:`GENEL DURUM: Son ${X} gzlem verisine gre, ${je}. SRE ANALZ: ${xe}.`,be={id:O.id,firstName:O.first_name,lastName:O.last_name,dob:O.dob,classroom:O.classroom,photoUrl:O.photo_url,consentObtained:O.consent_obtained,enrolledAt:O.created_at,lastObservationAt:z==null?void 0:z.created_at,stats:{observations:ie.length,products:ne.length,risk:M},guardians:O.guardians||[],health:O.health||{allergies:[],notes:""},interests:O.interests||[],strengths:O.strengths||[],aiInsights:re,aiSummary:ue};u(be)}catch(O){b($(O))}finally{y(!1)}},[l,s]);_.useEffect(()=>(B(),window.addEventListener("datachanged",B),()=>window.removeEventListener("datachanged",B)),[B]);const q=async O=>{var G,ie,ne;try{let se=null;if(d&&d.id===O)se=d;else{const{data:z,error:re}=await ae.from("children").select("*").eq("id",O).single();if(re||!z)throw re||new Error(v("childNotFound"));se=z}const ce=await Al(O),I=await zl(O),M=await Promise.all((I||[]).map(async z=>{try{const re=await Wu(z.storage_path,3600);return{...z,url:re}}catch{return z}}));await I_(se,ce,M,`${((G=s==null?void 0:s.user_metadata)==null?void 0:G.first_name)??""} ${((ie=s==null?void 0:s.user_metadata)==null?void 0:ie.last_name)??""}`.trim(),((ne=s==null?void 0:s.user_metadata)==null?void 0:ne.school_name)??"")}catch(se){console.error(se),alert((se==null?void 0:se.message)||v("errorOccurred"))}},T=async O=>{if(!(!d||!s))try{C(!0);const G=await Cw(s.id,d.id,O);await zu(d.id,{photo_url:G})}catch(G){console.error(G),alert(v("errorOccurred"))}finally{C(!1)}},Z=async()=>{if(s)try{k(!0);const ie=(await Al(l)).filter(se=>!se.dirty).filter(se=>se.assessments?String(se.assessments.summary||"").startsWith("Bu, yapay zeka servisi"):!0),ne=new Set;for(const se of ie)try{const ce=await Fu(se.note,se.domains);if(Array.isArray(ce.suggestions))for(const I of ce.suggestions)typeof I=="string"&&I.trim()&&ne.add(I.trim());await $l(se.id,s.id,{summary:ce.summary,risk:ce.risk,suggestions:ce.suggestions||[],domain_scores:ce.domain_scores})}catch(ce){console.error("AI recompute failed for observation",se.id,ce)}ne.size>0&&r&&u({...r,aiInsights:Array.from(ne).slice(0,5)}),await B()}finally{k(!1)}},Q=async O=>{if(d){C(!0),b(null);try{await zu(d.id,O),S(!1)}catch(G){b($(G))}finally{C(!1)}}};return m?o.jsx("p",{children:v("loading")}):p?o.jsx("p",{className:"text-red-500 my-4 bg-red-100 p-3 rounded-md",children:p}):r?o.jsxs(o.Fragment,{children:[o.jsx(eS,{data:r,onAddObservation:()=>n("add-observation",{childId:l}),onExportPdf:q,onEdit:()=>S(!0),onChangePhoto:T,onRefreshInsights:Z,onOpenMedia:()=>n("media",{childId:l}),onOpenObservations:()=>n("child-observations",{childId:l})}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6",children:[o.jsxs("div",{className:"lg:col-span-5 flex flex-col gap-6",children:[o.jsxs(Ls,{title:v("basicInfo"),onEdit:()=>S(!0),children:[o.jsx(Vi,{label:v("nameSurname"),value:`${r.firstName} ${r.lastName}`}),o.jsx(Vi,{label:v("dob"),value:Mu(r.dob)}),o.jsx(Vi,{label:v("age"),value:op(r.dob)}),o.jsx(Vi,{label:v("classroom"),value:r.classroom||""}),o.jsx(Vi,{label:v("enrollmentDate"),value:Mu(r.enrolledAt)})]}),o.jsx(Ls,{title:v("interestsSection"),children:o.jsx(vu,{tags:r.interests})}),o.jsx(Ls,{title:v("strengthsSection"),children:o.jsx(vu,{tags:r.strengths})})]}),o.jsxs("div",{className:"lg:col-span-7 flex flex-col gap-6",children:[o.jsx(Ls,{title:v("guardiansSection"),children:r.guardians&&r.guardians.length>0?o.jsx("div",{className:"space-y-3",children:r.guardians.map((O,G)=>o.jsx(W_,{guardian:O},G))}):o.jsx("p",{className:"text-sm text-gray-500 italic",children:v("noGuardiansAdded")})}),o.jsxs(Ls,{title:v("healthInfo"),children:[o.jsxs("div",{children:[o.jsx("h4",{className:"font-semibold text-gray-700",children:v("allergies")}),o.jsx(vu,{tags:((P=r.health)==null?void 0:P.allergies)||[]})]}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-semibold text-gray-700",children:v("importantNotes")}),o.jsx("p",{className:"text-sm text-gray-600 mt-1",children:((F=r.health)==null?void 0:F.notes)||""})]})]}),o.jsxs(Ls,{title:v("aiInsights"),children:[r.aiSummary&&o.jsx("div",{className:"mb-4 p-3 bg-indigo-50 border border-indigo-100 rounded-md shadow-sm ai-summary-container",children:o.jsx("p",{className:"text-sm text-indigo-900 leading-relaxed font-medium",children:r.aiSummary})}),r.aiInsights&&r.aiInsights.length>0?o.jsx("ul",{className:"list-disc list-inside space-y-2 text-sm text-gray-700",children:r.aiInsights.map((O,G)=>o.jsx("li",{children:O},G))}):o.jsx("p",{className:"text-sm text-gray-500 italic",children:"Analiz edilecek yeterli gzlem yok."})]})]})]}),o.jsx("div",{className:"mt-8",children:o.jsx(K_,{childId:l,userId:(s==null?void 0:s.id)||""})}),w&&o.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 flex items-center justify-center p-4",onClick:()=>S(!1),children:o.jsx("div",{className:"w-full max-w-2xl max-h-[90vh] overflow-y-auto",onClick:O=>O.stopPropagation(),children:o.jsx(lp,{formTitle:v("editChild"),initialData:d,isSaving:j,onSave:Q,onCancel:()=>S(!1)})})})]}):o.jsx("p",{children:v("childNotFound")})},Zg=({childId:l,navigate:n,observationToEdit:s})=>{const{user:r}=Qt(),[u,d]=_.useState(""),[f,m]=_.useState([]),[y,p]=_.useState("classroom"),[b,w]=_.useState(""),[S,j]=_.useState(!1),[C,R]=_.useState(null),k=!!s;_.useEffect(()=>{k&&s&&(d(s.note),m(s.domains),p(s.context||"classroom"),w((s.tags||[]).join(", ")))},[k,s]);const $=q=>{m(T=>T.includes(q)?T.filter(Z=>Z!==q):[...T,q])},B=async q=>{if(q.preventDefault(),!r||!u){alert(v("errorOccurred"));return}if(f.length===0){alert(v("domainsRequired")||"Ltfen en az bir geliim alan sein.");return}j(!0);const T={child_id:l,note:u,domains:f,context:y,tags:b.split(",").map(Z=>Z.trim()).filter(Boolean)};try{if(k&&s)await Yg(s.id,T);else{const Z=await tp(T,r.id);navigator.onLine&&Z&&Z.id&&(async()=>{try{if(C)try{const{mediaId:P}=await ap(l,C,{name:`Observation Photo - ${new Date().toISOString().split("T")[0]}`,description:"Gzlem ekli fotoraf",domain:f[0]});P&&await Yg(Z.id,{media_ids:[P]})}catch(P){console.error("Attachment upload failed (background):",P)}const Q=await Fu(u,f);await $l(Z.id,r.id,{summary:Q.summary,risk:Q.risk,suggestions:Q.suggestions,domain_scores:Q.domain_scores}),console.log("AI analysis saved in background")}catch(Q){console.error("AI analysis failed (background):",Q)}})()}n("child-detail",{id:l})}catch(Z){console.error(Z),alert(v("errorOccurred"))}finally{j(!1)}};return o.jsxs("div",{className:"max-w-2xl mx-auto",children:[o.jsx("h1",{className:"text-2xl font-bold mb-4",children:v(k?"editObservation":"addObservation")}),o.jsxs("form",{onSubmit:B,className:"p-6 bg-white rounded-lg shadow space-y-6",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"note",className:"block text-sm font-medium text-gray-700",children:v("observationNote")}),o.jsx("textarea",{id:"note",rows:6,value:u,onChange:q=>d(q.target.value),className:"mt-1 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md",placeholder:v("notePlaceholder"),required:!0})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-sm font-medium text-gray-700",children:v("developmentDomains")}),o.jsx("p",{className:"text-xs text-gray-500 mb-2",children:v("selectDomains")}),o.jsx("div",{className:"flex flex-wrap gap-2",children:Object.keys(Et()).map(q=>{const T=q,Z=f.includes(T);return o.jsx("button",{type:"button",onClick:()=>$(T),className:`px-3 py-1.5 text-sm rounded-full border ${Z?"bg-primary text-white border-primary":"bg-white text-gray-700"}`,children:Et()[T]},T)})})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"attach",className:"block text-sm font-medium text-gray-700",children:v("attachPhotoOptional")}),o.jsx("input",{id:"attach",type:"file",accept:"image/*",onChange:q=>{var T;return R(((T=q.target.files)==null?void 0:T[0])||null)},className:"mt-1 block w-full text-sm"})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"context",className:"block text-sm font-medium text-gray-700",children:v("context")}),o.jsx("select",{id:"context",value:y,onChange:q=>p(q.target.value),className:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary focus:border-primary sm:text-sm rounded-md",children:Object.keys(Ug()).map(q=>o.jsx("option",{value:q,children:Ug()[q]},q))})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"tags",className:"block text-sm font-medium text-gray-700",children:v("tags")}),o.jsx("input",{type:"text",id:"tags",value:b,onChange:q=>w(q.target.value),className:"mt-1 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md",placeholder:v("tagsPlaceholder")})]}),o.jsxs("div",{className:"flex justify-end gap-4",children:[o.jsx("button",{type:"button",onClick:()=>n("child-detail",{id:l}),className:"px-4 py-2 bg-gray-200 rounded-md",children:v("cancel")}),o.jsx("button",{type:"submit",disabled:S||f.length===0,className:"px-4 py-2 bg-primary text-white rounded-md disabled:bg-gray-400",children:v(S?"loading":"save")})]})]})]})},aS=3,cp=async()=>{var d;if(!Ks())return console.log("nternet balants yok, senkronizasyon iptal edildi"),{success:0,failed:0};const l=await ae.auth.getSession(),n=(d=l==null?void 0:l.data.session)==null?void 0:d.user.id;if(!n)return console.error("Kullanc giri yapmam, senkronize edilemiyor."),{success:0,failed:0};const s=tr();if(s.length===0)return{success:0,failed:0};let r=0,u=0;for(const f of s)try{await nS(f,n),Hg(f.id),r++}catch(m){console.error("Queue item senkronize edilemedi:",f,m),jw(f.id),f.retryCount>=aS&&(console.warn("Max retry count ald, item siliniyor:",f),Hg(f.id)),u++}return r>0&&gt(),{success:r,failed:u}},nS=async(l,n)=>{const{type:s,action:r,data:u}=l;switch(s){case"observation":await sS(r,u,n);break;case"attendance":await iS(r,u,n);break;case"goal":await rS(r,u,n);break;case"child_update":await lS(r,u);break;case"goal_update":await oS(r,u);break;default:throw new Error(`Bilinmeyen queue type: ${s}`)}},sS=async(l,n,s)=>{if(l==="create"){const{id:r,created_at:u,dirty:d,media_files:f,...m}=n;await ae.from("observations").insert({...m,user_id:s})}else if(l==="update"){const{id:r,...u}=n;await ae.from("observations").update(u).eq("id",r)}else l==="delete"&&await ae.from("observations").delete().eq("id",n.id)},iS=async(l,n,s)=>{if(l==="create")await ae.from("attendance").insert({...n,user_id:s});else if(l==="update"){const{id:r,...u}=n;await ae.from("attendance").update(u).eq("id",r)}else l==="delete"&&await ae.from("attendance").delete().eq("id",n.id)},rS=async(l,n,s)=>{if(l==="create")await ae.from("goals").insert({...n,user_id:s});else if(l==="update"){const{id:r,...u}=n;await ae.from("goals").update(u).eq("id",r)}else l==="delete"&&await ae.from("goals").delete().eq("id",n.id)},lS=async(l,n,s)=>{if(l==="update"){const{id:r,...u}=n;await ae.from("children").update(u).eq("id",r)}},oS=async(l,n,s)=>{if(l==="update"){const{id:r,...u}=n;await ae.from("goals").update(u).eq("id",r)}},cS=()=>{window.addEventListener("online",up),Ks()&&setTimeout(()=>cp(),2e3)},uS=()=>{window.removeEventListener("online",up)},up=async()=>{console.log("nternet balants geri geldi, senkronizasyon balatlyor...");const l=await cp();l.success>0&&alert(` ${l.success} kayt baaryla senkronize edildi!`),l.failed>0&&console.warn(` ${l.failed} kayt senkronize edilemedi`)},dS=()=>{var Jt,qa,vn;const{user:l}=Qt(),[n,s]=_.useState(((Jt=l==null?void 0:l.user_metadata)==null?void 0:Jt.first_name)??""),[r,u]=_.useState(((qa=l==null?void 0:l.user_metadata)==null?void 0:qa.last_name)??""),[d,f]=_.useState(((vn=l==null?void 0:l.user_metadata)==null?void 0:vn.school_name)??""),[m,y]=_.useState(!1),[p,b]=_.useState(""),[w,S]=_.useState(""),[j,C]=_.useState(!1),[R,k]=_.useState(""),[$,B]=_.useState(15),[q,T]=_.useState(7),[Z,Q]=_.useState(2),[P,F]=_.useState(2),O=["Class A","Class B","Class C","Class D","Class E"],[G,ie]=_.useState(O),[ne,se]=_.useState(!1),[ce,I]=_.useState(""),[M,z]=_.useState(""),[re,X]=_.useState(!1),[me,N]=_.useState(!1),[K,Y]=_.useState(!1),[te,le]=_.useState(""),[xe,je]=_.useState(!1),[ue,be]=_.useState(""),[de,oe]=_.useState(0),[Ee,De]=_.useState(Ke());$u.useEffect(()=>{const he=()=>{const Pe=tr();oe(Pe.length)};return he(),window.addEventListener("datachanged",he),()=>window.removeEventListener("datachanged",he)},[]);const Be=he=>{Q0(he),De(he),window.location.reload()},Mt=async()=>{y(!0),b(""),S("");try{const{error:he}=await ae.auth.updateUser({data:{first_name:n.trim(),last_name:r.trim(),school_name:d.trim()}});if(he)throw he;b(v("profileUpdateSuccess"))}catch(he){S((he==null?void 0:he.message)||v("errorOccurred"))}finally{y(!1)}};return o.jsxs("div",{children:[o.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:v("settings")}),o.jsxs("div",{className:"mt-8 space-y-8",children:[o.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[o.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:v("language")}),o.jsx("p",{className:"text-gray-600 mb-3",children:v("changeLanguageDesc")}),o.jsxs("div",{className:"mt-4 flex gap-3",children:[o.jsx("button",{onClick:()=>Be("tr"),className:`px-4 py-2 rounded-lg font-medium transition ${Ee==="tr"?"bg-primary text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:" Trke"}),o.jsx("button",{onClick:()=>Be("en"),className:`px-4 py-2 rounded-lg font-medium transition ${Ee==="en"?"bg-primary text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:" English"})]})]}),o.jsxs("div",{className:"bg-white p-6 rounded-lg shadow space-y-4",children:[o.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:v("profile")}),o.jsxs("p",{className:"text-gray-600",children:[o.jsxs("strong",{children:[v("emailLabel"),":"]})," ",l==null?void 0:l.email]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[o.jsx("input",{type:"text",placeholder:v("teacherFirstName"),value:n,onChange:he=>s(he.target.value),className:"p-2 border rounded w-full"}),o.jsx("input",{type:"text",placeholder:v("teacherLastName"),value:r,onChange:he=>u(he.target.value),className:"p-2 border rounded w-full"})]}),o.jsx("input",{type:"text",placeholder:v("schoolName"),value:d,onChange:he=>f(he.target.value),className:"p-2 border rounded w-full"}),p&&o.jsx("p",{className:"text-green-600 bg-green-100 p-2 rounded",children:p}),w&&o.jsx("p",{className:"text-red-600 bg-red-100 p-2 rounded",children:w}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:Mt,disabled:m,className:"px-4 py-2 bg-primary text-white rounded hover:bg-primary-dark disabled:opacity-50",children:v(m?"loading":"save")}),o.jsx("button",{onClick:async()=>{try{await ae.auth.signOut()}catch{}try{sessionStorage.clear();const he=[];for(let Pe=0;Pe<localStorage.length;Pe++){const pt=localStorage.key(Pe);pt&&(pt.startsWith("sb-")||pt.includes("supabase"))&&he.push(pt)}he.forEach(Pe=>localStorage.removeItem(Pe))}catch{}try{window.location.hash=""}catch{}window.location.reload()},className:"px-4 py-2 bg-red-500 text-white rounded hover:bg-red-600",children:v("signOut")})]})]}),o.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[o.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:v("createDemoData")}),o.jsx("p",{className:"mt-2 text-gray-600",children:v("demoDataDesc")}),o.jsxs("div",{className:"mt-4 grid grid-cols-1 sm:grid-cols-3 gap-3",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-sm text-gray-700",children:v("classCount")}),o.jsx("input",{type:"number",className:"border rounded px-2 py-1 w-full",min:1,max:5,value:P,onChange:he=>{const Pe=Math.max(1,Math.min(5,parseInt(he.target.value||"0")||0));F(Pe)}})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-sm text-gray-700",children:v("childrenPerClass")}),o.jsx("input",{type:"number",className:"border rounded px-2 py-1 w-full",min:1,max:30,value:$,onChange:he=>B(parseInt(he.target.value||"0")||0)})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-sm text-gray-700",children:v("obsPerChild")}),o.jsx("input",{type:"number",className:"border rounded px-2 py-1 w-full",min:1,max:15,value:q,onChange:he=>T(parseInt(he.target.value||"0")||0)})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-sm text-gray-700",children:v("mediaPerChild")}),o.jsx("input",{type:"number",className:"border rounded px-2 py-1 w-full",min:1,max:8,value:Z,onChange:he=>Q(parseInt(he.target.value||"0")||0)})]})]}),o.jsx("div",{className:"mt-3 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3",children:Array.from({length:P}).map((he,Pe)=>o.jsx("input",{type:"text",className:"border rounded px-2 py-1 w-full",placeholder:O[Pe],value:G[Pe]||"",onChange:pt=>{const oa=[...G];oa[Pe]=pt.target.value,ie(oa)}},Pe))}),R&&o.jsx("p",{className:"mt-3 text-sm text-gray-600",children:R}),o.jsxs("div",{className:"mt-4 flex gap-2",children:[o.jsx("button",{className:"px-4 py-2 bg-primary text-white rounded disabled:bg-gray-400",disabled:j||!l,onClick:async()=>{if(l){C(!0),k("Balyor...");try{const he=Math.max(1,Math.min(5,P)),Pe=Array.from({length:he}).map((pt,oa)=>(G[oa]||"").trim()||O[oa]||`Snf ${oa+1}`);await Z1(l.id,{classes:he,classNames:Pe,childrenPerClass:$,observationsPerChild:q,mediaPerChild:Z,onProgress:pt=>k(pt)}),k("Tamamland.")}catch(he){k("Hata: "+((he==null?void 0:he.message)||"bilinmiyor"))}finally{C(!1)}}},children:v(j?"creating":"createDemoBtn")}),o.jsx("span",{className:"text-xs text-gray-500",children:v("demoNote")})]}),o.jsxs("div",{className:"mt-4 flex items-center gap-2",children:[o.jsx("button",{className:"px-4 py-2 bg-red-600 text-white rounded disabled:bg-gray-400",disabled:ne||!l,onClick:async()=>{if(l&&confirm("Demo verileri kaldrlacak. Devam edilsin mi?")){se(!0),I("Balyor...");try{await F1(l.id,{onProgress:he=>I(he)}),I("Tamamland.")}catch(he){I("Hata: "+((he==null?void 0:he.message)||"bilinmiyor"))}finally{se(!1)}}},children:v(ne?"removing":"removeDemoBtn")}),ce&&o.jsx("span",{className:"text-xs text-gray-600",children:ce})]})]}),o.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[o.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:v("legal")}),o.jsxs("ul",{className:"mt-2 space-y-2 text-primary underline",children:[o.jsx("li",{children:o.jsx("a",{href:"/privacy.html",target:"_blank",rel:"noopener noreferrer",children:v("privacyPolicy")})}),o.jsx("li",{children:o.jsx("a",{href:"/terms.html",target:"_blank",rel:"noopener noreferrer",children:v("termsOfService")})})]})]}),o.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[o.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:v("aiInsights")}),o.jsx("p",{className:"mt-2 text-gray-600",children:v("aiInsightsDesc")}),M&&o.jsx("p",{className:"mt-2 text-sm text-gray-600",children:M}),o.jsx("div",{className:"mt-3 flex gap-2",children:o.jsx("button",{className:"px-4 py-2 bg-primary text-white rounded disabled:bg-gray-400",disabled:re||!l,onClick:async()=>{if(l){X(!0),z("Balyor...");try{await $w(l.id,{onProgress:he=>z(he)}),z("Tamamland. ocuk sayfalarnda Yenile'ye gerek kalmadan neriler grnr.")}catch(he){z("Hata: "+((he==null?void 0:he.message)||"bilinmiyor"))}finally{X(!1)}}},children:v(re?"creating":"recomputeBtn")})})]}),o.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-200",children:[o.jsxs("button",{onClick:()=>N(!me),className:"flex items-center gap-2 text-sm text-gray-500 hover:text-gray-700 transition-colors",children:[o.jsx("span",{className:"text-xs",children:""}),o.jsx("span",{className:"font-medium",children:v("advancedOps")}),o.jsx("span",{className:"text-xs",children:me?"":""})]}),me&&o.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200 space-y-4",children:o.jsxs("div",{children:[o.jsxs("h3",{className:"text-sm font-semibold text-gray-700 mb-2",children:[" ",v("exportToExcel")]}),o.jsxs("p",{className:"text-xs text-gray-500 mb-3",children:[v("exportDesc")," ",v("exportNote")]}),te&&o.jsx("p",{className:"text-xs text-gray-600 mb-2",children:te}),o.jsx("button",{onClick:async()=>{if(l){Y(!0),le("Veriler hazrlanyor...");try{const he=await ar(l.id);if(he.length===0){le("Da aktarlacak ocuk bulunamad.");return}le(`${he.length} ocuk verisi hazrlanyor...`);const Pe=["Ad","Soyad","Doum Tarihi","Ya","Snf","Kayt Tarihi","Veli Onay","lgi Alanlar","Gl Ynler","Alerjiler","Salk Notlar"],pt=he.map(Ue=>{var xn,Kn;const Xt=Ue.dob?Math.floor((Date.now()-new Date(Ue.dob).getTime())/315576e5):"";return[Ue.first_name||"",Ue.last_name||"",Ue.dob||"",Xt,Ue.classroom||"",Ue.created_at?new Date(Ue.created_at).toLocaleDateString("tr-TR"):"",Ue.consent_obtained?"Evet":"Hayr",(Ue.interests||[]).join(", "),(Ue.strengths||[]).join(", "),(((xn=Ue.health)==null?void 0:xn.allergies)||[]).join(", "),((Kn=Ue.health)==null?void 0:Kn.notes)||""]}),oa=[Pe.map(Ue=>`"${Ue}"`).join(";"),...pt.map(Ue=>Ue.map(Xt=>`"${String(Xt).replace(/"/g,'""')}"`).join(";"))].join(`
`),bn="\uFEFF",dt=new Blob([bn+oa],{type:"text/csv;charset=utf-8;"}),Xe=`cocuk_listesi_${new Date().toISOString().split("T")[0]}.csv`,We=document.createElement("a");We.href=URL.createObjectURL(dt),We.download=Xe,We.click(),URL.revokeObjectURL(We.href),le(` Tamamland! ${he.length} ocuk iin Excel dosyas indirildi.`)}catch(he){le(" Hata: "+((he==null?void 0:he.message)||"Bilinmeyen hata"))}finally{Y(!1)}}},disabled:K||!l,className:"px-3 py-1.5 text-xs bg-green-600 text-white rounded hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors font-medium",children:K?` ${v("preparing")}`:` ${v("exportBtn")}`}),o.jsx("p",{className:"text-xs text-gray-400 mt-2 italic",children:v("exportCsvNote")})]})})]})]})]})},hS=({childId:l})=>{const{user:n}=Qt(),[s,r]=_.useState([]),[u,d]=_.useState(!0),[f,m]=_.useState(null),[y,p]=_.useState(!1),[b,w]=_.useState(null),[S,j]=_.useState(""),[C,R]=_.useState(""),[k,$]=_.useState(""),[B,q]=_.useState(!1),[T,Z]=_.useState(null),[Q,P]=_.useState(null),F=_.useMemo(()=>Object.keys(Et()),[]),O=async()=>{try{d(!0),m(null);const I=await zl(l),M=await Promise.all(I.map(async z=>{try{const re=await Wu(z.storage_path,3600);return{...z,url:re}}catch{return z}}));r(M)}catch(I){m(I.message||"Error loading media")}finally{d(!1)}};_.useEffect(()=>{O();const I=()=>O();return window.addEventListener("datachanged",I),()=>window.removeEventListener("datachanged",I)},[l]);const G=()=>{w(null),j(""),R(""),$("")},ie=async()=>{if(!(!n||!b||!S)){if(!k){m(v("productDomainRequired")||"Ltfen rn iin bir geliim alan sein.");return}q(!0),m(null);try{const{path:I}=await ap(l,b,{name:S.trim(),description:C.trim()||void 0,domain:k||void 0});p(!1),G(),O()}catch(I){m(I.message||"Upload failed")}finally{q(!1)}}},ne=I=>{Z(I),P(null),j(I.name||""),R(I.description||""),$(I.domain||"")},se=async()=>{if(!(!n||!T)){if(!k){m(v("productDomainRequired")||"Ltfen rn iin bir geliim alan sein.");return}q(!0),m(null);try{await Vw(T.id,l,{name:S.trim()||T.name,description:C.trim()||void 0,domain:k||void 0,file:Q||void 0}),Z(null),G(),O()}catch(I){m(I.message||"Update failed")}finally{q(!1)}}},ce=async I=>{if(confirm(v("confirmDeleteMessage")))try{await Gw(I),O()}catch(M){console.error(M)}};return o.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("h3",{className:"text-lg font-bold text-gray-900",children:v("products")}),o.jsx("button",{onClick:()=>p(!0),className:"px-3 py-2 bg-primary text-white rounded-md",children:v("uploadProduct")})]}),f&&o.jsx("p",{className:"text-sm text-red-600 mb-3",children:f}),u&&o.jsx("p",{className:"text-sm text-gray-600",children:v("loading")}),!u&&s.length===0&&o.jsx("p",{className:"text-sm text-gray-500 italic",children:v("noProductsAdded")}),o.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:s.map(I=>o.jsxs("div",{className:"relative group border rounded-md overflow-hidden bg-gray-50",children:[o.jsx("button",{onClick:()=>ce(I),className:"absolute top-2 right-2 p-2 rounded-full bg-white/80 text-gray-600 opacity-0 group-hover:opacity-100 hover:bg-red-100 hover:text-red-600","aria-label":"delete",children:o.jsx(J0,{className:"w-5 h-5"})}),o.jsx("button",{onClick:()=>ne(I),className:"absolute top-2 left-2 px-2 py-1 rounded bg-white/80 text-gray-700 opacity-0 group-hover:opacity-100 hover:bg-gray-100 text-sm",children:v("edit")}),I.url?o.jsx("img",{src:I.url,alt:I.name,className:"w-full h-40 object-cover"}):o.jsx("div",{className:"w-full h-40 bg-gray-200"}),o.jsxs("div",{className:"p-3",children:[o.jsx("p",{className:"font-semibold text-gray-800 truncate",title:I.name,children:I.name}),I.description&&o.jsx("p",{className:"text-sm text-gray-600 mt-1 line-clamp-2",children:I.description}),I.domain&&o.jsx("span",{className:"mt-2 inline-block text-xs bg-primary/10 text-primary rounded-full px-2 py-1",children:Et()[I.domain]})]})]},I.id))}),y&&o.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 flex items-center justify-center p-4",onClick:()=>p(!1),children:o.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-6 w-full max-w-lg",onClick:I=>I.stopPropagation(),children:[o.jsx("h4",{className:"text-lg font-semibold mb-4",children:v("uploadProduct")}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700",children:v("productName")}),o.jsx("input",{className:"mt-1 w-full border rounded p-2",placeholder:v("productNamePlaceholder"),value:S,onChange:I=>j(I.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700",children:v("productDescription")}),o.jsx("textarea",{className:"mt-1 w-full border rounded p-2",rows:3,placeholder:v("productDescriptionPlaceholder"),value:C,onChange:I=>R(I.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700",children:v("productDomain")}),o.jsxs("select",{className:"mt-1 w-full border rounded p-2",value:k,onChange:I=>$(I.target.value),children:[o.jsx("option",{value:"",children:v("selectDomainPrompt")}),F.map(I=>o.jsx("option",{value:I,children:Et()[I]},I))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700",children:v("selectFile")}),o.jsx("input",{className:"mt-1 w-full",type:"file",accept:"image/*",onChange:I=>{var M;return w(((M=I.target.files)==null?void 0:M[0])||null)}}),o.jsx("p",{className:"text-xs text-gray-500 mt-1",children:b?`${v("fileSelected")} ${b.name}`:v("noFileSelected")})]})]}),f&&o.jsx("p",{className:"text-sm text-red-600 mt-3",children:f}),o.jsxs("div",{className:"mt-6 flex justify-end gap-2",children:[o.jsx("button",{className:"px-3 py-2 bg-gray-200 rounded",onClick:()=>{p(!1),G()},disabled:B,children:v("cancel")}),o.jsx("button",{className:"px-3 py-2 bg-primary text-white rounded disabled:bg-gray-400",onClick:ie,disabled:B||!b||!S||!k,children:v(B?"loading":"save")})]})]})}),T&&o.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 flex items-center justify-center p-4",onClick:()=>Z(null),children:o.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-6 w-full max-w-lg",onClick:I=>I.stopPropagation(),children:[o.jsx("h4",{className:"text-lg font-semibold mb-4",children:v("edit")}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700",children:v("productName")}),o.jsx("input",{className:"mt-1 w-full border rounded p-2",value:S,onChange:I=>j(I.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700",children:v("productDescription")}),o.jsx("textarea",{className:"mt-1 w-full border rounded p-2",rows:3,value:C,onChange:I=>R(I.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700",children:v("productDomain")}),o.jsxs("select",{className:"mt-1 w-full border rounded p-2",value:k,onChange:I=>$(I.target.value),children:[o.jsx("option",{value:"",children:v("selectDomainPrompt")}),F.map(I=>o.jsx("option",{value:I,children:Et()[I]},I))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700",children:v("selectFile")}),o.jsx("input",{className:"mt-1 w-full",type:"file",accept:"image/*",onChange:I=>{var M;return P(((M=I.target.files)==null?void 0:M[0])||null)}}),o.jsx("p",{className:"text-xs text-gray-500 mt-1",children:Q?`${v("fileSelected")} ${Q.name}`:v("noFileSelected")})]})]}),f&&o.jsx("p",{className:"text-sm text-red-600 mt-3",children:f}),o.jsxs("div",{className:"mt-6 flex justify-end gap-2",children:[o.jsx("button",{className:"px-3 py-2 bg-gray-200 rounded",onClick:()=>Z(null),disabled:B,children:v("cancel")}),o.jsx("button",{className:"px-3 py-2 bg-primary text-white rounded disabled:bg-gray-400",onClick:se,disabled:B||!S||!k,children:v(B?"loading":"save")})]})]})})]})},fS=({childId:l})=>o.jsx("div",{className:"max-w-6xl mx-auto",children:o.jsx(hS,{childId:l})}),mS=({name:l})=>o.jsx("span",{className:"inline-block px-2 py-0.5 rounded-full text-xs bg-blue-50 text-blue-700 border border-blue-100",children:Et()[l]||l}),gS=({childId:l,navigate:n})=>{const[s,r]=_.useState([]),[u,d]=_.useState(!0),[f,m]=_.useState(null),[y,p]=_.useState(""),[b,w]=_.useState(new Set),[S,j]=_.useState(null),[C,R]=_.useState(""),[k,$]=_.useState([]),[B,q]=_.useState({});_.useEffect(()=>{(async()=>{try{d(!0);const[G,ie]=await Promise.all([Al(l),zl(l)]);r(G),$(ie);const ne={};for(const se of ie)try{const ce=await Wu(se.storage_path);ne[se.id]=ce}catch(ce){console.error("Media URL alnamad:",se.id,ce)}q(ne)}catch(G){m((G==null?void 0:G.message)||"Hata")}finally{d(!1)}})()},[l]);const T=_.useMemo(()=>Object.keys(Et()),[]),Z=_.useMemo(()=>{const G=y.trim().toLocaleLowerCase("tr-TR"),ie=b.size>0;return s.filter(ne=>{const se=(ne.note||"").toLocaleLowerCase("tr-TR"),ce=!G||se.includes(G),I=ne.domains||[],M=!ie||I.some(z=>b.has(z));return ce&&M})},[s,y,b]),Q=_.useMemo(()=>{const G={turkish:[],math:[],science:[],social:[],motor_health:[],art:[],music:[]};for(const ie of Z){const ne=ie.domains||[];for(const se of ne)G[se]&&G[se].push(ie)}return G},[Z]),P=G=>{w(ie=>{const ne=new Set(ie);return ne.has(G)?ne.delete(G):ne.add(G),ne})},F=()=>{p(""),w(new Set)},O=async G=>{if(confirm("Bu gzlemi silmek istediinizden emin misiniz? Bu ilem geri alnamaz."))try{await Lw(G),r(ie=>ie.filter(ne=>ne.id!==G)),alert(" Gzlem baaryla silindi")}catch(ie){alert(" Gzlem silinirken hata olutu: "+((ie==null?void 0:ie.message)||"Bilinmeyen hata"))}};return o.jsxs("div",{className:"max-w-6xl mx-auto",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("button",{className:"px-3 py-2 bg-gray-200 rounded",onClick:()=>n("child-detail",{id:l}),children:"Geri"}),o.jsx("h1",{className:"text-xl font-bold",children:"Kaydedilen Gzlemler"}),o.jsx("button",{className:"px-3 py-2 bg-primary text-white rounded",onClick:()=>n("add-observation",{childId:l}),children:v("addObservation")})]}),u&&o.jsx("p",{children:v("loading")}),f&&o.jsx("p",{className:"text-red-600",children:f}),!u&&s.length===0&&o.jsx("p",{className:"text-gray-500",children:"Gzlem bulunamad."}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-4",children:[o.jsx("aside",{className:"md:col-span-4 lg:col-span-3",children:o.jsxs("div",{className:"bg-white border rounded-lg p-4 shadow-sm",children:[o.jsx("h2",{className:"font-semibold mb-2",children:"Filtreler"}),o.jsxs("div",{className:"mb-3",children:[o.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Ara"}),o.jsx("input",{className:"w-full border rounded px-2 py-1.5",placeholder:"notlarda ara...",value:y,onChange:G=>p(G.target.value)})]}),o.jsxs("div",{children:[o.jsx("div",{className:"block text-sm text-gray-700 mb-1",children:"Beceri Alanlari"}),o.jsx("div",{className:"space-y-2 max-h-48 overflow-auto pr-1",children:T.map(G=>o.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[o.jsx("input",{type:"checkbox",checked:b.has(G),onChange:()=>P(G)}),o.jsx("span",{children:Et()[G]})]},G))})]}),o.jsx("div",{className:"mt-3 flex gap-2",children:o.jsx("button",{className:"px-3 py-1.5 bg-gray-200 rounded",onClick:F,children:"Temizle"})})]})}),o.jsxs("section",{className:"md:col-span-8 lg:col-span-9",children:[y||b.size>0?o.jsxs("p",{className:"text-sm text-gray-500 mb-2",children:[Z.length," sonuc"]}):null,T.map(G=>{if(b.size>0&&!b.has(G))return null;const ie=Q[G]||[];return ie.length===0?null:o.jsxs("div",{className:"mb-5",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsx("h3",{className:"text-sm font-semibold text-gray-700",children:Et()[G]}),o.jsxs("span",{className:"text-xs text-gray-500",children:["(",ie.length,")"]})]}),o.jsx("div",{className:"space-y-3",children:ie.map(ne=>o.jsxs("div",{className:"bg-white border rounded-lg p-4 shadow-sm",children:[o.jsx("div",{className:"flex items-center justify-between gap-2",children:o.jsxs("div",{className:"text-sm text-gray-500 flex items-center gap-2 flex-wrap",children:[new Date(ne.created_at).toLocaleString("tr-TR"),ne.domains&&ne.domains.length>0&&o.jsx("span",{className:"flex items-center gap-1",children:ne.domains.map((se,ce)=>o.jsx(mS,{name:se},ce))})]})}),o.jsx("p",{className:"mt-2 text-gray-800 whitespace-pre-wrap",children:ne.note}),ne.media_ids&&ne.media_ids.length>0&&o.jsx("div",{className:"mt-3 grid grid-cols-2 sm:grid-cols-3 gap-2",children:ne.media_ids.map(se=>{const ce=B[se],I=k.find(M=>M.id===se);return ce?o.jsxs("div",{className:"relative group",children:[o.jsx("img",{src:ce,alt:(I==null?void 0:I.name)||"Gzlem fotoraf",className:"w-full h-32 object-cover rounded-lg border-2 border-gray-200 group-hover:border-indigo-400 transition-all cursor-pointer shadow-sm",onClick:()=>window.open(ce,"_blank")}),(I==null?void 0:I.name)&&o.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-black/60 text-white text-xs p-1 rounded-b-lg truncate",children:I.name})]},se):null})}),o.jsxs("div",{className:"mt-3 flex gap-2",children:[o.jsxs("button",{className:"px-3 py-1.5 bg-blue-50 hover:bg-blue-100 text-blue-700 border border-blue-200 rounded transition-colors",onClick:()=>n("edit-observation",{observation:ne,childId:l}),children:[" ",v("edit")]}),o.jsx("button",{className:"px-3 py-1.5 bg-red-50 hover:bg-red-100 text-red-700 border border-red-200 rounded transition-colors",onClick:()=>O(ne.id),children:" Sil"})]})]},`${G}-${ne.id}`))})]},G)}),T.every(G=>b.size>0&&!b.has(G)||(Q[G]||[]).length===0)&&o.jsx("p",{className:"text-gray-500",children:"Sonu bulunamad."})]})]})]})},pS=({navigate:l,childId:n,classroom:s})=>{const{user:r}=Qt(),[u,d]=_.useState([]),[f,m]=_.useState(""),[y,p]=_.useState(!1),[b,w]=_.useState(n?"child":s?"class":"general"),[S,j]=_.useState(n),[C,R]=_.useState(s),[k,$]=_.useState([]),[B,q]=_.useState([]),[T,Z]=_.useState(null),[Q,P]=_.useState(!1),[F,O]=_.useState(!1),[G,ie]=_.useState(null),[ne,se]=_.useState("");_.useEffect(()=>{(async()=>{if(!r)return;const{data:Y}=await ae.from("children").select("id, first_name, last_name, classroom").eq("user_id",r.id);$(Y||[]),await ce()})()},[r]);const ce=async()=>{if(r){P(!0);try{const Y=await Pw(r.id);q(Y)}finally{P(!1)}}},I=async Y=>{Z(Y),w(Y.mode),R(Y.classroom||void 0),j(Y.child_id||void 0),O(!0);try{const te=await Jw(Y.id);d((te||[]).map(le=>({role:le.role,content:le.content,at:le.created_at})))}finally{O(!1)}},M=_.useMemo(()=>{const Y=new Set;for(const te of k)te.classroom&&Y.add(te.classroom);return Array.from(Y).sort((te,le)=>te.localeCompare(le,"tr-TR"))},[k]),z=async()=>{if(!r)return;const Y=f.trim();if(!Y||y)return;p(!0);const te=new Date().toISOString();d(le=>[...le,{role:"user",content:Y,at:te}]),m("");try{let le=T;if(!le){const de=Y.length>50?Y.slice(0,50)+"":Y;le=await Iw({userId:r.id,title:de,mode:b,classroom:C,childId:S}),Z(le),await ce()}await Vg({threadId:le.id,userId:r.id,role:"user",content:Y});const xe={message:Y,mode:b,history:u.slice(-6)};b==="child"&&S&&(xe.childId=S),b==="class"&&C&&(xe.classroom=C);const je=await Xw(xe),ue=je&&je.reply||"Yant alnamad.",be=new Date().toISOString();d(de=>[...de,{role:"assistant",content:String(ue),at:be}]),await Vg({threadId:le.id,userId:r.id,role:"assistant",content:String(ue)}),await ce()}catch(le){const xe=`Hata: ${(le==null?void 0:le.message)||le}`;d(je=>[...je,{role:"assistant",content:xe,at:new Date().toISOString()}])}finally{p(!1)}},re=()=>{Z(null),d([]),w(n?"child":s?"class":"general"),j(n),R(s)},X=(Y,te)=>{te.stopPropagation(),ie(Y.id),se(Y.title)},me=async Y=>{if(Y.stopPropagation(),!(!G||!ne.trim())){try{await Kw(G,ne.trim()),await ce(),(T==null?void 0:T.id)===G&&Z({...T,title:ne.trim()})}catch(te){console.error("Thread gncellenemedi:",te)}ie(null),se("")}},N=Y=>{Y.stopPropagation(),ie(null),se("")},K=async(Y,te)=>{if(te.stopPropagation(),!!confirm(`"${Y.title}" ${v("confirmDeleteChat")}`))try{await Qw(Y.id),(T==null?void 0:T.id)===Y.id&&(Z(null),d([])),await ce()}catch(le){console.error("Thread silinemedi:",le)}};return o.jsxs("div",{className:"max-w-6xl mx-auto grid grid-cols-1 md:grid-cols-12 gap-4",children:[o.jsx("aside",{className:"md:col-span-4 lg:col-span-3",children:o.jsxs("div",{className:"bg-white rounded-lg shadow p-3 h-[70vh] flex flex-col",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("h2",{className:"font-semibold",children:v("chats")}),o.jsx("button",{className:"text-primary text-sm hover:underline",onClick:re,children:v("newChat")})]}),o.jsx("div",{className:"overflow-y-auto divide-y flex-1",children:Q?o.jsx("div",{className:"text-sm text-gray-500 p-2",children:v("loading")}):B.length===0?o.jsx("div",{className:"text-sm text-gray-500 p-2",children:v("noChatYet")}):B.map(Y=>o.jsxs("div",{className:`relative group ${(T==null?void 0:T.id)===Y.id?"bg-gray-100":""}`,children:[G===Y.id?o.jsxs("div",{className:"p-2 flex items-center gap-1",onClick:te=>te.stopPropagation(),children:[o.jsx("input",{type:"text",value:ne,onChange:te=>se(te.target.value),className:"flex-1 border rounded px-2 py-1 text-sm",autoFocus:!0,onKeyDown:te=>{te.key==="Enter"&&me(te),te.key==="Escape"&&N(te)}}),o.jsx("button",{onClick:me,className:"text-green-600 text-xs hover:underline",children:""}),o.jsx("button",{onClick:N,className:"text-gray-500 text-xs hover:underline",children:""})]}):o.jsxs("button",{className:"w-full text-left p-2 hover:bg-gray-50",onClick:()=>I(Y),children:[o.jsx("div",{className:"text-sm font-medium truncate pr-12",children:Y.title}),o.jsx("div",{className:"text-[11px] text-gray-500",children:new Date(Y.updated_at).toLocaleString(yn())})]}),G!==Y.id&&o.jsxs("div",{className:"absolute right-1 top-1 opacity-0 group-hover:opacity-100 transition-opacity flex gap-1",children:[o.jsx("button",{onClick:te=>X(Y,te),className:"p-1 text-gray-500 hover:text-blue-600 text-xs",title:v("edit"),children:""}),o.jsx("button",{onClick:te=>K(Y,te),className:"p-1 text-gray-500 hover:text-red-600 text-xs",title:v("delete"),children:""})]})]},Y.id))})]})}),o.jsxs("div",{className:"md:col-span-8 lg:col-span-9",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:v("aiAssistant")}),o.jsx("button",{className:"text-primary hover:underline",onClick:()=>l("dashboard"),children:v("dashboard")})]}),o.jsx("div",{className:"bg-white rounded-lg shadow p-4 mb-4",children:o.jsxs("div",{className:"flex flex-wrap items-end gap-3",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("label",{className:"inline-flex items-center gap-1 text-sm",children:[o.jsx("input",{type:"radio",checked:b==="general",onChange:()=>w("general")})," ",v("general")]}),o.jsxs("label",{className:"inline-flex items-center gap-1 text-sm",children:[o.jsx("input",{type:"radio",checked:b==="class",onChange:()=>w("class")})," ",v("classroom")]}),o.jsxs("label",{className:"inline-flex items-center gap-1 text-sm",children:[o.jsx("input",{type:"radio",checked:b==="child",onChange:()=>w("child")})," ",v("child")]})]}),b==="class"&&o.jsxs("select",{value:C||"",onChange:Y=>R(Y.target.value),className:"border rounded px-2 py-1 text-sm",children:[o.jsx("option",{value:"",children:v("selectClass")}),M.map(Y=>o.jsx("option",{value:Y,children:Y},Y))]}),b==="child"&&o.jsxs("select",{value:S||"",onChange:Y=>j(Y.target.value),className:"border rounded px-2 py-1 text-sm min-w-[200px]",children:[o.jsx("option",{value:"",children:v("selectChild")}),k.map(Y=>o.jsxs("option",{value:Y.id,children:[Y.first_name," ",Y.last_name]},Y.id))]}),o.jsx("div",{className:"text-xs text-gray-500 ml-auto",children:v("noteDisclaimer")})]})}),o.jsx("div",{className:"bg-white rounded-lg shadow p-4 h-[60vh] overflow-y-auto",children:F?o.jsx("div",{className:"text-gray-500",children:v("loading")}):u.length===0?o.jsx("p",{className:"text-gray-500",children:v("askAnything")}):o.jsxs("ul",{className:"space-y-3",children:[u.map((Y,te)=>o.jsxs("li",{className:`max-w-[85%] ${Y.role==="user"?"ml-auto":""}`,children:[o.jsx("div",{className:`px-3 py-2 rounded-lg ${Y.role==="user"?"bg-primary text-white":"bg-gray-100 text-gray-800"}`,children:o.jsx("div",{className:"whitespace-pre-wrap",children:Y.content})}),o.jsx("div",{className:"text-[11px] text-gray-400 mt-1",children:new Date(Y.at).toLocaleTimeString("tr-TR")})]},te)),y&&o.jsx("li",{className:"text-gray-500 text-sm",children:"Asistan yazyor"})]})}),o.jsxs("div",{className:"mt-3 flex gap-2",children:[o.jsx("textarea",{value:f,onChange:Y=>m(Y.target.value),rows:2,className:"flex-1 border rounded px-3 py-2",placeholder:"Mesajnz yazn"}),o.jsx("button",{onClick:z,disabled:y||!f.trim(),className:"px-4 py-2 rounded bg-primary text-white disabled:opacity-50",children:"Gnder"})]})]})]})},yS=({navigate:l})=>{const{user:n}=Qt(),[s,r]=_.useState([]),[u,d]=_.useState(new Map),[f,m]=_.useState([]),[y,p]=_.useState(new Date().toISOString().split("T")[0]),[b,w]=_.useState(!0),[S,j]=_.useState(!1),[C,R]=_.useState(""),[k,$]=_.useState(null),[B,q]=_.useState(""),[T,Z]=_.useState(null);_.useEffect(()=>{n&&(Q(),P())},[n,y]);const Q=async()=>{if(n){w(!0),R("");try{const[X,me]=await Promise.all([ar(n.id),t1(n.id,y)]);r(X),m(me);const N=new Map;me.forEach(K=>{N.set(K.child_id,K.status)}),d(N)}catch(X){R((X==null?void 0:X.message)||v("dataLoadFailed"))}finally{w(!1)}}},P=async()=>{if(n)try{const X=new Date,me=new Date(X.getFullYear(),X.getMonth(),1).toISOString().split("T")[0],N=new Date(X.getFullYear(),X.getMonth()+1,0).toISOString().split("T")[0],K=await n1(n.id,me,N);$(K)}catch(X){console.error("Stats error:",X)}},F=(X,me)=>{const N=new Map(u);N.set(X,me),d(N)},O=async()=>{if(n){j(!0),R("");try{const X=Array.from(u.entries()).map(([me,N])=>({childId:me,userId:n.id,date:y,status:N}));await a1(X),await Q(),await P(),alert(" "+v("attendanceSaved"))}catch(X){R((X==null?void 0:X.message)||v("attendanceSaveFailed")),alert(" "+v("errorOccurred")+": "+((X==null?void 0:X.message)||v("attendanceSaveFailed")))}finally{j(!1)}}},G=X=>{const me=new Map;I.forEach(N=>{me.set(N.id,X)}),d(me)},ie=X=>{if(!X)return"bg-gray-100 border-gray-300 text-gray-500";switch(X){case"present":return"bg-green-100 border-green-500 text-green-800";case"absent":return"bg-red-100 border-red-500 text-red-800";case"late":return"bg-yellow-100 border-yellow-500 text-yellow-800";case"excused":return"bg-blue-100 border-blue-500 text-blue-800"}},ne=X=>{if(!X)return"";switch(X){case"present":return"";case"absent":return"";case"late":return"";case"excused":return""}},se=X=>{if(!X)return v("unmarked");switch(X){case"present":return v("present");case"absent":return v("absent");case"late":return v("late");case"excused":return v("excused")}},ce=[...new Set(s.map(X=>X.classroom).filter(Boolean))],I=s.filter(X=>{if(B&&X.classroom!==B)return!1;if(T){const me=u.get(X.id);if(T==="present"||T==="absent"||T==="late"||T==="excused")return me===T}return!0}),M=Array.from(u.values()).filter(X=>X==="present").length,z=Array.from(u.values()).filter(X=>X==="absent").length,re=Array.from(u.values()).filter(X=>X==="late").length;return Array.from(u.values()).filter(X=>X==="excused").length,s.length-u.size,new Date().toISOString().split("T")[0],b?o.jsx("p",{className:"text-gray-600",children:v("loading")}):C?o.jsx("p",{className:"text-red-600 bg-red-50 p-3 rounded-lg",children:C}):o.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[o.jsxs("div",{className:"bg-gradient-to-r from-indigo-600 via-purple-600 to-blue-600 rounded-2xl p-6 text-white shadow-xl",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("div",{children:[o.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-3",children:[" ",v("attendanceSystem")]}),o.jsx("p",{className:"text-white/80 mt-1",children:v("dailyAttendanceTracking")})]}),k&&o.jsxs("div",{className:"bg-white/20 backdrop-blur-sm rounded-xl p-4 text-center",children:[o.jsxs("div",{className:"text-4xl font-bold",children:[k.attendanceRate,"%"]}),o.jsx("div",{className:"text-sm mt-1",children:v("thisMonthAttendance")})]})]}),o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 mt-4",children:[o.jsxs("button",{onClick:()=>Z(T==="present"?null:"present"),className:`bg-white/10 backdrop-blur-sm rounded-lg p-3 text-center transition-all hover:bg-white/20 hover:scale-105 ${T==="present"?"ring-4 ring-white/50 scale-105":""}`,children:[o.jsx("div",{className:"text-2xl font-bold",children:M}),o.jsxs("div",{className:"text-sm opacity-80",children:[" ",v("present")]}),T==="present"&&o.jsx("div",{className:"text-xs mt-1 bg-white/30 rounded px-2 py-0.5 inline-block",children:v("filtering")})]}),o.jsxs("button",{onClick:()=>Z(T==="absent"?null:"absent"),className:`bg-white/10 backdrop-blur-sm rounded-lg p-3 text-center transition-all hover:bg-white/20 hover:scale-105 ${T==="absent"?"ring-4 ring-white/50 scale-105":""}`,children:[o.jsx("div",{className:"text-2xl font-bold",children:z}),o.jsxs("div",{className:"text-sm opacity-80",children:[" ",v("absent")]}),T==="absent"&&o.jsx("div",{className:"text-xs mt-1 bg-white/30 rounded px-2 py-0.5 inline-block",children:v("filtering")})]}),o.jsxs("button",{onClick:()=>Z(T==="late"?null:"late"),className:`bg-white/10 backdrop-blur-sm rounded-lg p-3 text-center transition-all hover:bg-white/20 hover:scale-105 ${T==="late"?"ring-4 ring-white/50 scale-105":""}`,children:[o.jsx("div",{className:"text-2xl font-bold",children:re}),o.jsxs("div",{className:"text-sm opacity-80",children:[" ",v("late")]}),T==="late"&&o.jsx("div",{className:"text-xs mt-1 bg-white/30 rounded px-2 py-0.5 inline-block",children:v("filtering")})]}),o.jsxs("button",{onClick:()=>Z(null),className:`bg-white/10 backdrop-blur-sm rounded-lg p-3 text-center transition-all hover:bg-white/20 hover:scale-105 ${T?"":"ring-4 ring-white/50 scale-105"}`,children:[o.jsx("div",{className:"text-2xl font-bold",children:s.length}),o.jsxs("div",{className:"text-sm opacity-80",children:[" ",v("allItems")]}),!T&&o.jsx("div",{className:"text-xs mt-1 bg-white/30 rounded px-2 py-0.5 inline-block",children:v("fullList")})]})]})]}),o.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 space-y-4",children:[o.jsxs("div",{className:"flex flex-wrap gap-4 items-end",children:[o.jsxs("div",{className:"flex-1 min-w-[200px]",children:[o.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:v("selectDate")}),o.jsx("input",{type:"date",value:y,onChange:X=>p(X.target.value),max:new Date().toISOString().split("T")[0],className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]}),ce.length>0&&o.jsxs("div",{className:"flex-1 min-w-[200px]",children:[o.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:v("filterClass")}),o.jsxs("select",{value:B,onChange:X=>q(X.target.value),className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500",children:[o.jsx("option",{value:"",children:v("allClasses")}),ce.map(X=>o.jsx("option",{value:X,children:X},X))]})]})]}),o.jsxs("div",{className:"flex flex-wrap gap-2 pt-4 border-t",children:[o.jsxs("span",{className:"text-sm font-semibold text-gray-700 mr-2",children:[v("quickAction"),":"]}),o.jsxs("button",{onClick:()=>G("present"),className:"px-3 py-1 bg-green-100 text-green-700 rounded-lg hover:bg-green-200 transition-all text-sm font-medium",children:[" ",v("markAllPresent")]}),o.jsxs("button",{onClick:()=>G("absent"),className:"px-3 py-1 bg-red-100 text-red-700 rounded-lg hover:bg-red-200 transition-all text-sm font-medium",children:[" ",v("markAllAbsent")]})]})]}),T&&o.jsxs("div",{className:"bg-gradient-to-r from-indigo-50 to-purple-50 border-2 border-indigo-200 rounded-xl p-4 flex items-center justify-between shadow-md",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsxs("span",{className:"text-2xl",children:[T==="present"&&"",T==="absent"&&"",T==="late"&&"",T==="excused"&&""]}),o.jsxs("div",{children:[o.jsxs("div",{className:"font-bold text-gray-900",children:["Filtre: ",se(T)]}),o.jsxs("div",{className:"text-sm text-gray-600",children:[I.length," ",v("studentsShown")]})]})]}),o.jsxs("button",{onClick:()=>Z(null),className:"px-4 py-2 bg-white hover:bg-gray-50 text-gray-700 rounded-lg border-2 border-gray-300 font-medium transition-all hover:shadow-md",children:[" ",v("clearFilter")]})]}),I.length===0?o.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-xl border-2 border-dashed border-gray-300",children:[o.jsx("span",{className:"text-6xl mb-4 block",children:T?"":""}),o.jsx("p",{className:"text-gray-600 font-medium",children:T?`"${se(T)}" durumunda renci bulunamad.`:"Hi ocuk bulunamad."}),T&&o.jsx("button",{onClick:()=>Z(null),className:"mt-4 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-all",children:v("showAll")})]}):o.jsxs("div",{className:"bg-white rounded-xl shadow-md overflow-hidden",children:[o.jsxs("div",{className:"bg-gradient-to-r from-gray-50 to-gray-100 px-6 py-3 border-b-2 border-gray-200 flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("span",{className:"text-lg",children:""}),o.jsxs("div",{children:[o.jsx("div",{className:"font-bold text-gray-900",children:v("studentList")}),o.jsxs("div",{className:"text-sm text-gray-600",children:[I.length," ",v("studentsShown"),T&&` (${se(T)})`]})]})]}),T&&o.jsx("button",{onClick:()=>Z(null),className:"text-sm px-3 py-1 bg-white hover:bg-gray-50 text-gray-700 rounded-lg border border-gray-300 transition-all",children:v("showAllList")})]}),o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full",children:[o.jsx("thead",{className:"bg-gradient-to-r from-gray-50 to-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-4 text-left text-sm font-bold text-gray-900",children:v("photo")}),o.jsx("th",{className:"px-6 py-4 text-left text-sm font-bold text-gray-900",children:v("nameSurname")}),o.jsx("th",{className:"px-6 py-4 text-left text-sm font-bold text-gray-900",children:v("classroom")}),o.jsx("th",{className:"px-6 py-4 text-center text-sm font-bold text-gray-900",children:v("status")}),o.jsx("th",{className:"px-6 py-4 text-center text-sm font-bold text-gray-900",children:v("action")})]})}),o.jsx("tbody",{className:"divide-y divide-gray-200",children:I.map((X,me)=>{const N=u.get(X.id);return o.jsxs("tr",{className:`hover:bg-gray-50 transition-colors ${me%2===0?"bg-white":"bg-gray-50/50"}`,children:[o.jsx("td",{className:"px-6 py-4",children:o.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-r from-indigo-400 to-purple-400 flex items-center justify-center text-white font-bold text-lg shadow-md overflow-hidden",children:X.photo_url?o.jsx("img",{src:X.photo_url,alt:X.first_name,className:"w-full h-full object-cover"}):X.first_name.charAt(0).toUpperCase()})}),o.jsx("td",{className:"px-6 py-4",children:o.jsxs("button",{onClick:()=>l("child-detail",{childId:X.id}),className:"font-semibold text-gray-900 hover:text-indigo-600 transition-colors",children:[X.first_name," ",X.last_name]})}),o.jsx("td",{className:"px-6 py-4",children:o.jsx("span",{className:"text-sm text-gray-600",children:X.classroom||""})}),o.jsx("td",{className:"px-6 py-4 text-center",children:o.jsxs("span",{className:`inline-flex items-center gap-2 px-4 py-2 rounded-full text-sm font-semibold border-2 ${ie(N)}`,children:[o.jsx("span",{className:"text-lg",children:ne(N)}),se(N)]})}),o.jsx("td",{className:"px-6 py-4",children:o.jsxs("div",{className:"flex gap-2 justify-center",children:[o.jsx("button",{onClick:()=>F(X.id,"present"),className:`p-2 rounded-lg transition-all ${N==="present"?"bg-green-500 text-white scale-110":"bg-green-100 text-green-600 hover:bg-green-200"}`,title:"Geldi",children:""}),o.jsx("button",{onClick:()=>F(X.id,"absent"),className:`p-2 rounded-lg transition-all ${N==="absent"?"bg-red-500 text-white scale-110":"bg-red-100 text-red-600 hover:bg-red-200"}`,title:"Gelmedi",children:""}),o.jsx("button",{onClick:()=>F(X.id,"late"),className:`p-2 rounded-lg transition-all ${N==="late"?"bg-yellow-500 text-white scale-110":"bg-yellow-100 text-yellow-600 hover:bg-yellow-200"}`,title:"Ge Geldi",children:""}),o.jsx("button",{onClick:()=>F(X.id,"excused"),className:`p-2 rounded-lg transition-all ${N==="excused"?"bg-blue-500 text-white scale-110":"bg-blue-100 text-blue-600 hover:bg-blue-200"}`,title:"Mazeret",children:""})]})})]},X.id)})})]})})]}),I.length>0&&o.jsx("div",{className:"sticky bottom-4 flex justify-center",children:o.jsx("button",{onClick:O,disabled:S||u.size===0,className:"px-8 py-4 bg-gradient-to-r from-green-600 to-emerald-600 text-white rounded-xl shadow-2xl hover:shadow-3xl hover:scale-105 transition-all font-bold text-lg disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:scale-100",children:S?" "+v("savingAttendance"):" "+v("saveAttendance")})})]})};var Fg={},vS="@vercel/analytics",bS="1.6.1",xS=()=>{window.va||(window.va=function(...n){(window.vaq=window.vaq||[]).push(n)})};function dp(){return typeof window<"u"}function hp(){try{const l="production"}catch{}return"production"}function wS(l="auto"){if(l==="auto"){window.vam=hp();return}window.vam=l}function _S(){return(dp()?window.vam:hp())||"production"}function Uu(){return _S()==="development"}function SS(l){return l.scriptSrc?l.scriptSrc:Uu()?"https://va.vercel-scripts.com/v1/script.debug.js":l.basePath?`${l.basePath}/insights/script.js`:"/_vercel/insights/script.js"}function jS(l={debug:!0}){var n;if(!dp())return;wS(l.mode),xS(),l.beforeSend&&((n=window.va)==null||n.call(window,"beforeSend",l.beforeSend));const s=SS(l);if(document.head.querySelector(`script[src*="${s}"]`))return;const r=document.createElement("script");r.src=s,r.defer=!0,r.dataset.sdkn=vS+(l.framework?`/${l.framework}`:""),r.dataset.sdkv=bS,l.disableAutoTrack&&(r.dataset.disableAutoTrack="1"),l.endpoint?r.dataset.endpoint=l.endpoint:l.basePath&&(r.dataset.endpoint=`${l.basePath}/insights`),l.dsn&&(r.dataset.dsn=l.dsn),r.onerror=()=>{const u=Uu()?"Please check if any ad blockers are enabled and try again.":"Be sure to enable Web Analytics for your project and deploy again. See https://vercel.com/docs/analytics/quickstart for more information.";console.log(`[Vercel Web Analytics] Failed to load script from ${s}. ${u}`)},Uu()&&l.debug===!1&&(r.dataset.debug="false"),document.head.appendChild(r)}function kS({route:l,path:n}){var s;(s=window.va)==null||s.call(window,"pageview",{route:l,path:n})}function NS(){if(!(typeof process>"u"||typeof Fg>"u"))return Fg.REACT_APP_VERCEL_OBSERVABILITY_BASEPATH}function ES(l){return _.useEffect(()=>{var n;l.beforeSend&&((n=window.va)==null||n.call(window,"beforeSend",l.beforeSend))},[l.beforeSend]),_.useEffect(()=>{jS({framework:l.framework||"react",basePath:l.basePath??NS(),...l.route!==void 0&&{disableAutoTrack:!0},...l})},[]),_.useEffect(()=>{l.route&&l.path&&kS({route:l.route,path:l.path})},[l.route,l.path]),null}const fp=_.createContext({session:null,user:null}),Qt=()=>_.useContext(fp),AS=()=>{const[l,n]=_.useState(null),[s,r]=_.useState({page:"dashboard",params:{}}),[u,d]=_.useState(navigator.onLine),f=(b,w={})=>{const S={};w!=null&&w.id&&(S.id=w.id),w!=null&&w.childId&&(S.childId=w.childId),w!=null&&w.screen&&(S.screen=w.screen),(w==null?void 0:w.classroom)!==void 0&&(S.classroom=w.classroom),w!=null&&w.forChatChildId&&(S.forChatChildId=w.forChatChildId);const j=new URLSearchParams(S).toString();return`#/${b}${j?`?${j}`:""}`},m=()=>{const b=window.location.hash||"";if(!b.startsWith("#/"))return{page:"dashboard",params:{}};const[w,S]=b.substring(2).split("?"),j={};return S&&new URLSearchParams(S).forEach((R,k)=>j[k]=R),{page:w||"dashboard",params:j}};_.useEffect(()=>{ae.auth.getSession().then(({data:{session:C}})=>{n(C)});const{data:{subscription:b}}=ae.auth.onAuthStateChange((C,R)=>{n(R)}),w=()=>d(!0),S=()=>d(!1),j=()=>{const C=m();r(C)};return window.addEventListener("online",w),window.addEventListener("offline",S),window.addEventListener("hashchange",j),j(),cS(),()=>{b.unsubscribe(),window.removeEventListener("online",w),window.removeEventListener("offline",S),window.removeEventListener("hashchange",j),uS()}},[]),_.useEffect(()=>{u&&(console.log(v("syncAttempt")),Bw())},[u]),_.useEffect(()=>{navigator.onLine||setTimeout(()=>alert(v("noInternetConnection")),500)},[]);const y=_.useCallback((b,w={})=>{try{w&&w.observation&&sessionStorage.setItem("edit-observation",JSON.stringify(w.observation))}catch{}const S=f(b,w);window.location.hash!==S&&(window.location.hash=S),r({page:b,params:w})},[]),p=()=>{var b,w;switch(s.page){case"dashboard":return o.jsx(gu,{navigate:y});case"getting-started":return o.jsx(O_,{navigate:y});case"children":return o.jsx(z_,{navigate:y});case"classes":return o.jsx(M_,{navigate:y});case"class-detail":return o.jsx(H_,{classroom:s.params.classroom,navigate:y});case"child-detail":return o.jsx(tS,{childId:s.params.id,navigate:y});case"add-observation":return o.jsx(Zg,{childId:s.params.childId,navigate:y});case"edit-observation":{let S=(b=s.params)==null?void 0:b.observation;if(!S)try{const C=sessionStorage.getItem("edit-observation");C&&(S=JSON.parse(C))}catch{}const j=((w=s.params)==null?void 0:w.childId)??(S==null?void 0:S.child_id);return j?o.jsx(Zg,{childId:j,navigate:y,observationToEdit:S}):o.jsx(gu,{navigate:y})}case"media":return o.jsx(fS,{childId:s.params.childId,navigate:y});case"child-observations":return o.jsx(gS,{childId:s.params.childId,navigate:y});case"teacher-chat":return o.jsx(pS,{navigate:y,childId:s.params.forChatChildId,classroom:s.params.classroom});case"attendance":return o.jsx(yS,{navigate:y});case"settings":return o.jsx(dS,{});default:return o.jsx(gu,{navigate:y})}};return o.jsxs(fp.Provider,{value:{session:l,user:(l==null?void 0:l.user)??null},children:[o.jsx("div",{className:"min-h-screen bg-gray-100",children:l?o.jsx(T_,{navigate:y,children:p()}):o.jsx(ww,{})}),o.jsx(ES,{})]})},mp=document.getElementById("root");if(!mp)throw new Error("Kk eleman bulunamad.");const CS=Gv.createRoot(mp);CS.render(o.jsx($u.StrictMode,{children:o.jsx(AS,{})}));
